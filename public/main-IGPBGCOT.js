import{$ as C,$a as ed,A as Hu,Aa as H_,Ab as Ja,B as ja,Ba as Ha,Bb as tc,C as fi,Ca as G_,Cb as ad,D as F_,Da as un,Db as cd,E as L_,Ea as be,Eb as Os,F as Ba,Fa as Ps,Fb as ec,G as Vt,Ga,Gb as De,H as Gu,Ha as Ns,Hb as rv,I as lr,Ia as oe,Ib as ye,J as ur,Ja as T,Jb as sv,K as Ku,Ka as dr,Kb as gr,L as Yu,La as mi,Lb as ov,M as qt,Ma as K_,Mb as av,N as V_,Na as Ka,Nb as O,O as Qu,Oa as Ya,Ob as cv,P as za,Pa as Qa,Pb as ld,Q as Pn,Qa as Y_,Qb as lv,R as Xu,Ra as D,Rb as uv,S as U_,Sa as Q_,Sb as dn,T as j_,Ta as hr,Tb as dv,U as $a,Ua as Ut,Ub as hv,V as cn,Va as Mn,Vb as Ms,W as ve,Wa as X_,Wb as fv,X as Re,Xa as td,Xb as mv,Y as At,Ya as Z_,Yb as ud,Z as _t,Za as Ue,Zb as pv,_ as qa,_a as ae,_b as gv,a as _,aa as F,ab as je,b as Z,ba as B_,bb as J_,bc as _v,ca as R,cb as nd,cc as dd,d as xn,da as Zu,db as q,e as f,ea as p,eb as B,ec as nc,f as hi,fa as I,fb as ht,fc as hd,g as P_,ga as It,gb as tv,gc as fd,h as an,ha as z_,hb as id,i as ju,ia as Ds,ib as ev,j as Bu,ja as at,jb as ce,k as V,ka as vt,kb as nv,l as ne,la as L,lb as Xa,m as N_,ma as nt,mb as Za,n as O_,na as xs,nb as fr,o as kn,oa as Wa,ob as pi,p as zu,pa as $_,pb as Fn,q as $u,qa as ks,qb as Ln,r as qu,ra as Nn,rb as pt,s as Jt,sa as ln,sb as mr,t as x,ta as q_,tb as rd,u as Rs,ua as W_,ub as sd,v as Wu,va as On,vb as od,w as M_,wa as J,wb as Vn,x as Y,xa as Ju,xb as bt,y as cr,ya as it,yb as pr,z as se,za as Dt,zb as iv}from"./chunk-KEXO5K7D.js";var gd=class extends av{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_d=class e extends gd{static makeCurrent(){ov(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=HC();return n==null?null:GC(n)}resetBaseElement(){Fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return dv(document.cookie,t)}},Fs=null;function HC(){return Fs=Fs||document.querySelector("base"),Fs?Fs.getAttribute("href"):null}function GC(e){return new URL(e,document.baseURI).pathname}var KC=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),vd=new R(""),yv=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new _t(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(p(vd),p(D))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),ic=class{constructor(t){this._doc=t}},md="ng-app-id",wv=(()=>{let t=class t{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ud(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${md}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(md),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(md,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(p(O),p(Ha),p(Ps,8),p(un))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),pd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yd=/%COMP%/g,Iv="%COMP%",YC=`_nghost-${Iv}`,QC=`_ngcontent-${Iv}`,XC=!0,ZC=new R("",{providedIn:"root",factory:()=>XC});function JC(e){return QC.replace(yd,e)}function tA(e){return YC.replace(yd,e)}function Ev(e,t){return t.map(n=>n.replace(yd,e))}var rc=(()=>{let t=class t{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=ud(c),this.defaultRenderer=new Ls(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ds.ShadowDom&&(r=Z(_({},r),{encapsulation:Ds.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof sc?s.applyToHost(i):s instanceof Vs&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Ds.Emulated:o=new sc(l,u,r,this.appId,d,a,c,h);break;case Ds.ShadowDom:return new bd(l,u,i,r,a,c,this.nonce,h);default:o=new Vs(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(p(yv),p(wv),p(Ha),p(ZC),p(O),p(un),p(D),p(Ps))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),Ls=class{constructor(t,n,i,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(pd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(vv(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(vv(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new _t(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let s=pd[r];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=pd[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Ns.DashCase|Ns.Important)?t.style.setProperty(n,i,r&Ns.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Ns.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=gr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function vv(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var bd=class extends Ls{constructor(t,n,i,r,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ev(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vs=class extends Ls{constructor(t,n,i,r,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?Ev(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sc=class extends Vs{constructor(t,n,i,r,s,o,a,c){let l=r+"-"+i.id;super(t,n,i,s,o,a,c,l),this.contentAttr=JC(l),this.hostAttr=tA(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},eA=(()=>{let t=class t extends ic{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),bv=["alt","control","meta","shift"],nA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},rA=(()=>{let t=class t extends ic{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),bv.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=nA[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),bv.forEach(a=>{if(a!==s){let c=iA[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{t.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function Tv(e,t){return rv(_({rootComponent:e},sA(t)))}function sA(e){return{appProviders:[...uA,...e?.providers??[]],platformProviders:lA}}function oA(){_d.makeCurrent()}function aA(){return new Ju}function cA(){return H_(document),document}var lA=[{provide:un,useValue:fv},{provide:G_,useValue:oA,multi:!0},{provide:O,useFactory:cA,deps:[]}];var uA=[{provide:$_,useValue:"root"},{provide:Ju,useFactory:aA,deps:[]},{provide:vd,useClass:eA,multi:!0,deps:[O,D,un]},{provide:vd,useClass:rA,multi:!0,deps:[O]},rc,wv,yv,{provide:Ya,useExisting:rc},{provide:gv,useClass:KC,deps:[]},[]];var Cv=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var M="primary",to=Symbol("RouteTitle"),Cd=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function wr(e){return new Cd(e)}function hA(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=e[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function fA(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Be(e[n],t[n]))return!1;return!0}function Be(e,t){let n=e?Ad(e):void 0,i=t?Ad(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Ov(e[r],t[r]))return!1;return!0}function Ad(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Ov(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,s)=>i[s]===r)}else return e===t}function Mv(e){return e.length>0?e[e.length-1]:null}function zn(e){return Wu(e)?e:tc(e)?Jt(Promise.resolve(e)):x(e)}var mA={exact:Lv,subset:Vv},Fv={exact:pA,subset:gA,ignored:()=>!0};function Av(e,t,n){return mA[n.paths](e.root,t.root,n.matrixParams)&&Fv[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function pA(e,t){return Be(e,t)}function Lv(e,t,n){if(!_i(e.segments,t.segments)||!cc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!Lv(e.children[i],t.children[i],n))return!1;return!0}function gA(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ov(e[n],t[n]))}function Vv(e,t,n){return Uv(e,t,t.segments,n)}function Uv(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!_i(r,n)||t.hasChildren()||!cc(r,n,i))}else if(e.segments.length===n.length){if(!_i(e.segments,n)||!cc(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!Vv(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!_i(e.segments,r)||!cc(e.segments,r,i)||!e.children[M]?!1:Uv(e.children[M],t,s,i)}}function cc(e,t,n){return t.every((i,r)=>Fv[n](e[r].parameters,i.parameters))}var Un=class{constructor(t=new Q([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=wr(this.queryParams),this._queryParamMap}toString(){return bA.serialize(this)}},Q=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lc(this)}},gi=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=wr(this.parameters),this._parameterMap}toString(){return Bv(this)}};function _A(e,t){return _i(e,t)&&e.every((n,i)=>Be(n.parameters,t[i].parameters))}function _i(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function vA(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===M&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==M&&(n=n.concat(t(r,i)))}),n}var eo=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>new Ws,providedIn:"root"});let e=t;return e})(),Ws=class{parse(t){let n=new Rd(t);return new Un(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Us(t.root,!0)}`,i=IA(t.queryParams),r=typeof t.fragment=="string"?`#${yA(t.fragment)}`:"";return`${n}${i}${r}`}},bA=new Ws;function lc(e){return e.segments.map(t=>Bv(t)).join("/")}function Us(e,t){if(!e.hasChildren())return lc(e);if(t){let n=e.children[M]?Us(e.children[M],!1):"",i=[];return Object.entries(e.children).forEach(([r,s])=>{r!==M&&i.push(`${r}:${Us(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=vA(e,(i,r)=>r===M?[Us(e.children[M],!1)]:[`${r}:${Us(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[M]!=null?`${lc(e)}/${n[0]}`:`${lc(e)}/(${n.join("//")})`}}function jv(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oc(e){return jv(e).replace(/%3B/gi,";")}function yA(e){return encodeURI(e)}function Sd(e){return jv(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uc(e){return decodeURIComponent(e)}function Sv(e){return uc(e.replace(/\+/g,"%20"))}function Bv(e){return`${Sd(e.path)}${wA(e.parameters)}`}function wA(e){return Object.entries(e).map(([t,n])=>`;${Sd(t)}=${Sd(n)}`).join("")}function IA(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${oc(n)}=${oc(r)}`).join("&"):`${oc(n)}=${oc(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var EA=/^[^\/()?;#]+/;function wd(e){let t=e.match(EA);return t?t[0]:""}var TA=/^[^\/()?;=#]+/;function CA(e){let t=e.match(TA);return t?t[0]:""}var AA=/^[^=?&#]+/;function SA(e){let t=e.match(AA);return t?t[0]:""}var RA=/^[^&#]+/;function DA(e){let t=e.match(RA);return t?t[0]:""}var Rd=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[M]=new Q(t,n)),i}parseSegment(){let t=wd(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new _t(4009,!1);return this.capture(t),new gi(uc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=CA(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=wd(this.remaining);r&&(i=r,this.capture(i))}t[uc(n)]=uc(i)}parseQueryParam(t){let n=SA(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=DA(this.remaining);o&&(i=o,this.capture(i))}let r=Sv(n),s=Sv(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=wd(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new _t(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=M);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[M]:new Q([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new _t(4011,!1)}};function zv(e){return e.segments.length>0?new Q([],{[M]:e}):e}function $v(e){let t={};for(let[i,r]of Object.entries(e.children)){let s=$v(r);if(i===M&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let n=new Q(e.segments,t);return xA(n)}function xA(e){if(e.numberOfChildren===1&&e.children[M]){let t=e.children[M];return new Q(e.segments.concat(t.segments),t.children)}return e}function Ir(e){return e instanceof Un}function kA(e,t,n=null,i=null){let r=qv(e);return Wv(r,t,n,i)}function qv(e){let t;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Q(s.url,o);return s===e&&(t=a),a}let i=n(e.root),r=zv(i);return t??r}function Wv(e,t,n,i){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return Id(r,r,r,n,i);let s=PA(t);if(s.toRoot())return Id(r,r,new Q([],{}),n,i);let o=NA(s,r,e),a=o.processChildren?zs(o.segmentGroup,o.index,s.commands):Gv(o.segmentGroup,o.index,s.commands);return Id(r,o.segmentGroup,a,n,i)}function dc(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Hs(e){return typeof e=="object"&&e!=null&&e.outlets}function Id(e,t,n,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;e===t?o=n:o=Hv(e,t,n);let a=zv($v(o));return new Un(a,s,r)}function Hv(e,t,n){let i={};return Object.entries(e.children).forEach(([r,s])=>{s===t?i[r]=n:i[r]=Hv(s,t,n)}),new Q(e.segments,i)}var hc=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&dc(i[0]))throw new _t(4003,!1);let r=i.find(Hs);if(r&&r!==Mv(i))throw new _t(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function PA(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new hc(!0,0,e);let t=0,n=!1,i=e.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new hc(n,t,i)}var br=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function NA(e,t,n){if(e.isAbsolute)return new br(t,!0,0);if(!n)return new br(t,!1,NaN);if(n.parent===null)return new br(n,!0,0);let i=dc(e.commands[0])?0:1,r=n.segments.length-1+i;return OA(n,r,e.numberOfDoubleDots)}function OA(e,t,n){let i=e,r=t,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new _t(4005,!1);r=i.segments.length}return new br(i,!1,r-s)}function MA(e){return Hs(e[0])?e[0].outlets:{[M]:e}}function Gv(e,t,n){if(e??=new Q([],{}),e.segments.length===0&&e.hasChildren())return zs(e,t,n);let i=FA(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let s=new Q(e.segments.slice(0,i.pathIndex),{});return s.children[M]=new Q(e.segments.slice(i.pathIndex),e.children),zs(s,0,r)}else return i.match&&r.length===0?new Q(e.segments,{}):i.match&&!e.hasChildren()?Dd(e,t,n):i.match?zs(e,0,r):Dd(e,t,n)}function zs(e,t,n){if(n.length===0)return new Q(e.segments,{});{let i=MA(n),r={};if(Object.keys(i).some(s=>s!==M)&&e.children[M]&&e.numberOfChildren===1&&e.children[M].segments.length===0){let s=zs(e.children[M],t,n);return new Q(e.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Gv(e.children[s],t,o))}),Object.entries(e.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Q(e.segments,r)}}function FA(e,t,n){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return s;let o=e.segments[r],a=n[i];if(Hs(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Dv(c,l,o))return s;i+=2}else{if(!Dv(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Dd(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let s=n[r];if(Hs(s)){let c=LA(s.outlets);return new Q(i,c)}if(r===0&&dc(n[0])){let c=e.segments[t];i.push(new gi(c.path,Rv(n[0]))),r++;continue}let o=Hs(s)?s.outlets[M]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&dc(a)?(i.push(new gi(o,Rv(a))),r+=2):(i.push(new gi(o,{})),r++)}return new Q(i,{})}function LA(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=Dd(new Q([],{}),0,i))}),t}function Rv(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function Dv(e,t,n){return e==n.path&&Be(t,n.parameters)}var $s="imperative",xt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(xt||{}),we=class{constructor(t,n){this.id=t,this.url=n}},Er=class extends we{constructor(t,n,i="imperative",r=null){super(t,n),this.type=xt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hn=class extends we{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=xt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ue=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ue||{}),fc=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(fc||{}),jn=class extends we{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=xt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends we{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=xt.NavigationSkipped}},Gs=class extends we{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=xt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mc=class extends we{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=xt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xd=class extends we{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=xt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kd=class extends we{constructor(t,n,i,r,s){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=xt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pd=class extends we{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=xt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nd=class extends we{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=xt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class{constructor(t){this.route=t,this.type=xt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Md=class{constructor(t){this.route=t,this.type=xt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fd=class{constructor(t){this.snapshot=t,this.type=xt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ld=class{constructor(t){this.snapshot=t,this.type=xt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{constructor(t){this.snapshot=t,this.type=xt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{constructor(t){this.snapshot=t,this.type=xt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pc=class{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=xt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Ks=class{},Ys=class{constructor(t){this.url=t}};var jd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new no,this.attachRef=null}},no=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new jd,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gc=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Bd(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=Bd(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=zd(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return zd(t,this._root).map(n=>n.value)}};function Bd(e,t){if(e===t.value)return t;for(let n of t.children){let i=Bd(e,n);if(i)return i}return null}function zd(e,t){if(e===t.value)return[t];for(let n of t.children){let i=zd(e,n);if(i.length)return i.unshift(t),i}return[]}var le=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function vr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var _c=class extends gc{constructor(t,n){super(t),this.snapshot=n,Zd(this,t)}toString(){return this.snapshot.toString()}};function Kv(e){let t=VA(e),n=new ne([new gi("",{})]),i=new ne({}),r=new ne({}),s=new ne({}),o=new ne(""),a=new vi(n,i,s,o,r,M,e,t.root);return a.snapshot=t.root,new _c(new le(a,[]),t)}function VA(e){let t={},n={},i={},r="",s=new Qs([],t,i,r,n,M,e,null,{});return new vc("",new le(s,[]))}var vi=class{constructor(t,n,i,r,s,o,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(l=>l[to]))??x(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(t=>wr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(t=>wr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xd(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),r?.data),e._resolvedData)}:i={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},r&&Qv(r)&&(i.resolve[to]=r.title),i}var Qs=class{get title(){return this.data?.[to]}constructor(t,n,i,r,s,o,a,c,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},vc=class extends gc{constructor(t,n){super(n),this.url=t,Zd(this,n)}toString(){return Yv(this._root)}};function Zd(e,t){t.value._routerState=e,t.children.forEach(n=>Zd(e,n))}function Yv(e){let t=e.children.length>0?` { ${e.children.map(Yv).join(", ")} } `:"";return`${e.value}${t}`}function Ed(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Be(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Be(t.params,n.params)||e.paramsSubject.next(n.params),fA(t.url,n.url)||e.urlSubject.next(n.url),Be(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function $d(e,t){let n=Be(e.params,t.params)&&_A(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||$d(e.parent,t.parent))}function Qv(e){return typeof e.title=="string"||e.title===null}var Jd=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=M,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=I(no),this.location=I(hr),this.changeDetector=I(De),this.environmentInjector=I(ks),this.inputBinder=I(Ic,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _t(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _t(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _t(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new _t(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new qd(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=nt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ln]});let e=t;return e})(),qd=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===vi?this.route:t===no?this.childContexts:this.parent.get(t,n)}},Ic=new R(""),xv=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=cr([r.queryParams,r.params,r.data]).pipe(ve(([o,a,c],l)=>(c=_(_(_({},o),a),c),l===0?x(c):Promise.resolve(c)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=sv(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(i,s)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function UA(e,t,n){let i=Xs(e,t._root,n?n._root:void 0);return new _c(i,t)}function Xs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=jA(e,t,n);return new le(i,r)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Xs(e,a)),o}}let i=BA(t.value),r=t.children.map(s=>Xs(e,s));return new le(i,r)}}function jA(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Xs(e,i,r);return Xs(e,i)})}function BA(e){return new vi(new ne(e.url),new ne(e.params),new ne(e.queryParams),new ne(e.fragment),new ne(e.data),e.outlet,e.component,e)}var Xv="ngNavigationCancelingError";function Zv(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Ir(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Jv(!1,ue.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function Jv(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Xv]=!0,n.cancellationCode=t,n}function zA(e){return tb(e)&&Ir(e.url)}function tb(e){return!!e&&e[Xv]}var $A=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["ng-component"]],standalone:!0,features:[bt],decls:1,vars:0,template:function(r,s){r&1&&ht(0,"router-outlet")},dependencies:[Jd],encapsulation:2});let e=t;return e})();function qA(e,t){return e.providers&&!e._injector&&(e._injector=td(e.providers,t,`Route: ${e.path}`)),e._injector??t}function th(e){let t=e.children&&e.children.map(th),n=t?Z(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==M&&(n.component=$A),n}function ze(e){return e.outlet||M}function WA(e,t){let n=e.filter(i=>ze(i)===t);return n.push(...e.filter(i=>ze(i)!==t)),n}function io(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var HA=(e,t,n,i)=>Y(r=>(new Wd(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),Wd=class{constructor(t,n,i,r,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Ed(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=vr(n);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,n,i){let r=t.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,s=vr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,s=vr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=vr(n);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ud(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Ld(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,s=n?n.value:null;if(Ed(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ed(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=io(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},bc=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},yr=class{constructor(t,n){this.component=t,this.route=n}};function GA(e,t,n){let i=e._root,r=t?t._root:null;return js(i,r,n,[i.value])}function KA(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Cr(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!B_(e)?e:t.get(e):i}function js(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=vr(t);return e.children.forEach(o=>{YA(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qs(a,n.getContext(o),r)),r}function YA(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=QA(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new bc(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?js(e,t,a?a.children:null,i,r):js(e,t,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new yr(a.outlet.component,o))}else o&&qs(t,a,r),r.canActivateChecks.push(new bc(i)),s.component?js(e,null,a?a.children:null,i,r):js(e,null,n,i,r);return r}function QA(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!_i(e.url,t.url);case"pathParamsOrQueryParamsChange":return!_i(e.url,t.url)||!Be(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$d(e,t)||!Be(e.queryParams,t.queryParams);case"paramsChange":default:return!$d(e,t)}}function qs(e,t,n){let i=vr(e),r=e.value;Object.entries(i).forEach(([s,o])=>{r.component?t?qs(o,t.children.getContext(s),n):qs(o,null,n):qs(o,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new yr(t.outlet.component,r)):n.canDeactivateChecks.push(new yr(null,r)):n.canDeactivateChecks.push(new yr(null,r))}function ro(e){return typeof e=="function"}function XA(e){return typeof e=="boolean"}function ZA(e){return e&&ro(e.canLoad)}function JA(e){return e&&ro(e.canActivate)}function tS(e){return e&&ro(e.canActivateChild)}function eS(e){return e&&ro(e.canDeactivate)}function nS(e){return e&&ro(e.canMatch)}function eb(e){return e instanceof M_||e?.name==="EmptyError"}var ac=Symbol("INITIAL_VALUE");function Tr(){return ve(e=>cr(e.map(t=>t.pipe(qt(1),cn(ac)))).pipe(Y(t=>{for(let n of t)if(n!==!0){if(n===ac)return ac;if(n===!1||n instanceof Un)return n}return!0}),Vt(t=>t!==ac),qt(1)))}function iS(e,t){return se(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?x(Z(_({},n),{guardsResult:!0})):rS(o,i,r,e).pipe(se(a=>a&&XA(a)?sS(i,s,e,t):x(a)),Y(a=>Z(_({},n),{guardsResult:a})))})}function rS(e,t,n,i){return Jt(e).pipe(se(r=>uS(r.component,r.route,n,t,i)),Pn(r=>r!==!0,!0))}function sS(e,t,n,i){return Jt(t).pipe(ur(r=>ja(aS(r.route.parent,i),oS(r.route,i),lS(e,r.path,n),cS(e,r.route,n))),Pn(r=>r!==!0,!0))}function oS(e,t){return e!==null&&t&&t(new Vd(e)),x(!0)}function aS(e,t){return e!==null&&t&&t(new Fd(e)),x(!0)}function cS(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return x(!0);let r=i.map(s=>fi(()=>{let o=io(t)??n,a=Cr(s,o),c=JA(a)?a.canActivate(t,e):Nn(o,()=>a(t,e));return zn(c).pipe(Pn())}));return x(r).pipe(Tr())}function lS(e,t,n){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>KA(o)).filter(o=>o!==null).map(o=>fi(()=>{let a=o.guards.map(c=>{let l=io(o.node)??n,u=Cr(c,l),d=tS(u)?u.canActivateChild(i,e):Nn(l,()=>u(i,e));return zn(d).pipe(Pn())});return x(a).pipe(Tr())}));return x(s).pipe(Tr())}function uS(e,t,n,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return x(!0);let o=s.map(a=>{let c=io(t)??r,l=Cr(a,c),u=eS(l)?l.canDeactivate(e,t,n,i):Nn(c,()=>l(e,t,n,i));return zn(u).pipe(Pn())});return x(o).pipe(Tr())}function dS(e,t,n,i){let r=t.canLoad;if(r===void 0||r.length===0)return x(!0);let s=r.map(o=>{let a=Cr(o,e),c=ZA(a)?a.canLoad(t,n):Nn(e,()=>a(t,n));return zn(c)});return x(s).pipe(Tr(),nb(i))}function nb(e){return P_(At(t=>{if(Ir(t))throw Zv(e,t)}),Y(t=>t===!0))}function hS(e,t,n,i){let r=t.canMatch;if(!r||r.length===0)return x(!0);let s=r.map(o=>{let a=Cr(o,e),c=nS(a)?a.canMatch(t,n):Nn(e,()=>a(t,n));return zn(c)});return x(s).pipe(Tr(),nb(i))}var Zs=class{constructor(t){this.segmentGroup=t||null}},yc=class extends Error{constructor(t){super(),this.urlTree=t}};function _r(e){return Rs(new Zs(e))}function fS(e){return Rs(new _t(4e3,!1))}function mS(e){return Rs(Jv(!1,ue.GuardRejected))}var Hd=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return x(i);if(r.numberOfChildren>1||!r.children[M])return fS(t.redirectTo);r=r.children[M]}}applyRedirectCommands(t,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new yc(r);return r}applyRedirectCreateUrlTree(t,n,i,r){let s=this.createSegmentGroup(t,n.root,i,r);return new Un(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(t,n,i,r){let s=this.createSegments(t,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,i,r)}),new Q(s,o)}createSegments(t,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new _t(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}},Gd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pS(e,t,n,i,r){let s=eh(e,t,n);return s.matched?(i=qA(t,i),hS(i,t,n,r).pipe(Y(o=>o===!0?s:_({},Gd)))):x(s)}function eh(e,t,n){if(t.path==="**")return gS(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},Gd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||hA)(n,e,t);if(!r)return _({},Gd);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?_(_({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function gS(e){return{matched:!0,parameters:e.length>0?Mv(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function kv(e,t,n,i){return n.length>0&&bS(e,n,i)?{segmentGroup:new Q(t,vS(i,new Q(n,e.children))),slicedSegments:[]}:n.length===0&&yS(e,n,i)?{segmentGroup:new Q(e.segments,_S(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new Q(e.segments,e.children),slicedSegments:n}}function _S(e,t,n,i){let r={};for(let s of n)if(Ec(e,t,s)&&!i[ze(s)]){let o=new Q([],{});r[ze(s)]=o}return _(_({},i),r)}function vS(e,t){let n={};n[M]=t;for(let i of e)if(i.path===""&&ze(i)!==M){let r=new Q([],{});n[ze(i)]=r}return n}function bS(e,t,n){return n.some(i=>Ec(e,t,i)&&ze(i)!==M)}function yS(e,t,n){return n.some(i=>Ec(e,t,i))}function Ec(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wS(e,t,n,i){return ze(e)!==i&&(i===M||!Ec(t,n,e))?!1:eh(t,e,n).matched}function IS(e,t,n){return t.length===0&&!e.children[n]}var Kd=class{};function ES(e,t,n,i,r,s,o="emptyOnly"){return new Yd(e,t,n,i,r,o,s).recognize()}var TS=31,Yd=class{constructor(t,n,i,r,s,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Hd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new _t(4002,`'${t.segmentGroup}'`)}recognize(){let t=kv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Y(n=>{let i=new Qs([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},M,this.rootComponentType,null,{}),r=new le(i,n),s=new vc("",r),o=kA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,M).pipe(lr(i=>{if(i instanceof yc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Zs?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,r=Xd(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(t,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r,!0).pipe(Y(s=>s instanceof le?[s]:[]))}processChildren(t,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Jt(r).pipe(ur(s=>{let o=i.children[s],a=WA(n,s);return this.processSegmentGroup(t,a,o,s)}),j_((s,o)=>(s.push(...o),s)),Yu(null),U_(),se(s=>{if(s===null)return _r(i);let o=ib(s);return CS(o),x(o)}))}processSegment(t,n,i,r,s,o){return Jt(n).pipe(ur(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,r,s,o).pipe(lr(c=>{if(c instanceof Zs)return x(null);throw c}))),Pn(a=>!!a),lr(a=>{if(eb(a))return IS(i,r,s)?x(new Kd):_r(i);throw a}))}processSegmentAgainstRoute(t,n,i,r,s,o,a){return wS(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,s,o):_r(r):_r(r)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=eh(n,r,s);if(!a)return _r(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TS&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(se(h=>this.processSegment(t,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(t,n,i,r,s){let o=pS(n,i,r,t,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(ve(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ve(({routes:c})=>{let l=i._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,m=new Qs(u,h,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,SS(i),ze(i),i.component??i._loadedComponent??null,i,RS(i)),{segmentGroup:g,slicedSegments:E}=kv(n,u,d,c);if(E.length===0&&g.hasChildren())return this.processChildren(l,c,g).pipe(Y(K=>K===null?null:new le(m,K)));if(c.length===0&&E.length===0)return x(new le(m,[]));let S=ze(i)===s;return this.processSegment(l,c,g,E,S?M:s,!0).pipe(Y(K=>new le(m,K instanceof le?[K]:[])))}))):_r(n)))}getChildConfig(t,n,i){return n.children?x({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?x({routes:n._loadedRoutes,injector:n._loadedInjector}):dS(t,n,i,this.urlSerializer).pipe(se(r=>r?this.configLoader.loadChildren(t,n).pipe(At(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):mS(n))):x({routes:[],injector:t})}};function CS(e){e.sort((t,n)=>t.value.outlet===M?-1:n.value.outlet===M?1:t.value.outlet.localeCompare(n.value.outlet))}function AS(e){let t=e.value.routeConfig;return t&&t.path===""}function ib(e){let t=[],n=new Set;for(let i of e){if(!AS(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=ib(i.children);t.push(new le(i.value,r))}return t.filter(i=>!n.has(i))}function SS(e){return e.data||{}}function RS(e){return e.resolve||{}}function DS(e,t,n,i,r,s){return se(o=>ES(e,t,n,i,o.extractedUrl,r,s).pipe(Y(({state:a,tree:c})=>Z(_({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function xS(e,t){return se(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return x(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of rb(c))o.add(l);let a=0;return Jt(o).pipe(ur(c=>s.has(c)?kS(c,i,e,t):(c.data=Xd(c,c.parent,e).resolve,x(void 0))),At(()=>a++),Xu(1),se(c=>a===o.size?x(n):kn))})}function rb(e){let t=e.children.map(n=>rb(n)).flat();return[e,...t]}function kS(e,t,n,i){let r=e.routeConfig,s=e._resolve;return r?.title!==void 0&&!Qv(r)&&(s[to]=r.title),PS(s,e,t,i).pipe(Y(o=>(e._resolvedData=o,e.data=Xd(e,e.parent,n).resolve,null)))}function PS(e,t,n,i){let r=Ad(e);if(r.length===0)return x({});let s={};return Jt(r).pipe(se(o=>NS(e[o],t,n,i).pipe(Pn(),At(a=>{s[o]=a}))),Xu(1),V_(s),lr(o=>eb(o)?kn:Rs(o)))}function NS(e,t,n,i){let r=io(t)??i,s=Cr(e,r),o=s.resolve?s.resolve(t,n):Nn(r,()=>s(t,n));return zn(o)}function Td(e){return ve(t=>{let n=e(t);return n?Jt(n).pipe(Y(()=>t)):x(t)})}var sb=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===M);return r}getResolvedTitleForRoute(i){return i.data[to]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>I(OS),providedIn:"root"});let e=t;return e})(),OS=(()=>{let t=class t extends sb{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(p(Cv))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),so=new R("",{providedIn:"root",factory:()=>({})}),Js=new R(""),nh=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(ec)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return x(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=zn(i.loadComponent()).pipe(Y(ob),At(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),za(()=>{this.componentLoaders.delete(i)})),s=new Bu(r,()=>new V).pipe(ju());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return x({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=MS(r,this.compiler,i,this.onLoadEndListener).pipe(za(()=>{this.childrenLoaders.delete(r)})),a=new Bu(o,()=>new V).pipe(ju());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function MS(e,t,n,i){return zn(e.loadChildren()).pipe(Y(ob),se(r=>r instanceof X_||Array.isArray(r)?x(r):Jt(t.compileModuleAsync(r))),Y(r=>{i&&i(e);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Js,[],{optional:!0,self:!0}).flat()),{routes:o.map(th),injector:s}}))}function FS(e){return e&&typeof e=="object"&&"default"in e}function ob(e){return FS(e)?e.default:e}var ih=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>I(LS),providedIn:"root"});let e=t;return e})(),LS=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ab=new R(""),cb=new R("");function VS(e,t,n){let i=e.get(cb),r=e.get(O);return e.get(D).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=r.startViewTransition(()=>(s(),US(e))),{onViewTransitionCreated:c}=i;return c&&Nn(e,()=>c({transition:a,from:t,to:n})),o})}function US(e){return new Promise(t=>{Q_(t,{injector:e})})}var rh=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new V,this.transitionAbortSubject=new V,this.configLoader=I(nh),this.environmentInjector=I(ks),this.urlSerializer=I(eo),this.rootContexts=I(no),this.location=I(dn),this.inputBindingEnabled=I(Ic,{optional:!0})!==null,this.titleStrategy=I(sb),this.options=I(so,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(ih),this.createViewTransition=I(ab,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>x(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Od(s)),r=s=>this.events.next(new Md(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Z(_(_({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ne({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$s,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vt(o=>o.id!==0),Y(o=>Z(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ve(o=>{let a=!1,c=!1;return x(o).pipe(ve(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ue.SupersededByNewNavigation),kn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Z(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Bn(l.id,this.urlSerializer.serialize(l.rawUrl),h,fc.IgnoredSameUrlNavigation)),l.resolve(null),kn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return x(l).pipe(ve(h=>{let m=this.transitions?.getValue();return this.events.next(new Er(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?kn:Promise.resolve(h)}),DS(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),At(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Z(_({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new mc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:m,source:g,restoredState:E,extras:S}=l,K=new Er(h,this.urlSerializer.serialize(m),g,E);this.events.next(K);let ot=Kv(this.rootComponentType).snapshot;return this.currentTransition=o=Z(_({},l),{targetSnapshot:ot,urlAfterRedirects:m,extras:Z(_({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,x(o)}else{let h="";return this.events.next(new Bn(l.id,this.urlSerializer.serialize(l.extractedUrl),h,fc.IgnoredByUrlHandlingStrategy)),l.resolve(null),kn}}),At(l=>{let u=new xd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Y(l=>(this.currentTransition=o=Z(_({},l),{guards:GA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),iS(this.environmentInjector,l=>this.events.next(l)),At(l=>{if(o.guardsResult=l.guardsResult,Ir(l.guardsResult))throw Zv(this.urlSerializer,l.guardsResult);let u=new kd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Vt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ue.GuardRejected),!1)),Td(l=>{if(l.guards.canActivateChecks.length)return x(l).pipe(At(u=>{let d=new Pd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ve(u=>{let d=!1;return x(u).pipe(xS(this.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",ue.NoDataFromResolver)}}))}),At(u=>{let d=new Nd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Td(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(At(m=>{d.component=m}),Y(()=>{})));for(let m of d.children)h.push(...u(m));return h};return cr(u(l.targetSnapshot.root)).pipe(Yu(null),qt(1))}),Td(()=>this.afterPreactivation()),ve(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?Jt(d).pipe(Y(()=>o)):x(o)}),Y(l=>{let u=UA(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Z(_({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),At(()=>{this.events.next(new Ks)}),HA(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qt(1),At({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Re(this.transitionAbortSubject.pipe(At(l=>{throw l}))),za(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",ue.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),lr(l=>{if(c=!0,tb(l))this.events.next(new jn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),zA(l)?this.events.next(new Ys(l.url)):o.resolve(!1);else{this.events.next(new Gs(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return kn}))}))}cancelNavigationTransition(i,r,s){let o=new jn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function jS(e){return e!==$s}var BS=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>I(zS),providedIn:"root"});let e=t;return e})(),Qd=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},zS=(()=>{let t=class t extends Qd{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=On(t)))(s||t)}})(),t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),lb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:()=>I($S),providedIn:"root"});let e=t;return e})(),$S=(()=>{let t=class t extends lb{constructor(){super(...arguments),this.location=I(dn),this.urlSerializer=I(eo),this.options=I(so,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(ih),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Un,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Kv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Er)this.stateMemento=this.createStateMemento();else if(i instanceof Bn)this.rawUrlTree=r.initialUrl;else if(i instanceof mc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Ks?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof jn&&(i.code===ue.GuardRejected||i.code===ue.NoDataFromResolver)?this.restoreHistory(r):i instanceof Gs?this.restoreHistory(r,!0):i instanceof hn&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=_(_({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=_(_({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=On(t)))(s||t)}})(),t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Bs=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Bs||{});function ub(e,t){e.events.pipe(Vt(n=>n instanceof hn||n instanceof jn||n instanceof Gs||n instanceof Bn),Y(n=>n instanceof hn||n instanceof Bn?Bs.COMPLETE:(n instanceof jn?n.code===ue.Redirect||n.code===ue.SupersededByNewNavigation:!1)?Bs.REDIRECTING:Bs.FAILED),Vt(n=>n!==Bs.REDIRECTING),qt(1)).subscribe(()=>{t()})}function qS(e){throw e}var WS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ie=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(Ja),this.stateManager=I(lb),this.options=I(so,{optional:!0})||{},this.pendingTasks=I(Z_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(rh),this.urlSerializer=I(eo),this.location=I(dn),this.urlHandlingStrategy=I(ih),this._events=new V,this.errorHandler=this.options.errorHandler||qS,this.navigated=!1,this.routeReuseStrategy=I(BS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(Js,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(Ic,{optional:!0}),this.eventsSubscription=new hi,this.isNgZoneEnabled=I(D)instanceof D&&D.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof jn&&r.code!==ue.Redirect&&r.code!==ue.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof hn)this.navigated=!0;else if(r instanceof Ys){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||jS(s.source)};this.scheduleNavigation(a,$s,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}KS(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$s,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=_({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(th),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let m=s?s.snapshot:this.routerState.snapshot.root;h=qv(m)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return Wv(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Ir(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,$s,null,r)}navigate(i,r={skipLocationChange:!1}){return GS(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=_({},WS):r===!1?s=_({},HS):s=r,Ir(i))return Av(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Av(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,m)=>{c=h,l=m});let d=this.pendingTasks.add();return ub(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function GS(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new _t(4008,!1)}function KS(e){return!(e instanceof Ks)&&!(e instanceof Ys)}var wc=class{};var YS=(()=>{let t=class t{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Vt(i=>i instanceof hn),ur(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=td(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Jt(s).pipe(Hu())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=x(null);let o=s.pipe(se(a=>a===null?x(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Jt([o,a]).pipe(Hu())}else return o})}};t.\u0275fac=function(r){return new(r||t)(p(Ie),p(ec),p(ks),p(wc),p(nh))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),db=new R(""),QS=(()=>{let t=class t{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Er?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof hn?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Bn&&i.code===fc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof pc&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pc(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){dr()},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})();function hb(e,...t){return xs([{provide:Js,multi:!0,useValue:e},[],{provide:vi,useFactory:fb,deps:[Ie]},{provide:cd,multi:!0,useFactory:mb},t.map(n=>n.\u0275providers)])}function fb(e){return e.routerState.root}function oo(e,t){return{\u0275kind:e,\u0275providers:t}}function mb(){let e=I(J);return t=>{let n=e.get(Os);if(t!==n.components[0])return;let i=e.get(Ie),r=e.get(pb);e.get(sh)===1&&i.initialNavigation(),e.get(gb,null,Zu.Optional)?.setUpPreloading(),e.get(db,null,Zu.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var pb=new R("",{factory:()=>new V}),sh=new R("",{providedIn:"root",factory:()=>1});function XS(){return oo(2,[{provide:sh,useValue:0},{provide:ad,multi:!0,deps:[J],useFactory:t=>{let n=t.get(cv,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=t.get(Ie),s=t.get(pb);ub(r,()=>{i(!0)}),t.get(rh).afterPreactivation=()=>(i(!0),s.closed?x(void 0):s),r.initialNavigation()}))}}])}function ZS(){return oo(3,[{provide:ad,multi:!0,useFactory:()=>{let t=I(Ie);return()=>{t.setUpLocationChangeListener()}}},{provide:sh,useValue:2}])}var gb=new R("");function JS(e){return oo(0,[{provide:gb,useExisting:YS},{provide:wc,useExisting:e}])}function tR(){return oo(8,[xv,{provide:Ic,useExisting:xv}])}function eR(e){let t=[{provide:ab,useValue:VS},{provide:cb,useValue:_({skipNextTransition:!!e?.skipInitialTransition},e)}];return oo(9,t)}var Pv=new R("ROUTER_FORROOT_GUARD"),nR=[dn,{provide:eo,useClass:Ws},Ie,no,{provide:vi,useFactory:fb,deps:[Ie]},nh,[]],_b=(()=>{let t=class t{constructor(i){}static forRoot(i,r){return{ngModule:t,providers:[nR,[],{provide:Js,multi:!0,useValue:i},{provide:Pv,useFactory:oR,deps:[[Ie,new It,new z_]]},{provide:so,useValue:r||{}},r?.useHash?rR():sR(),iR(),r?.preloadingStrategy?JS(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?aR(r):[],r?.bindToComponentInputs?tR().\u0275providers:[],r?.enableViewTransitions?eR().\u0275providers:[],cR()]}}static forChild(i){return{ngModule:t,providers:[{provide:Js,multi:!0,useValue:i}]}}};t.\u0275fac=function(r){return new(r||t)(p(Pv,8))},t.\u0275mod=L({type:t}),t.\u0275inj=F({});let e=t;return e})();function iR(){return{provide:db,useFactory:()=>{let e=I(pv),t=I(D),n=I(so),i=I(rh),r=I(eo);return n.scrollOffset&&e.setOffset(n.scrollOffset),new QS(r,i,e,t,n)}}}function rR(){return{provide:ld,useClass:uv}}function sR(){return{provide:ld,useClass:lv}}function oR(e){return"guarded"}function aR(e){return[e.initialNavigation==="disabled"?ZS().\u0275providers:[],e.initialNavigation==="enabledBlocking"?XS().\u0275providers:[]]}var Nv=new R("");function cR(){return[{provide:Nv,useFactory:mb},{provide:cd,multi:!0,useExisting:Nv}]}var ch={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(e,t){if(!e)throw yi(t)},yi=function(e){return new Error("Firebase Database ("+ch.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var bb=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},lR=function(e){let t=[],n=0,i=0;for(;n<e.length;){let r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=e[n++],o=e[n++],a=e[n++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(c&1023))}else{let s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Cc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){let s=e[r],o=r+1<e.length,a=o?e[r+1]:0,c=r+2<e.length,l=c?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(h=64)),i.push(n[u],n[d],n[h],n[m])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){let s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;let l=r<e.length?n[e.charAt(r)]:64;++r;let d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new lh;let h=s<<2|a>>4;if(i.push(h),l!==64){let m=a<<4&240|l>>2;if(i.push(m),d!==64){let g=l<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},lh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dh=function(e){let t=bb(e);return Cc.encodeByteArray(t,!0)},ao=function(e){return dh(e).replace(/\./g,"")},co=function(e){try{return Cc.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function yb(e){return wb(void 0,e)}function wb(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!uR(n)||(e[n]=wb(e[n],t[n]));return e}function uR(e){return e!=="__proto__"}function dR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hR=()=>dR().__FIREBASE_DEFAULTS__,fR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},mR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&co(e[1]);return t&&JSON.parse(t)},Ac=()=>{try{return hR()||fR()||mR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},hh=e=>{var t,n;return(n=(t=Ac())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Sc=e=>{let t=hh(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},fh=()=>{var e;return(e=Ac())===null||e===void 0?void 0:e.config},mh=e=>{var t;return(t=Ac())===null||t===void 0?void 0:t[`_${e}`]};var bi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}};function Rc(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ao(JSON.stringify(n)),ao(JSON.stringify(o)),""].join(".")}function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lo(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function pR(){var e;let t=(e=Ac())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ib(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Dc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Eb(){let e=St();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $e(){return ch.NODE_CLIENT===!0||ch.NODE_ADMIN===!0}function Tb(){return!pR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ph(){try{return typeof indexedDB=="object"}catch{return!1}}function Cb(){return new Promise((e,t)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}var gR="FirebaseError",de=class e extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=gR,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fn.prototype.create)}},fn=class{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){let i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?_R(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new de(r,a,i)}};function _R(e,t){return e.replace(vR,(n,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var vR=/\{\$([^}]+)}/g;function Ar(e){return JSON.parse(e)}function kt(e){return JSON.stringify(e)}var Ab=function(e){let t={},n={},i={},r="";try{let s=e.split(".");t=Ar(co(s[0])||""),n=Ar(co(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:i,signature:r}};var Sb=function(e){let t=Ab(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Rb=function(e){let t=Ab(e).claims;return typeof t=="object"&&t.admin===!0};function qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wi(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function uo(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ho(e,t,n){let i={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function Ii(e,t){if(e===t)return!0;let n=Object.keys(e),i=Object.keys(t);for(let r of n){if(!i.includes(r))return!1;let s=e[r],o=t[r];if(vb(s)&&vb(o)){if(!Ii(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function vb(e){return e!==null&&typeof e=="object"}function Ei(e){let t=[];for(let[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Sr(e){let t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function Rr(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Tc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let i=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)i[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(r<<5|r>>>27)+l+c+u+i[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let i=n-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<n;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t}};function Db(e,t){let n=new uh(e,t);return n.subscribe.bind(n)}var uh=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");bR(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=ah),r.error===void 0&&(r.error=ah),r.complete===void 0&&(r.complete=ah);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bR(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ah(){}function xb(e,t){return`${e} failed: ${t} argument `}var kb=function(e){let t=[],n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,y(i<e.length,"Surrogate pair missing trail surrogate.");let o=e.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},fo=function(e){let t=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};var IU=4*60*60*1e3;function jt(e){return e&&e._delegate?e._delegate:e}var ie=class{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Ti="[DEFAULT]";var xc=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let i=new bi;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(wR(t))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Ti){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return f(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Ti){return this.instances.has(t)}getOptions(t=Ti){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ti){return this.component?this.component.multipleInstances?t:Ti:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yR(e){return e===Ti?void 0:e}function wR(e){return e.instantiationMode==="EAGER"}var mo=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new xc(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var IR=[],U=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(U||{}),ER={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},TR=U.INFO,CR={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},AR=(e,t,...n)=>{if(t<e.logLevel)return;let i=new Date().toISOString(),r=CR[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},We=class{constructor(t){this.name=t,this._logLevel=TR,this._logHandler=AR,this._userLogHandler=null,IR.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in U))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ER[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}};var SR=(e,t)=>t.some(n=>e instanceof n),Pb,Nb;function RR(){return Pb||(Pb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DR(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ob=new WeakMap,_h=new WeakMap,Mb=new WeakMap,gh=new WeakMap,bh=new WeakMap;function xR(e){let t=new Promise((n,i)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(He(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Ob.set(n,e)}).catch(()=>{}),bh.set(t,e),t}function kR(e){if(_h.has(e))return;let t=new Promise((n,i)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});_h.set(e,t)}var vh={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _h.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Mb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return He(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Fb(e){vh=e(vh)}function PR(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let i=e.call(kc(this),t,...n);return Mb.set(i,t.sort?t.sort():[t]),He(i)}:DR().includes(e)?function(...t){return e.apply(kc(this),t),He(Ob.get(this))}:function(...t){return He(e.apply(kc(this),t))}}function NR(e){return typeof e=="function"?PR(e):(e instanceof IDBTransaction&&kR(e),SR(e,RR())?new Proxy(e,vh):e)}function He(e){if(e instanceof IDBRequest)return xR(e);if(gh.has(e))return gh.get(e);let t=NR(e);return t!==e&&(gh.set(e,t),bh.set(t,e)),t}var kc=e=>bh.get(e);function Vb(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(e,t),a=He(o);return i&&o.addEventListener("upgradeneeded",c=>{i(He(o.result),c.oldVersion,c.newVersion,He(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var OR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],yh=new Map;function Lb(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(yh.get(t))return yh.get(t);let n=t.replace(/FromIndex$/,""),i=t!==n,r=MR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||OR.includes(n)))return;let s=function(o,...a){return f(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),r&&c.done]))[0]})};return yh.set(t,s),s}Fb(e=>Z(_({},e),{get:(t,n,i)=>Lb(t,n)||e.get(t,n,i),has:(t,n)=>!!Lb(t,n)||e.has(t,n)}));var Ih=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FR(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function FR(e){let t=e.getComponent();return t?.type==="VERSION"}var Eh="@firebase/app",Ub="0.10.2";var Ci=new We("@firebase/app"),LR="@firebase/app-compat",VR="@firebase/analytics-compat",UR="@firebase/analytics",jR="@firebase/app-check-compat",BR="@firebase/app-check",zR="@firebase/auth",$R="@firebase/auth-compat",qR="@firebase/database",WR="@firebase/database-compat",HR="@firebase/functions",GR="@firebase/functions-compat",KR="@firebase/installations",YR="@firebase/installations-compat",QR="@firebase/messaging",XR="@firebase/messaging-compat",ZR="@firebase/performance",JR="@firebase/performance-compat",tD="@firebase/remote-config",eD="@firebase/remote-config-compat",nD="@firebase/storage",iD="@firebase/storage-compat",rD="@firebase/firestore",sD="@firebase/firestore-compat",oD="firebase",aD="10.11.1";var Th="[DEFAULT]",cD={[Eh]:"fire-core",[LR]:"fire-core-compat",[UR]:"fire-analytics",[VR]:"fire-analytics-compat",[BR]:"fire-app-check",[jR]:"fire-app-check-compat",[zR]:"fire-auth",[$R]:"fire-auth-compat",[qR]:"fire-rtdb",[WR]:"fire-rtdb-compat",[HR]:"fire-fn",[GR]:"fire-fn-compat",[KR]:"fire-iid",[YR]:"fire-iid-compat",[QR]:"fire-fcm",[XR]:"fire-fcm-compat",[ZR]:"fire-perf",[JR]:"fire-perf-compat",[tD]:"fire-rc",[eD]:"fire-rc-compat",[nD]:"fire-gcs",[iD]:"fire-gcs-compat",[rD]:"fire-fst",[sD]:"fire-fst-compat","fire-js":"fire-js",[oD]:"fire-js-all"};var po=new Map,lD=new Map,Ch=new Map;function jb(e,t){try{e.container.addComponent(t)}catch(n){Ci.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ge(e){let t=e.name;if(Ch.has(t))return Ci.debug(`There were multiple attempts to register component ${t}.`),!1;Ch.set(t,e);for(let n of po.values())jb(n,e);for(let n of lD.values())jb(n,e);return!0}function Ai(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ke(e){return e.settings!==void 0}var uD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new fn("app","Firebase",uD);var Ah=class{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};var Ye=aD;function Dh(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let i=Object.assign({name:Th,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw $n.create("bad-app-name",{appName:String(r)});if(n||(n=fh()),!n)throw $n.create("no-options");let s=po.get(r);if(s){if(Ii(n,s.options)&&Ii(i,s.config))return s;throw $n.create("duplicate-app",{appName:r})}let o=new mo(r);for(let c of Ch.values())o.addComponent(c);let a=new Ah(n,i,o);return po.set(r,a),a}function qn(e=Th){let t=po.get(e);if(!t&&e===Th&&fh())return Dh();if(!t)throw $n.create("no-app",{appName:e});return t}function Pc(){return Array.from(po.values())}function ft(e,t,n){var i;let r=(i=cD[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ci.warn(a.join(" "));return}Ge(new ie(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var dD="firebase-heartbeat-database",hD=1,go="firebase-heartbeat-store",wh=null;function qb(){return wh||(wh=Vb(dD,hD,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(go)}catch(n){console.warn(n)}}}}).catch(e=>{throw $n.create("idb-open",{originalErrorMessage:e.message})})),wh}function fD(e){return f(this,null,function*(){try{let n=(yield qb()).transaction(go),i=yield n.objectStore(go).get(Wb(e));return yield n.done,i}catch(t){if(t instanceof de)Ci.warn(t.message);else{let n=$n.create("idb-get",{originalErrorMessage:t?.message});Ci.warn(n.message)}}})}function Bb(e,t){return f(this,null,function*(){try{let i=(yield qb()).transaction(go,"readwrite");yield i.objectStore(go).put(t,Wb(e)),yield i.done}catch(n){if(n instanceof de)Ci.warn(n.message);else{let i=$n.create("idb-set",{originalErrorMessage:n?.message});Ci.warn(i.message)}}})}function Wb(e){return`${e.name}!${e.options.appId}`}var mD=1024,pD=30*24*60*60*1e3,Sh=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Rh(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return f(this,null,function*(){var t,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zb();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=pD}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return f(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=zb(),{heartbeatsToSend:i,unsentEntries:r}=gD(this._heartbeatsCache.heartbeats),s=ao(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function zb(){return new Date().toISOString().substring(0,10)}function gD(e,t=mD){let n=[],i=e.slice();for(let r of e){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),$b(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$b(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var Rh=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return ph()?Cb().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield fD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Bb(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Bb(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function $b(e){return ao(JSON.stringify({version:2,heartbeats:e})).length}function _D(e){Ge(new ie("platform-logger",t=>new Ih(t),"PRIVATE")),Ge(new ie("heartbeat",t=>new Sh(t),"PRIVATE")),ft(Eh,Ub,e),ft(Eh,Ub,"esm2017"),ft("fire-js","")}_D("");var vD="firebase",bD="10.11.1";ft(vD,bD,"app");var mn=new pr("ANGULARFIRE2_VERSION");function xr(e,t,n){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var Ri=(e,t)=>{let n=t?[t]:Pc(),i=[];return n.forEach(r=>{r.container.getProvider(e).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Wn=class{constructor(){return Ri(yD)}},yD="app-check";function Dr(){}var Nc=class{zone;delegate;constructor(t,n=O_){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},xh=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dr,{},Dr,Dr)),n.pipe(At({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hn=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Nc(Zone.current)),this.insideAngular=n.run(()=>new Nc(Zone.current,N_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(p(D))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Oc(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function wD(e){return Oc().ngZone.runOutsideAngular(()=>e())}function Si(e){return Oc().ngZone.run(()=>e())}function ID(e){return ED(Oc())(e)}function ED(e){return function(n){return n=n.lift(new xh(e.ngZone)),n.pipe(qu(e.outsideAngular),$u(e.insideAngular))}}var TD=(e,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Si(()=>e.apply(void 0,i))},xe=(e,t)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(n||=Si(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dr,{},Dr,Dr))),i[s]=TD(i[s],n));let r=wD(()=>e.apply(this,i));if(!t)if(r instanceof an){let s=Oc();return r.pipe(qu(s.outsideAngular),$u(s.insideAngular))}else return Si(()=>r);return r instanceof an?r.pipe(ID):r instanceof Promise?Si(()=>new Promise((s,o)=>r.then(a=>Si(()=>s(a)),a=>Si(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Si(()=>r)};var ke=class{constructor(t){return t}},pn=class{constructor(){return Pc()}};function CD(e){return e&&e.length===1?e[0]:new ke(qn())}var kh=new R("angularfire2._apps"),AD={provide:ke,useFactory:CD,deps:[[new It,kh]]},SD={provide:pn,deps:[[new It,kh]]};function RD(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new ke(i)}}var DD=(()=>{class e{constructor(n){ft("angularfire",mn.full,"core"),ft("angularfire",mn.full,"app"),ft("angular",iv.full,n.toString())}static \u0275fac=function(i){return new(i||e)(p(un))};static \u0275mod=L({type:e});static \u0275inj=F({providers:[AD,SD]})}return e})();function Hb(e,...t){return{ngModule:DD,providers:[{provide:kh,useFactory:RD(e),multi:!0,deps:[D,J,Hn,...t]}]}}var Gb=xe(Dh,!0);function dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hy=dy,fy=new fn("auth","Firebase",dy());var jc=new We("@firebase/auth");function xD(e,...t){jc.logLevel<=U.WARN&&jc.warn(`Auth (${Ye}): ${e}`,...t)}function Fc(e,...t){jc.logLevel<=U.ERROR&&jc.error(`Auth (${Ye}): ${e}`,...t)}function Xe(e,...t){throw Jh(e,...t)}function Di(e,...t){return Jh(e,...t)}function my(e,t,n){let i=Object.assign(Object.assign({},hy()),{[t]:n});return new fn("auth","Firebase",i).create(t,{appName:e.name})}function Kn(e){return my(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jh(e,...t){if(typeof e!="string"){let n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return fy.create(e,...t)}function P(e,t,...n){if(!e)throw Jh(t,...n)}function gn(e){let t="INTERNAL ASSERTION FAILED: "+e;throw Fc(t),new Error(t)}function Yn(e,t){e||gn(t)}function Mh(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function kD(){return Kb()==="http:"||Kb()==="https:"}function Kb(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function PD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kD()||Ib()||"connection"in navigator)?navigator.onLine:!0}function ND(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var xi=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,Yn(n>t,"Short delay should be less than long delay!"),this.isMobile=lo()||Dc()}get(){return PD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function tf(e,t){Yn(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var Bc=class{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var OD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MD=new xi(3e4,6e4);function Pi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Qn(s,o,a,c){return f(this,arguments,function*(e,t,n,i,r={}){return py(e,r,()=>f(this,null,function*(){let l={},u={};i&&(t==="GET"?u=i:l={body:JSON.stringify(i)});let d=Ei(Object.assign({key:e.config.apiKey},u)).slice(1),h=yield e._getAdditionalHeaders();return h["Content-Type"]="application/json",e.languageCode&&(h["X-Firebase-Locale"]=e.languageCode),Bc.fetch()(gy(e,e.config.apiHost,n,d),Object.assign({method:t,headers:h,referrerPolicy:"no-referrer"},l))}))})}function py(e,t,n){return f(this,null,function*(){e._canInitEmulator=!1;let i=Object.assign(Object.assign({},OD),t);try{let r=new Fh(e),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Mc(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Mc(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw Mc(e,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw my(e,u,l);Xe(e,u)}}catch(r){if(r instanceof de)throw r;Xe(e,"network-request-failed",{message:String(r)})}})}function Xc(s,o,a,c){return f(this,arguments,function*(e,t,n,i,r={}){let l=yield Qn(e,t,n,i,r);return"mfaPendingCredential"in l&&Xe(e,"multi-factor-auth-required",{_serverResponse:l}),l})}function gy(e,t,n,i){let r=`${t}${n}?${i}`;return e.config.emulator?tf(e.config,r):`${e.config.apiScheme}://${r}`}function FD(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Fh=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),MD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Mc(e,t,n){let i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=Di(e,t,i);return r.customData._tokenResponse=n,r}function Yb(e){return e!==void 0&&e.enterprise!==void 0}var Lh=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return FD(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}};function LD(e,t){return f(this,null,function*(){return Qn(e,"GET","/v2/recaptchaConfig",Pi(e,t))})}function VD(e,t){return f(this,null,function*(){return Qn(e,"POST","/v1/accounts:delete",t)})}function _y(e,t){return f(this,null,function*(){return Qn(e,"POST","/v1/accounts:lookup",t)})}function _o(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function ef(e,t=!1){return f(this,null,function*(){let n=jt(e),i=yield n.getIdToken(t),r=nf(i);P(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:_o(Ph(r.auth_time)),issuedAtTime:_o(Ph(r.iat)),expirationTime:_o(Ph(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ph(e){return Number(e)*1e3}function nf(e){let[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{let r=co(n);return r?JSON.parse(r):(Fc("Failed to decode base64 JWT payload"),null)}catch(r){return Fc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Qb(e){let t=nf(e);return P(t,"internal-error"),P(typeof t.exp<"u","internal-error"),P(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function bo(e,t,n=!1){return f(this,null,function*(){if(n)return t;try{return yield t}catch(i){throw i instanceof de&&UD(i)&&e.auth.currentUser===e&&(yield e.auth.signOut()),i}})}function UD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var Vh=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yo=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_o(this.lastLoginAt),this.creationTime=_o(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zc(e){return f(this,null,function*(){var t;let n=e.auth,i=yield e.getIdToken(),r=yield bo(e,_y(n,{idToken:i}));P(r?.users.length,n,"internal-error");let s=r.users[0];e._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?vy(s.providerUserInfo):[],a=jD(e.providerData,o),c=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yo(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)})}function rf(e){return f(this,null,function*(){let t=jt(e);yield zc(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function jD(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function vy(e){return e.map(t=>{var{providerId:n}=t,i=zu(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function BD(e,t){return f(this,null,function*(){let n=yield py(e,{},()=>f(this,null,function*(){let i=Ei({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=gy(e,r,"/v1/token",`key=${s}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bc.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function zD(e,t){return f(this,null,function*(){return Qn(e,"POST","/v2/accounts:revokeToken",Pi(e,t))})}var vo=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){P(t.idToken,"internal-error"),P(typeof t.idToken<"u","internal-error"),P(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Qb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){P(t.length!==0,"internal-error");let n=Qb(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return f(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(P(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return f(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield BD(t,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new e;return i&&(P(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(P(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(P(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return gn("not implemented")}};function Gn(e,t){P(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var kr=class e{constructor(t){var{uid:n,auth:i,stsTokenManager:r}=t,s=zu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Vh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return f(this,null,function*(){let n=yield bo(this,this.stsTokenManager.getToken(this.auth,t));return P(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return ef(this,t)}reload(){return rf(this)}_assign(t){this!==t&&(P(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return f(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&(yield zc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){if(Ke(this.auth.app))return Promise.reject(Kn(this.auth));let t=yield this.getIdToken();return yield bo(this,VD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,r,s,o,a,c,l,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,K=(l=n.createdAt)!==null&&l!==void 0?l:void 0,ot=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:$t,emailVerified:_e,isAnonymous:Cs,providerData:di,stsTokenManager:As}=n;P($t&&As,t,"internal-error");let k_=vo.fromJSON(this.name,As);P(typeof $t=="string",t,"internal-error"),Gn(d,t.name),Gn(h,t.name),P(typeof _e=="boolean",t,"internal-error"),P(typeof Cs=="boolean",t,"internal-error"),Gn(m,t.name),Gn(g,t.name),Gn(E,t.name),Gn(S,t.name),Gn(K,t.name),Gn(ot,t.name);let Ss=new e({uid:$t,auth:t,email:h,emailVerified:_e,displayName:d,isAnonymous:Cs,photoURL:g,phoneNumber:m,tenantId:E,stsTokenManager:k_,createdAt:K,lastLoginAt:ot});return di&&Array.isArray(di)&&(Ss.providerData=di.map(Ua=>Object.assign({},Ua))),S&&(Ss._redirectEventId=S),Ss}static _fromIdTokenResponse(t,n,i=!1){return f(this,null,function*(){let r=new vo;r.updateFromServerResponse(n);let s=new e({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield zc(s),s})}static _fromGetAccountInfoResponse(t,n,i){return f(this,null,function*(){let r=n.users[0];P(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?vy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new vo;a.updateFromIdToken(i);let c=new e({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new yo(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Xb=new Map;function _n(e){Yn(e instanceof Function,"Expected a class definition");let t=Xb.get(e);return t?(Yn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xb.set(e,t),t)}var $D=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,i){return f(this,null,function*(){this.storage[n]=i})}_get(n){return f(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return e.type="NONE",e})(),Uh=$D;function Lc(e,t,n){return`firebase:${e}:${t}:${n}`}var $c=class e{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Lc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Lc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return f(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?kr._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return f(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,i="authUser"){return f(this,null,function*(){if(!n.length)return new e(_n(Uh),t,i);let r=(yield Promise.all(n.map(l=>f(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||_n(Uh),o=Lc(i,t.config.apiKey,t.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=kr._fromJSON(t,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new e(s,t,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>f(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new e(s,t,i))})}};function Zb(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wy(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(by(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ey(t))return"Blackberry";if(Ty(t))return"Webos";if(sf(t))return"Safari";if((t.includes("chrome/")||yy(t))&&!t.includes("edge/"))return"Chrome";if(Iy(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if(i?.length===2)return i[1]}return"Other"}function by(e=St()){return/firefox\//i.test(e)}function sf(e=St()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function yy(e=St()){return/crios\//i.test(e)}function wy(e=St()){return/iemobile/i.test(e)}function Iy(e=St()){return/android/i.test(e)}function Ey(e=St()){return/blackberry/i.test(e)}function Ty(e=St()){return/webos/i.test(e)}function Zc(e=St()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qD(e=St()){var t;return Zc(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function WD(){return Eb()&&document.documentMode===10}function Cy(e=St()){return Zc(e)||Iy(e)||Ty(e)||Ey(e)||/windows phone/i.test(e)||wy(e)}function HD(){try{return!!(window&&window!==window.top)}catch{return!1}}function Ay(e,t=[]){let n;switch(e){case"Browser":n=Zb(St());break;case"Worker":n=`${Zb(St())}-${e}`;break;default:n=e}let i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ye}/${i}`}var jh=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let i=s=>new Promise((o,a)=>{try{let c=t(s);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return f(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let i of this.queue)yield i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function GD(n){return f(this,arguments,function*(e,t={}){return Qn(e,"GET","/v2/passwordPolicy",Pi(e,t))})}var KD=6,Bh=class{constructor(t){var n,i,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(t,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var zh=class{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qc(this),this.idTokenSubscription=new qc(this),this.beforeStateQueue=new jh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=_n(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield $c.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return f(this,null,function*(){try{let n=yield _y(this,{idToken:t}),i=yield kr._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return f(this,null,function*(){var n;if(Ke(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(t);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return f(this,null,function*(){try{yield zc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=ND()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return f(this,null,function*(){if(Ke(this.app))return Promise.reject(Kn(this));let n=t?jt(t):null;return n&&P(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return f(this,null,function*(){if(!this._deleted)return t&&P(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return Ke(this.app)?Promise.reject(Kn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Ke(this.app)?Promise.reject(Kn(this)):this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(_n(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let t=yield GD(this),n=new Bh(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new fn("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},n)}})}revokeAccessToken(t){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield zD(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return f(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&_n(t)||this._popupRedirectResolver;P(n,this,"argument-error"),this.redirectPersistenceManager=yield $c.create(this,[_n(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return f(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return f(this,null,function*(){if(t===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(P(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=t.addObserver(n,i,r);return()=>{o=!0,c()}}else{let c=t.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(t){return f(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ay(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return f(this,null,function*(){var t;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&xD(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Pr(e){return jt(e)}var qc=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=Db(n=>this.observer=n)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Jc={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YD(e){Jc=e}function Sy(e){return Jc.loadJS(e)}function QD(){return Jc.recaptchaEnterpriseScript}function XD(){return Jc.gapiScript}function Ry(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var ZD="recaptcha-enterprise",JD="NO_RECAPTCHA",$h=class{constructor(t){this.type=ZD,this.auth=Pr(t)}verify(t="verify",n=!1){return f(this,null,function*(){function i(s){return f(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>f(this,null,function*(){LD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Lh(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(s,o,a){let c=window.grecaptcha;Yb(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(l=>{o(l)}).catch(()=>{o(JD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Yb(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=QD();c.length!==0&&(c+=a),Sy(c).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function Jb(e,t,n,i=!1){return f(this,null,function*(){let r=new $h(e),s;try{s=yield r.verify(n)}catch{s=yield r.verify(n,!0)}let o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function ty(e,t,n,i){return f(this,null,function*(){var r;if(!((r=e._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Jb(e,t,n,n==="getOobCode");return i(e,s)}else return i(e,t).catch(s=>f(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Jb(e,t,n,n==="getOobCode");return i(e,o)}else return Promise.reject(s)}))})}function of(e,t){let n=Ai(e,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(Ii(s,t??{}))return r;Xe(r,"already-initialized")}return n.initialize({options:t})}function tx(e,t){let n=t?.persistence||[],i=(Array.isArray(n)?n:[n]).map(_n);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t?.popupRedirectResolver)}function af(e,t,n){let i=Pr(e);P(i._canInitEmulator,i,"emulator-config-failed"),P(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=Dy(t),{host:o,port:a}=ex(t),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||nx()}function Dy(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ex(e){let t=Dy(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:ey(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:ey(o)}}}function ey(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function nx(){function e(){let t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}var wo=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return gn("not implemented")}_getIdTokenResponse(t){return gn("not implemented")}_linkToIdToken(t,n){return gn("not implemented")}_getReauthenticationResolver(t){return gn("not implemented")}};function ix(e,t){return f(this,null,function*(){return Qn(e,"POST","/v1/accounts:signUp",t)})}function rx(e,t){return f(this,null,function*(){return Xc(e,"POST","/v1/accounts:signInWithPassword",Pi(e,t))})}function sx(e,t){return f(this,null,function*(){return Xc(e,"POST","/v1/accounts:signInWithEmailLink",Pi(e,t))})}function ox(e,t){return f(this,null,function*(){return Xc(e,"POST","/v1/accounts:signInWithEmailLink",Pi(e,t))})}var Io=class e extends wo{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new e(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){return f(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ty(t,n,"signInWithPassword",rx);case"emailLink":return sx(t,{email:this._email,oobCode:this._password});default:Xe(t,"internal-error")}})}_linkToIdToken(t,n){return f(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ty(t,i,"signUpPassword",ix);case"emailLink":return ox(t,{idToken:n,email:this._email,oobCode:this._password});default:Xe(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function Nh(e,t){return f(this,null,function*(){return Xc(e,"POST","/v1/accounts:signInWithIdp",Pi(e,t))})}function ax(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cx(e){let t=Sr(Rr(e)).link,n=t?Sr(Rr(t)).deep_link_id:null,i=Sr(Rr(e)).deep_link_id;return(i?Sr(Rr(i)).link:null)||i||n||t||e}var Wc=class e{constructor(t){var n,i,r,s,o,a;let c=Sr(Rr(t)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,d=ax((r=c.mode)!==null&&r!==void 0?r:null);P(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){let n=cx(t);try{return new e(n)}catch{return null}}};var xy=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,i){return Io._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){let r=Wc.parseLink(i);return P(r,"argument-error"),Io._fromEmailAndCode(n,r.code,r.tenantId)}}e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return e})(),Hc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var qh=class extends Hc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var Eo=class e{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,i,r=!1){return f(this,null,function*(){let s=yield kr._fromIdTokenResponse(t,i,r),o=ny(i);return new e({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(t,n,i){return f(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);let r=ny(i);return new e({user:t,providerId:r,_tokenResponse:i,operationType:n})})}};function ny(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Wh=class e extends de{constructor(t,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new e(t,n,i,r)}};function ky(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(e,s,t,i):s})}function lx(e,t,n=!1){return f(this,null,function*(){let i=yield bo(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return Eo._forOperation(e,"link",i)})}function ux(e,t,n=!1){return f(this,null,function*(){let{auth:i}=e;if(Ke(i.app))return Promise.reject(Kn(i));let r="reauthenticate";try{let s=yield bo(e,ky(i,r,t,e),n);P(s.idToken,i,"internal-error");let o=nf(s.idToken);P(o,i,"internal-error");let{sub:a}=o;return P(e.uid===a,i,"user-mismatch"),Eo._forOperation(e,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Xe(i,"user-mismatch"),s}})}function Py(e,t,n=!1){return f(this,null,function*(){if(Ke(e.app))return Promise.reject(Kn(e));let i="signIn",r=yield ky(e,i,t),s=yield Eo._fromIdTokenResponse(e,i,r);return n||(yield e._updateCurrentUser(s.user)),s})}function cf(e,t){return f(this,null,function*(){return Py(Pr(e),t)})}function dx(e){return f(this,null,function*(){let t=Pr(e);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function lf(e,t,n){return Ke(e.app)?Promise.reject(Kn(e)):cf(jt(e),xy.credential(t,n)).catch(i=>f(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&dx(e),i}))}function uf(e,t,n,i){return jt(e).onIdTokenChanged(t,n,i)}function df(e,t,n){return jt(e).beforeAuthStateChanged(t,n)}var Gc="__sak";var Kc=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){let n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function hx(){let e=St();return sf(e)||Zc(e)}var fx=1e3,mx=10,px=(()=>{class e extends Kc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=hx()&&HD(),this.fallbackToPolling=Cy(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);WD()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,mx):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},fx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return f(this,null,function*(){yield xn(e.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return f(this,null,function*(){let i=yield xn(e.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return f(this,null,function*(){yield xn(e.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return e.type="LOCAL",e})(),Ny=px;var gx=(()=>{class e extends Kc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return e.type="SESSION",e})(),hf=gx;function _x(e){return Promise.all(e.map(t=>f(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(n){return{fulfilled:!1,reason:n}}})))}var vx=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new e(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>f(this,null,function*(){return u(i.origin,o)})),l=yield _x(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e.receivers=[];return e})();function Oy(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}var Hh=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n,i=50){return f(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Oy("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Qe(){return window}function bx(e){Qe().location.href=e}function My(){return typeof Qe().WorkerGlobalScope<"u"&&typeof Qe().importScripts=="function"}function yx(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function wx(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Ix(){return My()?self:null}var Fy="firebaseLocalStorageDb",Ex=1,Yc="firebaseLocalStorage",Ly="fbase_key",ki=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function tl(e,t){return e.transaction([Yc],t?"readwrite":"readonly").objectStore(Yc)}function Tx(){let e=indexedDB.deleteDatabase(Fy);return new ki(e).toPromise()}function Gh(){let e=indexedDB.open(Fy,Ex);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let i=e.result;try{i.createObjectStore(Yc,{keyPath:Ly})}catch(r){n(r)}}),e.addEventListener("success",()=>f(this,null,function*(){let i=e.result;i.objectStoreNames.contains(Yc)?t(i):(i.close(),yield Tx(),t(yield Gh()))}))})}function iy(e,t,n){return f(this,null,function*(){let i=tl(e,!0).put({[Ly]:t,value:n});return new ki(i).toPromise()})}function Cx(e,t){return f(this,null,function*(){let n=tl(e,!1).get(t),i=yield new ki(n).toPromise();return i===void 0?null:i.value})}function ry(e,t){let n=tl(e,!0).delete(t);return new ki(n).toPromise()}var Ax=800,Sx=3,Rx=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield Gh(),this.db)})}_withRetries(n){return f(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>Sx)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return My()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=vx._getInstance(Ix()),this.receiver._subscribe("keyChanged",(n,i)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){var n,i;if(this.activeServiceWorker=yield yx(),!this.activeServiceWorker)return;this.sender=new Hh(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||wx()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Gh();return yield iy(n,Gc,"1"),yield ry(n,Gc),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>iy(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let i=yield this._withRetries(r=>Cx(r,n));return this.localCache[n]=i,i})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>ry(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(s=>{let o=tl(s,!1).getAll();return new ki(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),Ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return e.type="LOCAL",e})(),Vy=Rx;var fj=Ry("rcb"),mj=new xi(3e4,6e4);function Dx(e,t){return t?_n(t):(P(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var To=class extends wo{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Nh(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Nh(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Nh(t,this._buildIdpRequest())}_buildIdpRequest(t){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function xx(e){return Py(e.auth,new To(e),e.bypassAuthState)}function kx(e){let{auth:t,user:n}=e;return P(n,t,"internal-error"),ux(n,new To(e),e.bypassAuthState)}function Px(e){return f(this,null,function*(){let{auth:t,user:n}=e;return P(n,t,"internal-error"),lx(n,new To(e),e.bypassAuthState)})}var Kh=class{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((t,n)=>f(this,null,function*(){this.pendingPromise={resolve:t,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return f(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return xx;case"linkViaPopup":case"linkViaRedirect":return Px;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:Xe(this.auth,"internal-error")}}resolve(t){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var pj=new xi(2e3,1e4);var Nx="pendingRedirect",Vc=new Map,Yh=class e extends Kh{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return f(this,null,function*(){let t=Vc.get(this.auth._key());if(!t){try{let i=(yield Ox(this.resolver,this.auth))?yield xn(e.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Vc.set(this.auth._key(),t)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return f(this,null,function*(){if(t.type==="signInViaRedirect")return xn(e.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let n=yield this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,xn(e.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function Ox(e,t){return f(this,null,function*(){let n=Lx(t),i=Fx(e);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function Mx(e,t){Vc.set(e._key(),t)}function Fx(e){return _n(e._redirectPersistence)}function Lx(e){return Lc(Nx,e.config.apiKey,e.name)}function Vx(e,t,n=!1){return f(this,null,function*(){if(Ke(e.app))return Promise.reject(Kn(e));let i=Pr(e),r=Dx(i,t),o=yield new Yh(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})}var Ux=10*60*1e3,Qh=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!jx(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!Uy(t)){let r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Di(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){let i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ux&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(t))}saveEventToCache(t){this.cachedEventUids.add(sy(t)),this.lastProcessedEventTime=Date.now()}};function sy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Uy({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function jx(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uy(e);default:return!1}}function Bx(n){return f(this,arguments,function*(e,t={}){return Qn(e,"GET","/v1/projects",t)})}var zx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$x=/^https?/;function qx(e){return f(this,null,function*(){if(e.config.emulator)return;let{authorizedDomains:t}=yield Bx(e);for(let n of t)try{if(Wx(n))return}catch{}Xe(e,"unauthorized-domain")})}function Wx(e){let t=Mh(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){let o=new URL(e);return o.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!$x.test(n))return!1;if(zx.test(e))return i===e;let r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var Hx=new xi(3e4,6e4);function oy(){let e=Qe().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Gx(e){return new Promise((t,n)=>{var i,r,s;function o(){oy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oy(),n(Di(e,"network-request-failed"))},timeout:Hx.get()})}if(!((r=(i=Qe().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Qe().gapi)===null||s===void 0)&&s.load)o();else{let a=Ry("iframefcb");return Qe()[a]=()=>{gapi.load?o():n(Di(e,"network-request-failed"))},Sy(`${XD()}?onload=${a}`).catch(c=>n(c))}}).catch(t=>{throw Uc=null,t})}var Uc=null;function Kx(e){return Uc=Uc||Gx(e),Uc}var Yx=new xi(5e3,15e3),Qx="__/auth/iframe",Xx="emulator/auth/iframe",Zx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tk(e){let t=e.config;P(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?tf(t,Xx):`https://${e.config.authDomain}/${Qx}`,i={apiKey:t.apiKey,appName:e.name,v:Ye},r=Jx.get(e.config.apiHost);r&&(i.eid=r);let s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ei(i).slice(1)}`}function ek(e){return f(this,null,function*(){let t=yield Kx(e),n=Qe().gapi;return P(n,e,"internal-error"),t.open({where:document.body,url:tk(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zx,dontclear:!0},i=>new Promise((r,s)=>f(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Di(e,"network-request-failed"),a=Qe().setTimeout(()=>{s(o)},Yx.get());function c(){Qe().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var nk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ik=500,rk=600,sk="_blank",ok="http://localhost",Qc=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ak(e,t,n,i=ik,r=rk){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},nk),{width:i.toString(),height:r.toString(),top:s,left:o}),l=St().toLowerCase();n&&(a=yy(l)?sk:n),by(l)&&(t=t||ok,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(qD(l)&&a!=="_self")return ck(t||"",a),new Qc(null);let d=window.open(t||"",a,u);P(d,e,"popup-blocked");try{d.focus()}catch{}return new Qc(d)}function ck(e,t){let n=document.createElement("a");n.href=e,n.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var lk="__/auth/handler",uk="emulator/auth/handler",dk=encodeURIComponent("fac");function ay(e,t,n,i,r,s){return f(this,null,function*(){P(e.config.authDomain,e,"auth-domain-config-required"),P(e.config.apiKey,e,"invalid-api-key");let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Ye,eventId:r};if(t instanceof Hc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",uo(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(t instanceof qh){let u=t.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield e._getAppCheckToken(),l=c?`#${dk}=${encodeURIComponent(c)}`:"";return`${hk(e)}?${Ei(a).slice(1)}${l}`})}function hk({config:e}){return e.emulator?tf(e,uk):`https://${e.authDomain}/${lk}`}var Oh="webStorageSupport",Xh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hf,this._completeRedirectFn=Vx,this._overrideRedirectResult=Mx}_openPopup(t,n,i,r){return f(this,null,function*(){var s;Yn((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ay(t,n,i,Mh(),r);return ak(t,o,Oy())})}_openRedirect(t,n,i,r){return f(this,null,function*(){yield this._originValidation(t);let s=yield ay(t,n,i,Mh(),r);return bx(s),new Promise(()=>{})})}_initialize(t){let n=t._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Yn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(t){return f(this,null,function*(){let n=yield ek(t),i=new Qh(t);return n.register("authEvent",r=>(P(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i})}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Oh,{type:Oh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Oh];o!==void 0&&n(!!o),Xe(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qx(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Cy()||sf()||Zc()}},jy=Xh;var cy="@firebase/auth",ly="1.7.2";var Zh=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fk(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mk(e){Ge(new ie("auth",(t,{options:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;P(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ay(e)},l=new zh(i,r,s,c);return tx(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Ge(new ie("auth-internal",t=>{let n=Pr(t.getProvider("auth").getImmediate());return(i=>new Zh(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ft(cy,ly,fk(e)),ft(cy,ly,"esm2017")}var pk=5*60,gk=mh("authIdTokenMaxAge")||pk,uy=null,_k=e=>t=>f(void 0,null,function*(){let n=t&&(yield t.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>gk)return;let r=n?.token;uy!==r&&(uy=r,yield fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function ff(e=qn()){let t=Ai(e,"auth");if(t.isInitialized())return t.getImmediate();let n=of(e,{popupRedirectResolver:jy,persistence:[Vy,Ny,hf]}),i=mh("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=_k(s.toString());df(n,o,()=>o(n.currentUser)),uf(n,a=>o(a))}}let r=hh("auth");return r&&af(n,`http://${r}`),n}function vk(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}YD({loadJS(e){return new Promise((t,n)=>{let i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{let s=Di("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",vk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mk("Browser");var By="auth",vn=class{constructor(t){return t}},Ni=class{constructor(){return Ri(By)}};var mf=new R("angularfire2.auth-instances");function uP(e,t){let n=xr(By,e,t);return n&&new vn(n)}function dP(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new vn(i)}}var hP={provide:Ni,deps:[[new It,mf]]},fP={provide:vn,useFactory:uP,deps:[[new It,mf],ke]},mP=(()=>{class e{constructor(){ft("angularfire",mn.full,"auth")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=L({type:e});static \u0275inj=F({providers:[fP,hP]})}return e})();function zy(e,...t){return{ngModule:mP,providers:[{provide:mf,useFactory:dP(e),multi:!0,deps:[D,J,Hn,pn,[new It,Wn],...t]}]}}var $y=xe(ff,!0);var qy=xe(lf,!0);var tw=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(T(Qa),T(it))},t.\u0275dir=nt({type:t});let e=t;return e})(),pP=(()=>{let t=class t extends tw{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=On(t)))(s||t)}})(),t.\u0275dir=nt({type:t,features:[Ut]});let e=t;return e})(),ew=new R("");var gP={provide:ew,useExisting:qa(()=>rl),multi:!0};function _P(){let e=gr()?gr().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var vP=new R(""),rl=(()=>{let t=class t extends tw{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!_P())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(T(Qa),T(it),T(vP,8))},t.\u0275dir=nt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&ce("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Vn([gP]),Ut]});let e=t;return e})();function bP(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var nw=new R(""),yP=new R("");function wP(e){return bP(e.value)?{required:!0}:null}function Hy(e){return null}function iw(e){return e!=null}function rw(e){return tc(e)?Jt(e):e}function sw(e){let t={};return e.forEach(n=>{t=n!=null?_(_({},t),n):t}),Object.keys(t).length===0?null:t}function ow(e,t){return t.map(n=>n(e))}function IP(e){return!e.validate}function aw(e){return e.map(t=>IP(t)?t:n=>t.validate(n))}function EP(e){if(!e)return null;let t=e.filter(iw);return t.length==0?null:function(n){return sw(ow(n,t))}}function cw(e){return e!=null?EP(aw(e)):null}function TP(e){if(!e)return null;let t=e.filter(iw);return t.length==0?null:function(n){let i=ow(n,t).map(rw);return F_(i).pipe(Y(sw))}}function lw(e){return e!=null?TP(aw(e)):null}function Gy(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function CP(e){return e._rawValidators}function AP(e){return e._rawAsyncValidators}function pf(e){return e?Array.isArray(e)?e:[e]:[]}function nl(e,t){return Array.isArray(e)?e.includes(t):e===t}function Ky(e,t){let n=pf(t);return pf(e).forEach(r=>{nl(n,r)||n.push(r)}),n}function Yy(e,t){return pf(t).filter(n=>!nl(e,n))}var il=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=cw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=lw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},gf=class extends il{get formDirective(){return null}get path(){return null}},So=class extends il{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_f=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},SP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mB=Z(_({},SP),{"[class.ng-submitted]":"isSubmitted"}),uw=(()=>{let t=class t extends _f{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(T(So,2))},t.\u0275dir=nt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&je("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ut]});let e=t;return e})();var Co="VALID",el="INVALID",Nr="PENDING",Ao="DISABLED";function RP(e){return(sl(e)?e.validators:e)||null}function DP(e){return Array.isArray(e)?cw(e):e||null}function xP(e,t){return(sl(t)?t.asyncValidators:e)||null}function kP(e){return Array.isArray(e)?lw(e):e||null}function sl(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var vf=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Co}get invalid(){return this.status===el}get pending(){return this.status==Nr}get disabled(){return this.status===Ao}get enabled(){return this.status!==Ao}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ky(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ky(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Yy(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Yy(t,this._rawAsyncValidators))}hasValidator(t){return nl(this._rawValidators,t)}hasAsyncValidator(t){return nl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Nr,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ao,this.errors=null,this._forEachChild(i=>{i.disable(Z(_({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(_({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Co,this._forEachChild(i=>{i.enable(Z(_({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Z(_({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Co||this.status===Nr)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ao:Co}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Nr,this._hasOwnPendingAsyncValidator=!0;let n=rw(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?Ao:this.errors?el:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nr)?Nr:this._anyControlsHaveStatus(el)?el:Co}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){sl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=DP(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=kP(this._rawAsyncValidators)}};var dw=new R("CallSetDisabledState",{providedIn:"root",factory:()=>bf}),bf="always";function PP(e,t){return[...t.path,e]}function NP(e,t,n=bf){MP(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),FP(e,t),VP(e,t),LP(e,t),OP(e,t)}function Qy(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function OP(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function MP(e,t){let n=CP(e);t.validator!==null?e.setValidators(Gy(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=AP(e);t.asyncValidator!==null?e.setAsyncValidators(Gy(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();Qy(t._rawValidators,r),Qy(t._rawAsyncValidators,r)}function FP(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&hw(e,t)})}function LP(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&hw(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function hw(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function VP(e,t){let n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function UP(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function jP(e){return Object.getPrototypeOf(e.constructor)===pP}function BP(e,t){if(!t)return null;Array.isArray(t);let n,i,r;return t.forEach(s=>{s.constructor===rl?n=s:jP(s)?i=s:r=s}),r||i||n||null}function Xy(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Zy(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var zP=class extends vf{constructor(t=null,n,i){super(RP(n),xP(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Zy(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Xy(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Xy(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Zy(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var $P={provide:So,useExisting:qa(()=>yf)},Jy=Promise.resolve(),yf=(()=>{let t=class t extends So{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new zP,this._registered=!1,this.name="",this.update=new Dt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=BP(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),UP(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){NP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Jy.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&ye(r);Jy.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?PP(i,this._parent):[i]}};t.\u0275fac=function(r){return new(r||t)(T(gf,9),T(nw,10),T(yP,10),T(ew,10),T(De,8),T(dw,8))},t.\u0275dir=nt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[at.None,"disabled","isDisabled"],model:[at.None,"ngModel","model"],options:[at.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vn([$P]),Ut,ln]});let e=t;return e})();var qP=(()=>{let t=class t{constructor(){this._validator=Hy}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Hy,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=nt({type:t,features:[ln]});let e=t;return e})();var WP={provide:nw,useExisting:qa(()=>wf),multi:!0};var wf=(()=>{let t=class t extends qP{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ye,this.createValidator=i=>wP}enabled(i){return i}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=On(t)))(s||t)}})(),t.\u0275dir=nt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&ae("required",s._enabled?"":null)},inputs:{required:"required"},features:[Vn([WP]),Ut]});let e=t;return e})();var HP=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({});let e=t;return e})();var fw=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:dw,useValue:i.callSetDisabledState??bf}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({imports:[HP]});let e=t;return e})();var Ef;try{Ef=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ef=!1}var ct=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?mv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ef)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(p(un))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ro;function KP(){if(Ro==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ro=!0}))}finally{Ro=Ro||!1}return Ro}function Or(e){return KP()?e:!!e.capture}var Oi;function mw(){if(Oi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Oi=!1,Oi;if("scrollBehavior"in document.documentElement.style)Oi=!0;else{let e=Element.prototype.scrollTo;e?Oi=!/\{\s*\[native code\]\s*\}/.test(e.toString()):Oi=!1}}return Oi}var If;function YP(){if(If==null){let e=typeof document<"u"?document.head:null;If=!!(e&&(e.createShadowRoot||e.attachShadow))}return If}function pw(e){if(YP()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Do(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function Pe(e){return e.composedPath?e.composedPath()[0]:e.target}function xo(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ol(e,...t){return t.length?t.some(n=>e[n]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function ko(e,t=0){return QP(e)?Number(e):t}function QP(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function Mr(e){return Array.isArray(e)?e:[e]}function yt(e){return e==null?"":typeof e=="string"?e:`${e}px`}function bn(e){return e instanceof it?e.nativeElement:e}var XP=(()=>{let t=class t{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var gw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({providers:[XP]});let e=t;return e})();var _w=new Set,Fi,ZP=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):tN}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&JP(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(p(ct),p(Ps,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function JP(e,t){if(!_w.has(e))try{Fi||(Fi=document.createElement("style"),t&&Fi.setAttribute("nonce",t),Fi.setAttribute("type","text/css"),document.head.appendChild(Fi)),Fi.sheet&&(Fi.sheet.insertRule(`@media ${e} {body{ }}`,0),_w.add(e))}catch(n){console.error(n)}}function tN(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var al=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new V}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return vw(Mr(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=vw(Mr(i)).map(a=>this._registerQuery(a).observable),o=cr(s);return o=ja(o.pipe(qt(1)),o.pipe($a(1),Ku(0))),o.pipe(Y(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new an(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(cn(r),Y(({matches:a})=>({query:i,matches:a})),Re(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};t.\u0275fac=function(r){return new(r||t)(p(ZP),p(D))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function vw(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}var bw={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Po=(()=>{let t=class t{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return iN(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=nN(dN(i));if(r&&(yw(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=yw(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!lN(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return uN(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};t.\u0275fac=function(r){return new(r||t)(p(ct))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function nN(e){try{return e.frameElement}catch{return null}}function iN(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function rN(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function sN(e){return aN(e)&&e.type=="hidden"}function oN(e){return cN(e)&&e.hasAttribute("href")}function aN(e){return e.nodeName.toLowerCase()=="input"}function cN(e){return e.nodeName.toLowerCase()=="a"}function Ew(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function yw(e){if(!Ew(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function lN(e){let t=e.nodeName.toLowerCase(),n=t==="input"&&e.type;return n==="text"||n==="password"||t==="select"||t==="textarea"}function uN(e){return sN(e)?!1:rN(e)||oN(e)||e.hasAttribute("contenteditable")||Ew(e)}function dN(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var Cf=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,n,i,r,s=!1){this._element=t,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,n=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let n=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(t),!!i}return n.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let n=this._getRegionBoundary("start");return n&&n.focus(t),!!n}focusLastTabbableElement(t){let n=this._getRegionBoundary("end");return n&&n.focus(t),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,n){t?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(qt(1)).subscribe(t)}},ul=(()=>{let t=class t{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new Cf(i,this._checker,this._ngZone,this._document,r)}};t.\u0275fac=function(r){return new(r||t)(p(Po),p(D),p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Af(e){return e.buttons===0||e.detail===0}function Sf(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var hN=new R("cdk-input-modality-detector-options"),fN={ignoreKeys:[18,17,224,91,16]},Tw=650,Fr=Or({passive:!0,capture:!0}),mN=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new ne(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Pe(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<Tw||(this._modality.next(Af(a)?"keyboard":"mouse"),this._mostRecentTarget=Pe(a))},this._onTouchstart=a=>{if(Sf(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Pe(a)},this._options=_(_({},fN),o),this.modalityDetected=this._modality.pipe($a(1)),this.modalityChanged=this.modalityDetected.pipe(Qu()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Fr),s.addEventListener("mousedown",this._onMousedown,Fr),s.addEventListener("touchstart",this._onTouchstart,Fr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fr),document.removeEventListener("mousedown",this._onMousedown,Fr),document.removeEventListener("touchstart",this._onTouchstart,Fr))}};t.\u0275fac=function(r){return new(r||t)(p(ct),p(D),p(O),p(hN,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),pN=new R("liveAnnouncerElement",{providedIn:"root",factory:gN});function gN(){return null}var _N=new R("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),vN=0,Cw=(()=>{let t=class t{constructor(i,r,s,o){this._ngZone=r,this._defaultOptions=o,this._document=s,this._liveElement=i||this._createLiveElement()}announce(i,...r){let s=this._defaultOptions,o,a;return r.length===1&&typeof r[0]=="number"?a=r[0]:[o,a]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=s&&s.politeness?s.politeness:"polite"),a==null&&s&&(a=s.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),s=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return s.classList.add(i),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),s.id=`cdk-live-announcer-${vN++}`,this._document.body.appendChild(s),s}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let o=r[s],a=o.getAttribute("aria-owns");a?a.indexOf(i)===-1&&o.setAttribute("aria-owns",a+" "+i):o.setAttribute("aria-owns",i)}}};t.\u0275fac=function(r){return new(r||t)(p(pN,8),p(D),p(O),p(_N,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ll=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(ll||{}),bN=new R("cdk-focus-monitor-default-options"),cl=Or({passive:!0,capture:!0}),Lr=(()=>{let t=class t{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new V,this._rootNodeFocusAndBlurListener=c=>{let l=Pe(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=o,this._detectionMode=a?.detectionMode||ll.IMMEDIATE}monitor(i,r=!1){let s=bn(i);if(!this._platform.isBrowser||s.nodeType!==1)return x();let o=pw(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new V,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=bn(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=bn(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===ll.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===ll.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?Tw:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Pe(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,cl),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,cl)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Re(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,cl),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,cl),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(p(D),p(ct),p(mN),p(O,8),p(bN,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Li=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(Li||{}),ww="cdk-high-contrast-black-on-white",Iw="cdk-high-contrast-white-on-black",Tf="cdk-high-contrast-active",Rf=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=I(al).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Li.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Li.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Li.BLACK_ON_WHITE}return Li.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Tf,ww,Iw),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Li.BLACK_ON_WHITE?i.add(Tf,ww):r===Li.WHITE_ON_BLACK&&i.add(Tf,Iw)}}};t.\u0275fac=function(r){return new(r||t)(p(ct),p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Aw=(()=>{let t=class t{constructor(i){i._applyBodyHighContrastModeCssClasses()}};t.\u0275fac=function(r){return new(r||t)(p(Rf))},t.\u0275mod=L({type:t}),t.\u0275inj=F({imports:[gw]});let e=t;return e})();var yN=new R("cdk-dir-doc",{providedIn:"root",factory:wN});function wN(){return I(O)}var IN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function EN(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?IN.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var No=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new Dt,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=EN(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(p(yN,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xn=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({});let e=t;return e})();function CN(){return!0}var AN=new R("mat-sanity-checks",{providedIn:"root",factory:CN}),Ne=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return xo()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(p(Rf),p(AN,8),p(O))},t.\u0275mod=L({type:t}),t.\u0275inj=F({imports:[Xn,Xn]});let e=t;return e})();var Ee=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(Ee||{}),kf=class{constructor(t,n,i,r=!1){this._renderer=t,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ee.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Sw=Or({passive:!0,capture:!0}),Pf=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=Pe(t);n&&this._events.get(t.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,Sw)})}removeHandler(t,n,i){let r=this._events.get(t);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Sw)))}},Rw={enterDuration:225,exitDuration:150},SN=800,Dw=Or({passive:!0,capture:!0}),xw=["mousedown","touchstart"],kw=["mouseup","mouseleave","touchend","touchcancel"],Oo=class Oo{constructor(t,n,i,r){this._target=t,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=bn(i))}fadeInRipple(t,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=_(_({},Rw),i.animation);i.centered&&(t=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||RN(t,n,r),a=t-r.left,c=n-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${c-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,m=d.transitionDuration,g=h==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,E=new kf(this,u,i,g);u.style.transform="scale3d(1, 1, 1)",E.state=Ee.FADING_IN,i.persistent||(this._mostRecentTransientRipple=E);let S=null;return!g&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let K=()=>this._finishRippleTransition(E),ot=()=>this._destroyRipple(E);u.addEventListener("transitionend",K),u.addEventListener("transitioncancel",ot),S={onTransitionEnd:K,onTransitionCancel:ot}}),this._activeRipples.set(E,S),(g||!l)&&this._finishRippleTransition(E),E}fadeOutRipple(t){if(t.state===Ee.FADING_OUT||t.state===Ee.HIDDEN)return;let n=t.element,i=_(_({},Rw),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=Ee.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=bn(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,xw.forEach(i=>{Oo._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{kw.forEach(n=>{this._triggerElement.addEventListener(n,this,Dw)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Ee.FADING_IN?this._startFadeOutTransition(t):t.state===Ee.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Ee.VISIBLE,!i&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Ee.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=Af(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+SN;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Sf(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===Ee.VISIBLE||t.config.terminateOnPointerUp&&t.state===Ee.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(xw.forEach(n=>Oo._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&kw.forEach(n=>t.removeEventListener(n,this,Dw)))}};Oo._eventManager=new Pf;var Nf=Oo;function RN(e,t,n){let i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}var Mw=new R("mat-ripple-global-options"),DN=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Nf(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:_(_(_({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,_(_({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,_(_({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(T(it),T(D),T(ct),T(Mw,8),T(be,8))},t.\u0275dir=nt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&je("mat-ripple-unbounded",s.unbounded)},inputs:{color:[at.None,"matRippleColor","color"],unbounded:[at.None,"matRippleUnbounded","unbounded"],centered:[at.None,"matRippleCentered","centered"],radius:[at.None,"matRippleRadius","radius"],animation:[at.None,"matRippleAnimation","animation"],disabled:[at.None,"matRippleDisabled","disabled"],trigger:[at.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let e=t;return e})(),Fw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({imports:[Ne,Ne]});let e=t;return e})();var Pw={capture:!0},Nw=["focus","click","mouseenter","touchstart"],Df="mat-ripple-loader-uninitialized",xf="mat-ripple-loader-class-name",Ow="mat-ripple-loader-centered",hl="mat-ripple-loader-disabled",Lw=(()=>{let t=class t{constructor(){this._document=I(O,{optional:!0}),this._animationMode=I(be,{optional:!0}),this._globalRippleOptions=I(Mw,{optional:!0}),this._platform=I(ct),this._ngZone=I(D),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${Df}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of Nw)this._document?.addEventListener(i,this._onInteraction,Pw)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of Nw)this._document?.removeEventListener(r,this._onInteraction,Pw)}configureRipple(i,r){i.setAttribute(Df,""),(r.className||!i.hasAttribute(xf))&&i.setAttribute(xf,r.className||""),r.centered&&i.setAttribute(Ow,""),r.disabled&&i.setAttribute(hl,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(hl,""):i.removeAttribute(hl)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(xf)),i.append(s);let o=new DN(new it(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(Ow),o.disabled=i.hasAttribute(hl),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(Df),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var xN=["mat-button",""],kN=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],PN=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var NN=new R("MAT_BUTTON_CONFIG");var ON=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],MN=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=I(Lr),this._rippleLoader=I(Lw),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=I(NN,{optional:!0}),c=i.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:u,mdcClasses:d}of ON)c.hasAttribute(u)&&l.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){dr()},t.\u0275dir=nt({type:t,inputs:{color:"color",disableRipple:[at.HasDecoratorInputTransform,"disableRipple","disableRipple",ye],disabled:[at.HasDecoratorInputTransform,"disabled","disabled",ye],ariaDisabled:[at.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",ye],disabledInteractive:[at.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",ye]},features:[Mn]});let e=t;return e})();var Vw=(()=>{let t=class t extends MN{constructor(i,r,s,o){super(i,r,s,o)}};t.\u0275fac=function(r){return new(r||t)(T(it),T(ct),T(D),T(be,8))},t.\u0275cmp=vt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(ae("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),J_(s.color?"mat-"+s.color:""),je("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ut,bt],attrs:xN,ngContentSelectors:PN,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(Za(kN),ht(0,"span",0),fr(1),q(2,"span",1),fr(3,1),B(),fr(4,2),ht(5,"span",2)(6,"span",3)),r&2&&je("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let e=t;return e})();var Uw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({imports:[Ne,Fw,Ne]});let e=t;return e})();var Mo=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},yn=class extends Mo{constructor(t,n,i,r,s){super(),this.component=t,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},Zn=class extends Mo{constructor(t,n,i,r){super(),this.templateRef=t,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Of=class extends Mo{constructor(t){super(),this.element=t instanceof it?t.nativeElement:t}},Jn=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof yn)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Zn)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Of)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var fl=class extends Jn{constructor(t,n,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||J.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var ti=(()=>{let t=class t extends Jn{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Dt,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};t.\u0275fac=function(r){return new(r||t)(T(Ka),T(hr),T(O))},t.\u0275dir=nt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[at.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ut]});let e=t;return e})();var wn=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({});let e=t;return e})();var FN=20,Bw=(()=>{let t=class t{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new V,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=FN){return this._platform.isBrowser?new an(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(Gu(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):x()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Vt(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=bn(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return L_(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(p(D),p(ct),p(O,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var LN=20,Mf=(()=>{let t=class t{constructor(i,r,s){this._platform=i,this._change=new V,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,c=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:c}}change(i=LN){return i>0?this._change.pipe(Gu(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(p(ct),p(D),p(O,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({});let e=t;return e})(),Ff=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({imports:[Xn,jw,Xn,jw]});let e=t;return e})();var zw=mw(),Lf=class{constructor(t,n){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=yt(-this._previousScrollPosition.left),t.style.top=yt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,i=t.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),zw&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zw&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var Vf=class{constructor(t,n,i,r){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Vt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ml=class{enable(){}disable(){}attach(){}};function Uf(e,t){return t.some(n=>{let i=e.bottom<n.top,r=e.top>n.bottom,s=e.right<n.left,o=e.left>n.right;return i||r||s||o})}function $w(e,t){return t.some(n=>{let i=e.top<n.top,r=e.bottom>n.bottom,s=e.left<n.left,o=e.right>n.right;return i||r||s||o})}var jf=class{constructor(t,n,i,r){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Uf(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},UN=(()=>{let t=class t{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new ml,this.close=a=>new Vf(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new Lf(this._viewportRuler,this._document),this.reposition=a=>new jf(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};t.\u0275fac=function(r){return new(r||t)(p(Bw),p(Mf),p(D),p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ui=class{constructor(t){if(this.scrollStrategy=new ml,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let n=Object.keys(t);for(let i of n)t[i]!==void 0&&(this[i]=t[i])}}};var Bf=class{constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var Yw=(()=>{let t=class t{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(p(O))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),jN=(()=>{let t=class t extends Yw{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let c=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(s)):c.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(p(O),p(D,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),BN=(()=>{let t=class t extends Yw{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Pe(o)},this._clickListener=o=>{let a=Pe(o),c=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(p(O),p(ct),p(D,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vr=(()=>{let t=class t{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||xo()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),xo()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(p(O),p(ct))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),In=class{constructor(t,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=t,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new V,this._attachments=new V,this._detachments=new V,this._locationChanges=hi.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new V,this._outsidePointerEvents=new V,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(qt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=_(_({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Z(_({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=yt(this._config.width),t.height=yt(this._config.height),t.minWidth=yt(this._config.minWidth),t.minHeight=yt(this._config.minHeight),t.maxWidth=yt(this._config.maxWidth),t.maxHeight=yt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,n,i){let r=Mr(n||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Re(Ba(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},qw="cdk-overlay-connected-position-bounding-box",zN=/([A-Za-z%]+)$/,zf=class{get positions(){return this._preferredPositions}constructor(t,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new V,this._resizeSubscription=hi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(qw),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(let l of s){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Vi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(qw),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(t,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,n,i,r){let s=Hw(n),{x:o,y:a}=t,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let u=0-o,d=o+s.width-i.width,h=0-a,m=a+s.height-i.height,g=this._subtractOverflows(s.width,u,d),E=this._subtractOverflows(s.height,h,m),S=g*E;return{visibleArea:S,isCompletelyWithinViewport:s.width*s.height===S,fitsInViewportVertically:E===s.height,fitsInViewportHorizontally:g==s.width}}_canFitWithFlexibleDimensions(t,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=Ww(this._overlayRef.getConfig().minHeight),a=Ww(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||o!=null&&o<=r,l=t.fitsInViewportHorizontally||a!=null&&a<=s;return c&&l}return!1}_pushOverlayOnScreen(t,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=Hw(n),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),c=Math.max(s.top-i.top-t.y,0),l=Math.max(s.left-i.left-t.x,0),u=0,d=0;return r.width<=s.width?u=l||-o:u=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?d=c||-a:d=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!$N(this._lastScrollVisibility,i)){let r=new Bf(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let m=Math.min(i.bottom-t.y+i.top,t.y),g=this._lastBoundingBoxSize.height;s=m*2,o=t.y-m,s>g&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-g/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(l)h=i.width-t.x+this._viewportMargin*2,u=t.x-this._viewportMargin;else if(c)d=t.x,u=i.right-t.x;else{let m=Math.min(i.right-t.x+i.left,t.x),g=this._lastBoundingBoxSize.width;u=m*2,d=t.x-m,u>g&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-g/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(t,n){let i=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=yt(i.height),r.top=yt(i.top),r.bottom=yt(i.bottom),r.width=yt(i.width),r.left=yt(i.left),r.right=yt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=yt(s)),o&&(r.maxWidth=yt(o))}this._lastBoundingBoxSize=i,Vi(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Vi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Vi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Vi(i,this._getExactOverlayY(n,t,u)),Vi(i,this._getExactOverlayX(n,t,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=yt(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=yt(o.maxWidth):s&&(i.maxWidth="")),Vi(this._pane.style,i)}_getExactOverlayY(t,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=yt(s.y);return r}_getExactOverlayX(t,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=yt(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$w(t,i),isOriginOutsideView:Uf(t,i),isOverlayClipped:$w(n,i),isOverlayOutsideView:Uf(n,i)}}_subtractOverflows(t,...n){return n.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Mr(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof it)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+n,height:i,width:n}}};function Vi(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ww(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(zN);return!n||n==="px"?parseFloat(t):null}return e||null}function Hw(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function $N(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var Gw="cdk-global-overlay-wrapper",$f=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Gw),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),l=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",m="",g="",E="";c?E="flex-start":u==="center"?(E="center",h?g=d:m=d):h?u==="left"||u==="end"?(E="flex-end",m=d):(u==="right"||u==="start")&&(E="flex-start",g=d):u==="left"||u==="start"?(E="flex-start",m=d):(u==="right"||u==="end")&&(E="flex-end",g=d),t.position=this._cssPosition,t.marginLeft=c?"0":m,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":g,n.justifyContent=E,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(Gw),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},qN=(()=>{let t=class t{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new $f}flexibleConnectedTo(i){return new zf(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(p(Mf),p(O),p(ct),p(Vr))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),WN=0,he=(()=>{let t=class t{constructor(i,r,s,o,a,c,l,u,d,h,m,g){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=m,this._animationsModuleType=g}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new Ui(i);return a.direction=a.direction||this._directionality.value,new In(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${WN++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Os)),new fl(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(p(UN),p(Vr),p(Ka),p(qN),p(jN),p(J),p(D),p(O),p(No),p(dn),p(BN),p(be,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var HN=new R("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=I(he);return()=>e.scrollStrategies.reposition()}});function GN(e){return()=>e.scrollStrategies.reposition()}var KN={provide:HN,deps:[he],useFactory:GN},Ur=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({providers:[he,KN],imports:[Xn,wn,Ff,Ff]});let e=t;return e})();function YN(e,t){if(e&1){let n=tv();q(0,"div",1)(1,"button",2),ce("click",function(){q_(n);let r=Xa();return W_(r.action())}),pt(2),B()()}if(e&2){let n=Xa();oe(2),mr(" ",n.data.action," ")}}var QN=["label"];function XN(e,t){}var ZN=Math.pow(2,31)-1,Fo=class{constructor(t,n){this._overlayRef=n,this._afterDismissed=new V,this._afterOpened=new V,this._onAction=new V,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,ZN))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Qw=new R("MatSnackBarData"),jr=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},JN=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=nt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let e=t;return e})(),tO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=nt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let e=t;return e})(),eO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=nt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let e=t;return e})(),Xw=(()=>{let t=class t{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};t.\u0275fac=function(r){return new(r||t)(T(Fo),T(Qw))},t.\u0275cmp=vt({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[bt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,s){r&1&&(q(0,"div",0),pt(1),B(),Ue(2,YN,3,1,"div",1)),r&2&&(oe(),mr(" ",s.data.message,`
`),oe(),nd(2,s.hasAction?2:-1))},dependencies:[Vw,JN,tO,eO],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let e=t;return e})(),nO={snackBarState:_v("state",[hd("void, hidden",nc({transform:"scale(0.8)",opacity:0})),hd("visible",nc({transform:"scale(1)",opacity:1})),fd("* => visible",dd("150ms cubic-bezier(0, 0, 0.2, 1)")),fd("* => void, * => hidden",dd("75ms cubic-bezier(0.4, 0.0, 1, 1)",nc({opacity:0})))])},iO=0,rO=(()=>{let t=class t extends Jn{constructor(i,r,s,o,a){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=s,this._platform=o,this.snackBarConfig=a,this._document=I(O),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new V,this._onExit=new V,this._onEnter=new V,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${iO++}`,this.attachDomPortal=c=>{this._assertNotAttached();let l=this._portalOutlet.attachDomPortal(c);return this._afterPortalAttached(),l},a.politeness==="assertive"&&!a.announcementMessage?this._live="assertive":a.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:s}=i;if((s==="void"&&r!=="void"||s==="hidden")&&this._completeExit(),s==="visible"){let o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(a=>i.classList.add(a)):i.classList.add(r)),this._exposeToModals();let s=this._label.nativeElement,o="mdc-snackbar__label";s.classList.toggle(o,!s.querySelector(`.${o}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let o=r[s],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?a.indexOf(i)===-1&&o.setAttribute("aria-owns",a+" "+i):o.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let s=r.replace(this._liveElementId,"").trim();s.length>0?i.setAttribute("aria-owns",s):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(s=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};t.\u0275fac=function(r){return new(r||t)(T(D),T(it),T(De),T(ct),T(jr))},t.\u0275cmp=vt({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,s){if(r&1&&(pi(ti,7),pi(QN,7)),r&2){let o;Fn(o=Ln())&&(s._portalOutlet=o.first),Fn(o=Ln())&&(s._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,s){r&1&&nv("@state.done",function(a){return s.onAnimationEnd(a)}),r&2&&ev("@state",s._animationState)},standalone:!0,features:[Ut,bt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(q(0,"div",1)(1,"div",2,0)(3,"div",3),Ue(4,XN,0,0,"ng-template",4),B(),ht(5,"div"),B()()),r&2&&(oe(5),ae("aria-live",s._live)("role",s._role)("id",s._liveElementId))},dependencies:[ti],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[nO.snackBarState]}});let e=t;return e})();function sO(){return new jr}var oO=new R("mat-snack-bar-default-options",{providedIn:"root",factory:sO}),Wf=(()=>{let t=class t{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,s,o,a,c){this._overlay=i,this._live=r,this._injector=s,this._breakpointObserver=o,this._parentSnackBar=a,this._defaultConfig=c,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=Xw,this.snackBarContainerComponent=rO,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",s){let o=_(_({},this._defaultConfig),s);return o.data={message:i,action:r},o.announcementMessage===i&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let s=r&&r.viewContainerRef&&r.viewContainerRef.injector,o=J.create({parent:s||this._injector,providers:[{provide:jr,useValue:r}]}),a=new yn(this.snackBarContainerComponent,r.viewContainerRef,o),c=i.attach(a);return c.instance.snackBarConfig=r,c.instance}_attach(i,r){let s=_(_(_({},new jr),this._defaultConfig),r),o=this._createOverlay(s),a=this._attachSnackBarContainer(o,s),c=new Fo(a,o);if(i instanceof mi){let l=new Zn(i,null,{$implicit:s.data,snackBarRef:c});c.instance=a.attachTemplatePortal(l)}else{let l=this._createInjector(s,c),u=new yn(i,void 0,l),d=a.attachComponentPortal(u);c.instance=d.instance}return this._breakpointObserver.observe(bw.HandsetPortrait).pipe(Re(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),s.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(c,s),this._openedSnackBarRef=c,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new Ui;r.direction=i.direction;let s=this._overlay.position().global(),o=i.direction==="rtl",a=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!o||i.horizontalPosition==="end"&&o,c=!a&&i.horizontalPosition!=="center";return a?s.left("0"):c?s.right("0"):s.centerHorizontally(),i.verticalPosition==="top"?s.top("0"):s.bottom("0"),r.positionStrategy=s,this._overlay.create(r)}_createInjector(i,r){let s=i&&i.viewContainerRef&&i.viewContainerRef.injector;return J.create({parent:s||this._injector,providers:[{provide:Fo,useValue:r},{provide:Qw,useValue:i.data}]})}};t.\u0275fac=function(r){return new(r||t)(p(he),p(Cw),p(J),p(al),p(t,12),p(oO))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Zw=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({providers:[Wf],imports:[Ur,wn,Uw,Ne,Xw,Ne]});let e=t;return e})();var cO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me={},w,fm=fm||{},N=cO||self;function Rl(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Qo(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function lO(e){return Object.prototype.hasOwnProperty.call(e,Hf)&&e[Hf]||(e[Hf]=++uO)}var Hf="closure_uid_"+(1e9*Math.random()>>>0),uO=0;function dO(e,t,n){return e.call.apply(e.bind,arguments)}function hO(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Wt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Wt=dO:Wt=hO,Wt.apply(null,arguments)}function pl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function Nt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[r].apply(i,o)}}function ei(){this.s=this.s,this.o=this.o}var fO=0;ei.prototype.s=!1;ei.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),fO!=0)&&lO(this)};ei.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var d0=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function mm(e){let t=e.length;if(0<t){let n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Jw(e,t){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(Rl(i)){let r=e.length||0,s=i.length||0;e.length=r+s;for(let o=0;o<s;o++)e[r+o]=i[o]}else e.push(i)}}function Ht(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var mO=function(){if(!N.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let n=()=>{};N.addEventListener("test",n,t),N.removeEventListener("test",n,t)}catch{}return e}();function zo(e){return/^[\s\xa0]*$/.test(e)}function Dl(){var e=N.navigator;return e&&(e=e.userAgent)?e:""}function Ze(e){return Dl().indexOf(e)!=-1}function pm(e){return pm[" "](e),e}pm[" "]=function(){};function pO(e,t){var n=iM;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var gO=Ze("Opera"),qr=Ze("Trident")||Ze("MSIE"),h0=Ze("Edge"),Xf=h0||qr,f0=Ze("Gecko")&&!(Dl().toLowerCase().indexOf("webkit")!=-1&&!Ze("Edge"))&&!(Ze("Trident")||Ze("MSIE"))&&!Ze("Edge"),_O=Dl().toLowerCase().indexOf("webkit")!=-1&&!Ze("Edge");function m0(){var e=N.document;return e?e.documentMode:void 0}var Zf;t:{if(gl="",_l=function(){var e=Dl();if(f0)return/rv:([^\);]+)(\)|;)/.exec(e);if(h0)return/Edge\/([\d\.]+)/.exec(e);if(qr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(_O)return/WebKit\/(\S+)/.exec(e);if(gO)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),_l&&(gl=_l?_l[1]:""),qr&&(vl=m0(),vl!=null&&vl>parseFloat(gl))){Zf=String(vl);break t}Zf=gl}var gl,_l,vl,Jf;N.document&&qr?(Gf=m0(),Jf=Gf||parseInt(Zf,10)||void 0):Jf=void 0;var Gf,vO=Jf;function $o(e,t){if(Ht.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(f0){t:{try{pm(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:bO[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$o.$.h.call(this)}}Nt($o,Ht);var bO={2:"touch",3:"pen",4:"mouse"};$o.prototype.h=function(){$o.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xo="closure_listenable_"+(1e6*Math.random()|0),yO=0;function wO(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++yO,this.fa=this.ia=!1}function xl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function gm(e,t,n){for(let i in e)t.call(n,e[i],i,e)}function IO(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function p0(e){let t={};for(let n in e)t[n]=e[n];return t}var t0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function g0(e,t){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)e[n]=i[n];for(let s=0;s<t0.length;s++)n=t0[s],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function kl(e){this.src=e,this.g={},this.h=0}kl.prototype.add=function(e,t,n,i,r){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=em(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new wO(t,this.src,s,!!i,r),t.ia=n,e.push(t)),t};function tm(e,t){var n=t.type;if(n in e.g){var i=e.g[n],r=d0(i,t),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(xl(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function em(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}var _m="closure_lm_"+(1e6*Math.random()|0),Kf={};function _0(e,t,n,i,r){if(i&&i.once)return b0(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)_0(e,t[s],n,i,r);return null}return n=ym(n),e&&e[Xo]?e.O(t,n,Qo(i)?!!i.capture:!!i,r):v0(e,t,n,!1,i,r)}function v0(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=Qo(r)?!!r.capture:!!r,a=bm(e);if(a||(e[_m]=a=new kl(e)),n=a.add(t,n,i,o,s),n.proxy)return n;if(i=EO(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)mO||(r=o),r===void 0&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(w0(t.toString()),i);else if(e.addListener&&e.removeListener)e.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function EO(){function e(n){return t.call(e.src,e.listener,n)}let t=TO;return e}function b0(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)b0(e,t[s],n,i,r);return null}return n=ym(n),e&&e[Xo]?e.P(t,n,Qo(i)?!!i.capture:!!i,r):v0(e,t,n,!0,i,r)}function y0(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)y0(e,t[s],n,i,r);else i=Qo(i)?!!i.capture:!!i,n=ym(n),e&&e[Xo]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=em(s,n,i,r),-1<n&&(xl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=bm(e))&&(t=e.g[t.toString()],e=-1,t&&(e=em(t,n,i,r)),(n=-1<e?t[e]:null)&&vm(n))}function vm(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Xo])tm(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(w0(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=bm(t))?(tm(n,e),n.h==0&&(n.src=null,t[_m]=null)):xl(e)}}}function w0(e){return e in Kf?Kf[e]:Kf[e]="on"+e}function TO(e,t){if(e.fa)e=!0;else{t=new $o(t,this);var n=e.listener,i=e.la||e.src;e.ia&&vm(e),e=n.call(i,t)}return e}function bm(e){return e=e[_m],e instanceof kl?e:null}var Yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ym(e){return typeof e=="function"?e:(e[Yf]||(e[Yf]=function(t){return e.handleEvent(t)}),e[Yf])}function Pt(){ei.call(this),this.i=new kl(this),this.S=this,this.J=null}Nt(Pt,ei);Pt.prototype[Xo]=!0;Pt.prototype.removeEventListener=function(e,t,n,i){y0(this,e,t,n,i)};function zt(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,typeof t=="string")t=new Ht(t,e);else if(t instanceof Ht)t.target=t.target||e;else{var r=t;t=new Ht(i,e),g0(t,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=bl(o,i,!0,t)&&r}if(o=t.g=e,r=bl(o,i,!0,t)&&r,r=bl(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)o=t.g=n[s],r=bl(o,i,!1,t)&&r}Pt.prototype.N=function(){if(Pt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)xl(n[i]);delete e.g[t],e.h--}}this.J=null};Pt.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)};Pt.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};function bl(e,t,n,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&tm(e.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var wm=N.JSON.stringify,nm=class{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function CO(){var e=Im;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var im=class{constructor(){this.h=this.g=null}add(t,n){let i=I0.get();i.set(t,n),this.h?this.h.next=i:this.g=i,this.h=i}},I0=new nm(()=>new rm,e=>e.reset()),rm=class{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function AO(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function SO(e){N.setTimeout(()=>{throw e},0)}var qo,Wo=!1,Im=new im,E0=()=>{let e=N.Promise.resolve(void 0);qo=()=>{e.then(RO)}},RO=()=>{for(var e;e=CO();){try{e.h.call(e.g)}catch(n){SO(n)}var t=I0;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Wo=!1};function Pl(e,t){Pt.call(this),this.h=e||1,this.g=t||N,this.j=Wt(this.qb,this),this.l=Date.now()}Nt(Pl,Pt);w=Pl.prototype;w.ga=!1;w.T=null;w.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zt(this,"tick"),this.ga&&(Em(this),this.start()))}};w.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Em(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}w.N=function(){Pl.$.N.call(this),Em(this),delete this.g};function Tm(e,t,n){if(typeof e=="function")n&&(e=Wt(e,n));else if(e&&typeof e.handleEvent=="function")e=Wt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:N.setTimeout(e,t||0)}function T0(e){e.g=Tm(()=>{e.g=null,e.i&&(e.i=!1,T0(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var sm=class extends ei{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:T0(this)}N(){super.N(),this.g&&(N.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ho(e){ei.call(this),this.h=e,this.g={}}Nt(Ho,ei);var e0=[];function C0(e,t,n,i){Array.isArray(n)||(n&&(e0[0]=n.toString()),n=e0);for(var r=0;r<n.length;r++){var s=_0(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function A0(e){gm(e.g,function(t,n){this.g.hasOwnProperty(n)&&vm(t)},e),e.g={}}Ho.prototype.N=function(){Ho.$.N.call(this),A0(this)};Ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Nl(){this.g=!0}Nl.prototype.Ea=function(){this.g=!1};function DO(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+`
`+n+`
`+o})}function xO(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+`
`+n+`
`+s+" "+o})}function zr(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+PO(e,n)+(i?" "+i:"")})}function kO(e,t){e.info(function(){return"TIMEOUT: "+t})}Nl.prototype.info=function(){};function PO(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return wm(n)}catch{return t}}var $i={},n0=null;function Ol(){return n0=n0||new Pt}$i.Ta="serverreachability";function S0(e){Ht.call(this,$i.Ta,e)}Nt(S0,Ht);function Go(e){let t=Ol();zt(t,new S0(t))}$i.STAT_EVENT="statevent";function R0(e,t){Ht.call(this,$i.STAT_EVENT,e),this.stat=t}Nt(R0,Ht);function te(e){let t=Ol();zt(t,new R0(t,e))}$i.Ua="timingevent";function D0(e,t){Ht.call(this,$i.Ua,e),this.size=t}Nt(D0,Ht);function Zo(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return N.setTimeout(function(){e()},t)}var Ml={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},x0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Cm(){}Cm.prototype.h=null;function i0(e){return e.h||(e.h=e.i())}function k0(){}var Jo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Am(){Ht.call(this,"d")}Nt(Am,Ht);function Sm(){Ht.call(this,"c")}Nt(Sm,Ht);var om;function Fl(){}Nt(Fl,Cm);Fl.prototype.g=function(){return new XMLHttpRequest};Fl.prototype.i=function(){return{}};om=new Fl;function ta(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Ho(this),this.P=NO,e=Xf?125:void 0,this.V=new Pl(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new P0}function P0(){this.i=null,this.g="",this.h=!1}var NO=45e3,N0={},am={};w=ta.prototype;w.setTimeout=function(e){this.P=e};function cm(e,t,n){e.L=1,e.A=Vl(Tn(t)),e.u=n,e.S=!0,O0(e,null)}function O0(e,t){e.G=Date.now(),ea(e),e.B=Tn(e.A);var n=e.B,i=e.W;Array.isArray(i)||(i=[String(i)]),z0(n.i,"t",i),e.o=0,n=e.l.J,e.h=new P0,e.g=lI(e.l,n?t:null,!e.u),0<e.O&&(e.M=new sm(Wt(e.Pa,e,e.g),e.O)),C0(e.U,e.g,"readystatechange",e.nb),t=e.I?p0(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Go(),DO(e.j,e.v,e.B,e.m,e.W,e.u)}w.nb=function(e){e=e.target;let t=this.M;t&&Je(e)==3?t.l():this.Pa(e)};w.Pa=function(e){try{if(e==this.g)t:{let u=Je(this.g);var t=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||Xf||this.g&&(this.h.h||this.g.ja()||a0(this.g)))){this.J||u!=4||t==7||(t==8||0>=d?Go(3):Go(2)),Ll(this);var n=this.g.da();this.ca=n;e:if(M0(this)){var i=a0(this.g);e="";var r=i.length,s=Je(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Bo(this);var o="";break e}this.h.i=new N.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,xO(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zo(a)){var l=a;break e}}l=null}if(n=l)zr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lm(this,n);else{this.i=!1,this.s=3,te(12),ji(this),Bo(this);break t}}this.S?(F0(this,u,o),Xf&&this.i&&u==3&&(C0(this.U,this.V,"tick",this.mb),this.V.start())):(zr(this.j,this.m,o,null),lm(this,o)),u==4&&ji(this),this.i&&!this.J&&(u==4?sI(this.l,this):(this.i=!1,ea(this)))}else tM(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,te(12)):(this.s=0,te(13)),ji(this),Bo(this)}}}catch{}finally{}};function M0(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function F0(e,t,n){let i=!0,r;for(;!e.J&&e.o<n.length;)if(r=OO(e,n),r==am){t==4&&(e.s=4,te(14),i=!1),zr(e.j,e.m,null,"[Incomplete Response]");break}else if(r==N0){e.s=4,te(15),zr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}else zr(e.j,e.m,r,null),lm(e,r);M0(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,te(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nm(t),t.M=!0,te(11))):(zr(e.j,e.m,n,"[Invalid Chunked Response]"),ji(e),Bo(e))}w.mb=function(){if(this.g){var e=Je(this.g),t=this.g.ja();this.o<t.length&&(Ll(this),F0(this,e,t),this.i&&e!=4&&ea(this))}};function OO(e,t){var n=e.o,i=t.indexOf(`
`,n);return i==-1?am:(n=Number(t.substring(n,i)),isNaN(n)?N0:(i+=1,i+n>t.length?am:(t=t.slice(i,i+n),e.o=i+n,t)))}w.cancel=function(){this.J=!0,ji(this)};function ea(e){e.Y=Date.now()+e.P,L0(e,e.P)}function L0(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Zo(Wt(e.lb,e),t)}function Ll(e){e.C&&(N.clearTimeout(e.C),e.C=null)}w.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(kO(this.j,this.B),this.L!=2&&(Go(),te(17)),ji(this),this.s=2,Bo(this)):L0(this,this.Y-e)};function Bo(e){e.l.H==0||e.J||sI(e.l,e)}function ji(e){Ll(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Em(e.V),A0(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function lm(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||um(n.i,e))){if(!e.K&&um(n.i,e)&&n.H==3){try{var i=n.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Tl(n),Bl(n);else break t;Pm(n),te(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Zo(Wt(n.ib,n),6e3));if(1>=W0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Bi(n,11)}else if((e.K||n.g==e)&&Tl(n),!zo(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let m=e.g;if(m){let g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=i.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Rm(s,s.h),s.h=null))}if(i.F){let E=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(i.Da=E,lt(i.I,i.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=e;if(i.wa=cI(i,i.J?i.pa:null,i.Y),o.K){H0(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(Ll(a),ea(a)),i.g=o}else iI(i);0<n.j.length&&zl(n)}else l[0]!="stop"&&l[0]!="close"||Bi(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Bi(n,7):km(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Go(4)}catch{}}function MO(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Rl(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}t=[],n=0;for(i in e)t[n++]=e[i];return t}function FO(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Rl(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(let i in e)t[n++]=i;return t}}}function V0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Rl(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=FO(e),i=MO(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}var U0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LO(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function zi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof zi){this.h=e.h,Il(this,e.j),this.s=e.s,this.g=e.g,El(this,e.m),this.l=e.l;var t=e.i,n=new Ko;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),r0(this,n),this.o=e.o}else e&&(t=String(e).match(U0))?(this.h=!1,Il(this,t[1]||"",!0),this.s=Uo(t[2]||""),this.g=Uo(t[3]||"",!0),El(this,t[4]),this.l=Uo(t[5]||"",!0),r0(this,t[6]||"",!0),this.o=Uo(t[7]||"")):(this.h=!1,this.i=new Ko(null,this.h))}zi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jo(t,s0,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(jo(t,s0,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(jo(n,n.charAt(0)=="/"?jO:UO,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jo(n,zO)),e.join("")};function Tn(e){return new zi(e)}function Il(e,t,n){e.j=n?Uo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function El(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function r0(e,t,n){t instanceof Ko?(e.i=t,$O(e.i,e.h)):(n||(t=jo(t,BO)),e.i=new Ko(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function Vl(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Uo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jo(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,VO),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function VO(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var s0=/[#\/\?@]/g,UO=/[#\?:]/g,jO=/[#\?]/g,BO=/[#\?@]/g,zO=/#/g;function Ko(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ni(e){e.g||(e.g=new Map,e.h=0,e.i&&LO(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}w=Ko.prototype;w.add=function(e,t){ni(this),this.i=null,e=Wr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function j0(e,t){ni(e),t=Wr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function B0(e,t){return ni(e),t=Wr(e,t),e.g.has(t)}w.forEach=function(e,t){ni(this),this.g.forEach(function(n,i){n.forEach(function(r){e.call(t,r,i,this)},this)},this)};w.ta=function(){ni(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){let r=e[i];for(let s=0;s<r.length;s++)n.push(t[i])}return n};w.Z=function(e){ni(this);let t=[];if(typeof e=="string")B0(this,e)&&(t=t.concat(this.g.get(Wr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};w.set=function(e,t){return ni(this),this.i=null,e=Wr(this,e),B0(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};w.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function z0(e,t,n){j0(e,t),0<n.length&&(e.i=null,e.g.set(Wr(e,t),mm(n)),e.h+=n.length)}w.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};function Wr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function $O(e,t){t&&!e.j&&(ni(e),e.i=null,e.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(j0(this,i),z0(this,r,n))},e)),e.j=t}var qO=class{constructor(e,t){this.g=e,this.map=t}};function $0(e){this.l=e||WO,N.PerformanceNavigationTiming?(e=N.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(N.g&&N.g.Ka&&N.g.Ka()&&N.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var WO=10;function q0(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function W0(e){return e.h?1:e.g?e.g.size:0}function um(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Rm(e,t){e.g?e.g.add(t):e.h=t}function H0(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}$0.prototype.cancel=function(){if(this.i=G0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function G0(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.F);return t}return mm(e.i)}var HO=class{stringify(e){return N.JSON.stringify(e,void 0)}parse(e){return N.JSON.parse(e,void 0)}};function GO(){this.g=new HO}function KO(e,t,n){let i=n||"";try{V0(e,function(r,s){let o=r;Qo(r)&&(o=wm(r)),t.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function YO(e,t){let n=new Nl;if(N.Image){let i=new Image;i.onload=pl(yl,n,i,"TestLoadImage: loaded",!0,t),i.onerror=pl(yl,n,i,"TestLoadImage: error",!1,t),i.onabort=pl(yl,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=pl(yl,n,i,"TestLoadImage: timeout",!1,t),N.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}function yl(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function na(e){this.l=e.ec||null,this.j=e.ob||!1}Nt(na,Cm);na.prototype.g=function(){return new Ul(this.l,this.j)};na.prototype.i=function(e){return function(){return e}}({});function Ul(e,t){Pt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Dm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nt(Ul,Pt);var Dm=0;w=Ul.prototype;w.open=function(e,t){if(this.readyState!=Dm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Yo(this)};w.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||N).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};w.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=Dm};w.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Yo(this)),this.g&&(this.readyState=3,Yo(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof N.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;K0(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function K0(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}w.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ia(this):Yo(this),this.readyState==3&&K0(this)}};w.Za=function(e){this.g&&(this.response=this.responseText=e,ia(this))};w.Ya=function(e){this.g&&(this.response=e,ia(this))};w.ka=function(){this.g&&ia(this)};function ia(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Yo(e)}w.setRequestHeader=function(e,t){this.v.append(e,t)};w.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};w.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Yo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var QO=N.JSON.parse;function gt(e){Pt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Y0,this.L=this.M=!1}Nt(gt,Pt);var Y0="",XO=/^https?$/i,ZO=["POST","PUT"];w=gt.prototype;w.Oa=function(e){this.M=e};w.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():om.g(),this.C=this.u?i0(this.u):i0(om),this.g.onreadystatechange=Wt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){o0(this,s);return}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=N.FormData&&e instanceof N.FormData,!(0<=d0(ZO,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Z0(this),0<this.B&&((this.L=JO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.ua,this)):this.A=Tm(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){o0(this,s)}};function JO(e){return qr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}w.ua=function(){typeof fm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))};function o0(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Q0(e),jl(e)}function Q0(e){e.F||(e.F=!0,zt(e,"complete"),zt(e,"error"))}w.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,zt(this,"complete"),zt(this,"abort"),jl(this))};w.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jl(this,!0)),gt.$.N.call(this)};w.La=function(){this.s||(this.G||this.v||this.l?X0(this):this.kb())};w.kb=function(){X0(this)};function X0(e){if(e.h&&typeof fm<"u"&&(!e.C[1]||Je(e)!=4||e.da()!=2)){if(e.v&&Je(e)==4)Tm(e.La,0,e);else if(zt(e,"readystatechange"),Je(e)==4){e.h=!1;try{let o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var i;if(i=o===0){var r=String(e.I).match(U0)[1]||null;!r&&N.self&&N.self.location&&(r=N.self.location.protocol.slice(0,-1)),i=!XO.test(r?r.toLowerCase():"")}n=i}if(n)zt(e,"complete"),zt(e,"success");else{e.m=6;try{var s=2<Je(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",Q0(e)}}finally{jl(e)}}}}function jl(e,t){if(e.g){Z0(e);let n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||zt(e,"ready");try{n.onreadystatechange=i}catch{}}}function Z0(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(N.clearTimeout(e.A),e.A=null)}w.isActive=function(){return!!this.g};function Je(e){return e.g?e.g.readyState:0}w.da=function(){try{return 2<Je(this)?this.g.status:-1}catch{return-1}};w.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};w.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),QO(t)}};function a0(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Y0:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function tM(e){let t={};e=(e.g&&2<=Je(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<e.length;i++){if(zo(e[i]))continue;var n=AO(e[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=t[r]||[];t[r]=s,s.push(n)}IO(t,function(i){return i.join(", ")})}w.Ia=function(){return this.m};w.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function J0(e){let t="";return gm(e,function(n,i){t+=i,t+=":",t+=n,t+=`\r
`}),t}function xm(e,t,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=J0(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):lt(e,t,n))}function Lo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tI(e){this.Ga=0,this.j=[],this.l=new Nl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lo("baseRetryDelayMs",5e3,e),this.hb=Lo("retryDelaySeedMs",1e4,e),this.eb=Lo("forwardChannelMaxRetries",2,e),this.xa=Lo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new $0(e&&e.concurrentRequestLimit),this.Ja=new GO,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}w=tI.prototype;w.ra=8;w.H=1;function km(e){if(eI(e),e.H==3){var t=e.W++,n=Tn(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),ra(e,n),t=new ta(e,e.l,t),t.L=2,t.A=Vl(Tn(n)),n=!1,N.navigator&&N.navigator.sendBeacon)try{n=N.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&N.Image&&(new Image().src=t.A,n=!0),n||(t.g=lI(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ea(t)}aI(e)}function Bl(e){e.g&&(Nm(e),e.g.cancel(),e.g=null)}function eI(e){Bl(e),e.u&&(N.clearTimeout(e.u),e.u=null),Tl(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&N.clearTimeout(e.m),e.m=null)}function zl(e){if(!q0(e.i)&&!e.m){e.m=!0;var t=e.Na;qo||E0(),Wo||(qo(),Wo=!0),Im.add(t,e),e.C=0}}function eM(e,t){return W0(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Zo(Wt(e.Na,e,t),oI(e,e.C)),e.C++,!0)}w.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let r=new ta(this,this.l,e),s=this.s;if(this.U&&(s?(s=p0(s),g0(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break e}i=void 0}if(i===void 0)break;if(t+=i,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=nI(this,r,t),n=Tn(this.I),lt(n,"RID",e),lt(n,"CVER",22),this.F&&lt(n,"X-HTTP-Session-Id",this.F),ra(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(J0(s)))+"&"+t:this.o&&xm(n,this.o,s)),Rm(this.i,r),this.bb&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),r.aa=!0,cm(r,n,null)):cm(r,n,t),this.H=2}}else this.H==3&&(e?c0(this,e):this.j.length==0||q0(this.i)||c0(this))};function c0(e,t){var n;t?n=t.m:n=e.W++;let i=Tn(e.I);lt(i,"SID",e.K),lt(i,"RID",n),lt(i,"AID",e.V),ra(e,i),e.o&&e.s&&xm(i,e.o,e.s),n=new ta(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=nI(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Rm(e.i,n),cm(n,i,t)}function ra(e,t){e.na&&gm(e.na,function(n,i){lt(t,i,n)}),e.h&&V0({},function(n,i){lt(t,i,n)})}function nI(e,t,n){n=Math.min(e.j.length,n);var i=e.h?Wt(e.h.Va,e.h,e):null;t:{var r=e.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{KO(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,i}function iI(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;qo||E0(),Wo||(qo(),Wo=!0),Im.add(t,e),e.A=0}}function Pm(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Zo(Wt(e.Ma,e),oI(e,e.A)),e.A++,!0)}w.Ma=function(){if(this.u=null,rI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Zo(Wt(this.jb,this),e)}};w.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,te(10),Bl(this),rI(this))};function Nm(e){e.B!=null&&(N.clearTimeout(e.B),e.B=null)}function rI(e){e.g=new ta(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Tn(e.wa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.V),lt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&lt(t,"TO",e.qa),lt(t,"TYPE","xmlhttp"),ra(e,t),e.o&&e.s&&xm(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Vl(Tn(t)),n.u=null,n.S=!0,O0(n,e)}w.ib=function(){this.v!=null&&(this.v=null,Bl(this),Pm(this),te(19))};function Tl(e){e.v!=null&&(N.clearTimeout(e.v),e.v=null)}function sI(e,t){var n=null;if(e.g==t){Tl(e),Nm(e),e.g=null;var i=2}else if(um(e.i,t))n=t.F,H0(e.i,t),i=1;else return;if(e.H!=0){if(t.i)if(i==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var r=e.C;i=Ol(),zt(i,new D0(i,n)),zl(e)}else iI(e);else if(r=t.s,r==3||r==0&&0<t.ca||!(i==1&&eM(e,t)||i==2&&Pm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Bi(e,5);break;case 4:Bi(e,10);break;case 3:Bi(e,6);break;default:Bi(e,2)}}}function oI(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Bi(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var i=Wt(e.pb,e);n||(n=new zi("//www.google.com/images/cleardot.gif"),N.location&&N.location.protocol=="http"||Il(n,"https"),Vl(n)),YO(n.toString(),i)}else te(2);e.H=0,e.h&&e.h.za(t),aI(e),eI(e)}w.pb=function(e){e?(this.l.info("Successfully pinged google.com"),te(2)):(this.l.info("Failed to ping google.com"),te(1))};function aI(e){if(e.H=0,e.ma=[],e.h){let t=G0(e.i);(t.length!=0||e.j.length!=0)&&(Jw(e.ma,t),Jw(e.ma,e.j),e.i.i.length=0,mm(e.j),e.j.length=0),e.h.ya()}}function cI(e,t,n){var i=n instanceof zi?Tn(n):new zi(n);if(i.g!="")t&&(i.g=t+"."+i.g),El(i,i.m);else{var r=N.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new zi(null);i&&Il(s,i),t&&(s.g=t),r&&El(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&lt(i,n,t),lt(i,"VER",e.ra),ra(e,i),i}function lI(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new gt(new na({ob:n})):new gt(e.va),t.Oa(e.J),t}w.isActive=function(){return!!this.h&&this.h.isActive(this)};function uI(){}w=uI.prototype;w.Ba=function(){};w.Aa=function(){};w.za=function(){};w.ya=function(){};w.isActive=function(){return!0};w.Va=function(){};function Cl(){if(qr&&!(10<=Number(vO)))throw Error("Environmental error: no available transport.")}Cl.prototype.g=function(e,t){return new fe(e,t)};function fe(e,t){Pt.call(this),this.g=new tI(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!zo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zo(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Hr(this)}Nt(fe,Pt);fe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;te(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=cI(e,null,e.Y),zl(e)};fe.prototype.close=function(){km(this.g)};fe.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=wm(e),e=n);t.j.push(new qO(t.fb++,e)),t.H==3&&zl(t)};fe.prototype.N=function(){this.g.h=null,delete this.j,km(this.g),delete this.g,fe.$.N.call(this)};function dI(e){Am.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Nt(dI,Am);function hI(){Sm.call(this),this.status=1}Nt(hI,Sm);function Hr(e){this.g=e}Nt(Hr,uI);Hr.prototype.Ba=function(){zt(this.g,"a")};Hr.prototype.Aa=function(e){zt(this.g,new dI(e))};Hr.prototype.za=function(e){zt(this.g,new hI)};Hr.prototype.ya=function(){zt(this.g,"b")};function nM(){this.blockSize=-1}function Oe(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Nt(Oe,nM);Oe.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qf(e,t,n){n||(n=0);var i=Array(16);if(typeof t=="string")for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(s^n&(r^s))+i[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(s^n&(r^s))+i[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(s^n&(r^s))+i[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(r^t&(n^r))+i[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(t^r&(s^t))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=t+(r^s&(n^r))+i[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(r^s&(n^r))+i[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(r^s&(n^r))+i[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(r^s&(n^r))+i[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(t^n))+i[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=t+(n^r^s)+i[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(n^r^s)+i[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(n^r^s)+i[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(n^r^s)+i[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^r)+i[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^t)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=t+(r^(n|~s))+i[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=t+(r^(n|~s))+i[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=t+(r^(n|~s))+i[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=t+(r^(n|~s))+i[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~r))+i[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}Oe.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(r==0)for(;s<=n;)Qf(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){Qf(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){Qf(this,i),r=0;break}}this.h=r,this.i+=t};Oe.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};function X(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=e[r]|0;i&&s==t||(n[r]=s,i=!1)}this.g=n}var iM={};function Om(e){return-128<=e&&128>e?pO(e,function(t){return new X([t|0],0>t?-1:0)}):new X([e|0],0>e?-1:0)}function tn(e){if(isNaN(e)||!isFinite(e))return $r;if(0>e)return Bt(tn(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=dm;return new X(t,0)}function fI(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Bt(fI(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=tn(Math.pow(t,8)),i=$r,r=0;r<e.length;r+=8){var s=Math.min(8,e.length-r),o=parseInt(e.substring(r,r+s),t);8>s?(s=tn(Math.pow(t,s)),i=i.R(s).add(tn(o))):(i=i.R(n),i=i.add(tn(o)))}return i}var dm=4294967296,$r=Om(0),hm=Om(1),l0=Om(16777216);w=X.prototype;w.ea=function(){if(Te(this))return-Bt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:dm+i)*t,t*=dm}return e};w.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(En(this))return"0";if(Te(this))return"-"+Bt(this).toString(e);for(var t=tn(Math.pow(e,6)),n=this,i="";;){var r=Sl(n,t).g;n=Al(n,r.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=r,En(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};w.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function En(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Te(e){return e.h==-1}w.X=function(e){return e=Al(this,e),Te(e)?-1:En(e)?0:1};function Bt(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new X(n,~e.h).add(hm)}w.abs=function(){return Te(this)?Bt(this):this};w.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(this.D(r)&65535)+(e.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new X(n,n[n.length-1]&-2147483648?-1:0)};function Al(e,t){return e.add(Bt(t))}w.R=function(e){if(En(this)||En(e))return $r;if(Te(this))return Te(e)?Bt(this).R(Bt(e)):Bt(Bt(this).R(e));if(Te(e))return Bt(this.R(Bt(e)));if(0>this.X(l0)&&0>e.X(l0))return tn(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=e.D(r)>>>16,c=e.D(r)&65535;n[2*i+2*r]+=o*c,wl(n,2*i+2*r),n[2*i+2*r+1]+=s*c,wl(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,wl(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,wl(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new X(n,0)};function wl(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Vo(e,t){this.g=e,this.h=t}function Sl(e,t){if(En(t))throw Error("division by zero");if(En(e))return new Vo($r,$r);if(Te(e))return t=Sl(Bt(e),t),new Vo(Bt(t.g),Bt(t.h));if(Te(t))return t=Sl(e,Bt(t)),new Vo(Bt(t.g),t.h);if(30<e.g.length){if(Te(e)||Te(t))throw Error("slowDivide_ only works with positive integers.");for(var n=hm,i=t;0>=i.X(e);)n=u0(n),i=u0(i);var r=Br(n,1),s=Br(i,1);for(i=Br(i,2),n=Br(n,2);!En(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=Br(i,1),n=Br(n,1)}return t=Al(e,r.R(t)),new Vo(r,t)}for(r=$r;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=tn(n),o=s.R(t);Te(o)||0<o.X(e);)n-=i,s=tn(n),o=s.R(t);En(s)&&(s=hm),r=r.add(s),e=Al(e,o)}return new Vo(r,e)}w.gb=function(e){return Sl(this,e).h};w.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new X(n,this.h&e.h)};w.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new X(n,this.h|e.h)};w.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new X(n,this.h^e.h)};function u0(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new X(n,e.h)}function Br(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new X(r,e.h)}Cl.prototype.createWebChannel=Cl.prototype.g;fe.prototype.send=fe.prototype.u;fe.prototype.open=fe.prototype.m;fe.prototype.close=fe.prototype.close;Ml.NO_ERROR=0;Ml.TIMEOUT=8;Ml.HTTP_ERROR=6;x0.COMPLETE="complete";k0.EventType=Jo;Jo.OPEN="a";Jo.CLOSE="b";Jo.ERROR="c";Jo.MESSAGE="d";Pt.prototype.listen=Pt.prototype.O;gt.prototype.listenOnce=gt.prototype.P;gt.prototype.getLastError=gt.prototype.Sa;gt.prototype.getLastErrorCode=gt.prototype.Ia;gt.prototype.getStatus=gt.prototype.da;gt.prototype.getResponseJson=gt.prototype.Wa;gt.prototype.getResponseText=gt.prototype.ja;gt.prototype.send=gt.prototype.ha;gt.prototype.setWithCredentials=gt.prototype.Oa;Oe.prototype.digest=Oe.prototype.l;Oe.prototype.reset=Oe.prototype.reset;Oe.prototype.update=Oe.prototype.j;X.prototype.add=X.prototype.add;X.prototype.multiply=X.prototype.R;X.prototype.modulo=X.prototype.gb;X.prototype.compare=X.prototype.X;X.prototype.toNumber=X.prototype.ea;X.prototype.toString=X.prototype.toString;X.prototype.getBits=X.prototype.D;X.fromNumber=tn;X.fromString=fI;var mI=Me.createWebChannelTransport=function(){return new Cl},pI=Me.getStatEventTarget=function(){return Ol()},$l=Me.ErrorCode=Ml,gI=Me.EventType=x0,_I=Me.Event=$i,Mm=Me.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vI=Me.FetchXmlHttpFactory=na,sa=Me.WebChannel=k0,bI=Me.XhrIo=gt,rM=Me.Md5=Oe,yI=Me.Integer=X;var wI="@firebase/firestore";var Ot=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var us="10.11.1";var Gi=new We("@firebase/firestore");function oa(){return Gi.logLevel}function A(e,...t){if(Gi.logLevel<=U.DEBUG){let n=t.map(ng);Gi.debug(`Firestore (${us}): ${e}`,...n)}}function Ki(e,...t){if(Gi.logLevel<=U.ERROR){let n=t.map(ng);Gi.error(`Firestore (${us}): ${e}`,...n)}}function Yl(e,...t){if(Gi.logLevel<=U.WARN){let n=t.map(ng);Gi.warn(`Firestore (${us}): ${e}`,...n)}}function ng(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function z(e="Unexpected state"){let t=`FIRESTORE (${us}) INTERNAL ASSERTION FAILED: `+e;throw Ki(t),new Error(t)}function Ft(e,t){e||z()}function ut(e,t){return e}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends de{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cn=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var Ql=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Um=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}},jm=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Bm=class{constructor(t){this.t=t,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Cn,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>f(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Cn)}},0),o()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ft(typeof i.accessToken=="string"),new Ql(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string"),new Ot(t)}},zm=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$m=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new zm(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qm=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wm=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let i=s=>{s.error!=null&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,A("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ft(typeof n.token=="string"),this.R=n.token,new qm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function sM(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var Xl=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=sM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%t.length))}return i}};function st(e,t){return e<t?-1:e>t?1:0}function Qr(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}var Yt=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new k(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new k(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new k(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?st(this.nanoseconds,t.nanoseconds):st(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var wt=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new Yt(0,0))}static max(){return new e(new Yt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zl=class e{constructor(t,n,i){n===void 0?n=0:n>t.length&&z(),i===void 0?i=t.length-n:i>t.length-n&&z(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let i=Math.min(t.length,n.length);for(let r=0;r<i;r++){let s=t.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},Ct=class e extends Zl{construct(t,n,i){return new e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let i of t){if(i.indexOf("//")>=0)throw new k(v.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new e(n)}static emptyPath(){return new e([])}},oM=/^[_a-zA-Z][_a-zA-Z0-9]*$/,me=class e extends Zl{construct(t,n,i){return new e(t,n,i)}static isValidIdentifier(t){return oM.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new k(v.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new k(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new k(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var j=class e{constructor(t){this.path=t}static fromPath(t){return new e(Ct.fromString(t))}static fromName(t){return new e(Ct.fromString(t).popFirst(5))}static empty(){return new e(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ct.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ct.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new Ct(t.slice()))}};var Hm=class{constructor(t,n,i,r){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=r}};Hm.UNKNOWN_ID=-1;function aM(e,t){let n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=wt.fromTimestamp(i===1e9?new Yt(n+1,0):new Yt(n,i));return new Yi(r,j.empty(),t)}function cM(e){return new Yi(e.readTime,e.key,-1)}var Yi=class e{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new e(wt.min(),j.empty(),-1)}static max(){return new e(wt.max(),j.empty(),-1)}};function lM(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=j.comparator(e.documentKey,t.documentKey),n!==0?n:st(e.largestBatchId,t.largestBatchId))}var uM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function BI(e){return f(this,null,function*(){if(e.code!==v.FAILED_PRECONDITION||e.message!==uM)throw e;A("LocalStore","Unexpectedly lost primary lease")})}var b=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,i)=>{n(t)})}static reject(t){return new e((n,i)=>{i(t)})}static waitFor(t){return new e((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(t){let n=e.resolve(!1);for(let i of t)n=n.next(r=>r?e.resolve(r):i());return n}static forEach(t,n){let i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new e((i,r)=>{let s=t.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(t[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new e((i,r)=>{let s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}};function dM(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gu(e){return e.name==="IndexedDbTransactionError"}var hM=(()=>{class e{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return e.oe=-1,e})();function ig(e){return e==null}function ha(e){return e===0&&1/e==-1/0}function fM(e){return typeof e=="number"&&Number.isInteger(e)&&!ha(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var mM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o$=[...mM,"documentOverlays"],pM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gM=pM,a$=[...gM,"indexConfiguration","indexState","indexEntries"];function II(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ga(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zI(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var pe=class e{constructor(t,n){this.comparator=t,this.root=n||sn.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){let t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Kr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Kr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Kr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Kr(this.root,t,this.comparator,!0)}},Kr=class{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},sn=class e{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??e.RED,this.left=r??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new e(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return e.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let t=this.left.check();if(t!==this.right.check())throw z();return t+(this.isRed()?0:1)}};sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,n,i,r,s){return this}insert(t,n,i){return new sn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ee=class e{constructor(t){this.comparator=t,this.data=new pe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jl(this.data.getIterator())}getIteratorFrom(t){return new Jl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},Jl=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class e{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new e([])}unionWith(t){let n=new ee(me.comparator);for(let i of this.fields)n=n.add(i);for(let i of t)n=n.add(i);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Qr(this.fields,t.fields,(n,i)=>n.isEqual(i))}};var Km=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ri=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Km("Invalid base64 string: "+s):s}}(t);return new e(n)}static fromUint8Array(t){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return st(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};ri.EMPTY_BYTE_STRING=new ri("");var _M=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(e){if(Ft(!!e),typeof e=="string"){let t=0,n=_M.exec(e);if(Ft(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rt(e.seconds),nanos:Rt(e.nanos)}}function Rt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Xr(e){return typeof e=="string"?ri.fromBase64String(e):ri.fromUint8Array(e)}function rg(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $I(e){let t=e.mapValue.fields.__previous_value__;return rg(t)?$I(t):t}function tu(e){let t=si(e.mapValue.fields.__local_write_time__.timestampValue);return new Yt(t.seconds,t.nanos)}var Ym=class{constructor(t,n,i,r,s,o,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Qm=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rg(e)?4:qI(e)?9007199254740991:10:z()}function on(e,t){if(e===t)return!0;let n=Zr(e);if(n!==Zr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tu(e).isEqual(tu(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=si(r.timestampValue),a=si(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Xr(r.bytesValue).isEqual(Xr(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Rt(r.geoPointValue.latitude)===Rt(s.geoPointValue.latitude)&&Rt(r.geoPointValue.longitude)===Rt(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Rt(r.integerValue)===Rt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Rt(r.doubleValue),a=Rt(s.doubleValue);return o===a?ha(o)===ha(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Qr(e.arrayValue.values||[],t.arrayValue.values||[],on);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(II(o)!==II(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!on(o[c],a[c])))return!1;return!0}(e,t);default:return z()}}function fa(e,t){return(e.values||[]).find(n=>on(n,t))!==void 0}function Jr(e,t){if(e===t)return 0;let n=Zr(e),i=Zr(t);if(n!==i)return st(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(e.booleanValue,t.booleanValue);case 2:return function(s,o){let a=Rt(s.integerValue||s.doubleValue),c=Rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return EI(e.timestampValue,t.timestampValue);case 4:return EI(tu(e),tu(t));case 5:return st(e.stringValue,t.stringValue);case 6:return function(s,o){let a=Xr(s),c=Xr(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=st(a[l],c[l]);if(u!==0)return u}return st(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){let a=st(Rt(s.latitude),Rt(o.latitude));return a!==0?a:st(Rt(s.longitude),Rt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Jr(a[l],c[l]);if(u)return u}return st(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===ql.mapValue&&o===ql.mapValue)return 0;if(s===ql.mapValue)return 1;if(o===ql.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=st(c[d],u[d]);if(h!==0)return h;let m=Jr(a[c[d]],l[u[d]]);if(m!==0)return m}return st(c.length,u.length)}(e.mapValue,t.mapValue);default:throw z()}}function EI(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return st(e,t);let n=si(e),i=si(t),r=st(n.seconds,i.seconds);return r!==0?r:st(n.nanos,i.nanos)}function ts(e){return Xm(e)}function Xm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let i=si(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Xr(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return j.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=Xm(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Xm(n.fields[o])}`;return r+"}"}(e.mapValue):z()}function Zm(e){return!!e&&"integerValue"in e}function sg(e){return!!e&&"arrayValue"in e}function Gl(e){return!!e&&"mapValue"in e}function ca(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return ga(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=ca(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ca(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qI(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nn=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Gl(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ca(n)}setAll(t){let n=me.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ca(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){let n=this.field(t.popLast());Gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return on(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Gl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){ga(n,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new e(ca(this.value))}};function WI(e){let t=[];return ga(e.fields,(n,i)=>{let r=new me([n]);if(Gl(i)){let s=WI(i.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new rn(t)}var es=class e{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new e(t,0,wt.min(),wt.min(),wt.min(),nn.empty(),0)}static newFoundDocument(t,n,i,r){return new e(t,1,n,wt.min(),i,r,0)}static newNoDocument(t,n){return new e(t,2,n,wt.min(),wt.min(),nn.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,wt.min(),wt.min(),nn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ns=class{constructor(t,n){this.position=t,this.inclusive=n}};function TI(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){let s=t[r],o=e.position[r];if(s.field.isKeyField()?i=j.comparator(j.fromName(o.referenceValue),n.key):i=Jr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function CI(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!on(e.position[n],t.position[n]))return!1;return!0}var is=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function vM(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var eu=class{},Mt=class e extends eu{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new tp(t,n,i):n==="array-contains"?new ip(t,i):n==="in"?new rp(t,i):n==="not-in"?new sp(t,i):n==="array-contains-any"?new op(t,i):new e(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new ep(t,i):new np(t,i)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jr(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(Jr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oi=class e extends eu{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new e(t,n)}matches(t){return HI(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function HI(e){return e.op==="and"}function GI(e){return bM(e)&&HI(e)}function bM(e){for(let t of e.filters)if(t instanceof oi)return!1;return!0}function Jm(e){if(e instanceof Mt)return e.field.canonicalString()+e.op.toString()+ts(e.value);if(GI(e))return e.filters.map(t=>Jm(t)).join(",");{let t=e.filters.map(n=>Jm(n)).join(",");return`${e.op}(${t})`}}function KI(e,t){return e instanceof Mt?function(i,r){return r instanceof Mt&&i.op===r.op&&i.field.isEqual(r.field)&&on(i.value,r.value)}(e,t):e instanceof oi?function(i,r){return r instanceof oi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&KI(o,r.filters[a]),!0):!1}(e,t):void z()}function YI(e){return e instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ts(n.value)}`}(e):e instanceof oi?function(n){return n.op.toString()+" {"+n.getFilters().map(YI).join(" ,")+"}"}(e):"Filter"}var tp=class extends Mt{constructor(t,n,i){super(t,n,i),this.key=j.fromName(i.referenceValue)}matches(t){let n=j.comparator(t.key,this.key);return this.matchesComparison(n)}},ep=class extends Mt{constructor(t,n){super(t,"in",n),this.keys=QI("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},np=class extends Mt{constructor(t,n){super(t,"not-in",n),this.keys=QI("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function QI(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>j.fromName(i.referenceValue))}var ip=class extends Mt{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return sg(n)&&fa(n.arrayValue,this.value)}},rp=class extends Mt{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&fa(this.value.arrayValue,n)}},sp=class extends Mt{constructor(t,n){super(t,"not-in",n)}matches(t){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!fa(this.value.arrayValue,n)}},op=class extends Mt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>fa(this.value.arrayValue,i))}};var ap=class{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function AI(e,t=null,n=[],i=[],r=null,s=null,o=null){return new ap(e,t,n,i,r,s,o)}function og(e){let t=ut(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Jm(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ig(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ts(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ts(i)).join(",")),t.ue=n}return t.ue}function ag(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vM(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!KI(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!CI(e.startAt,t.startAt)&&CI(e.endAt,t.endAt)}var rs=class{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function yM(e,t,n,i,r,s,o,a){return new rs(e,t,n,i,r,s,o,a)}function wM(e){return new rs(e)}function SI(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function IM(e){return e.collectionGroup!==null}function la(e){let t=ut(e);if(t.ce===null){t.ce=[];let n=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ee(me.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new is(s,i))}),n.has(me.keyField().canonicalString())||t.ce.push(new is(me.keyField(),i))}return t.ce}function Wi(e){let t=ut(e);return t.le||(t.le=EM(t,la(e))),t.le}function EM(e,t){if(e.limitType==="F")return AI(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new is(r.field,s)});let n=e.endAt?new ns(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ns(e.startAt.position,e.startAt.inclusive):null;return AI(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function cp(e,t,n){return new rs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function XI(e,t){return ag(Wi(e),Wi(t))&&e.limitType===t.limitType}function ZI(e){return`${og(Wi(e))}|lt:${e.limitType}`}function aa(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YI(r)).join(", ")}]`),ig(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ts(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ts(r)).join(",")),`Target(${i})`}(Wi(e))}; limitType=${e.limitType})`}function cg(e,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):j.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(let s of la(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=TI(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,la(i),r)||i.endAt&&!function(o,a,c){let l=TI(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,la(i),r))}(e,t)}function TM(e){return(t,n)=>{let i=!1;for(let r of la(e)){let s=CM(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function CM(e,t,n){let i=e.field.isKeyField()?j.comparator(t.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Jr(c,l):z()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return z()}}var ai=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ga(this.inner,(n,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return zI(this.inner)}size(){return this.innerSize}};var AM=new pe(j.comparator);function nu(){return AM}var JI=new pe(j.comparator);function Wl(...e){let t=JI;for(let n of e)t=t.insert(n.key,n);return t}function tE(e){let t=JI;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function qi(){return ua()}function eE(){return ua()}function ua(){return new ai(e=>e.toString(),(e,t)=>e.isEqual(t))}var SM=new pe(j.comparator),RM=new ee(j.comparator);function Kt(...e){let t=RM;for(let n of e)t=t.add(n);return t}var DM=new ee(st);function xM(){return DM}function nE(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ha(t)?"-0":t}}function iE(e){return{integerValue:""+e}}function kM(e,t){return fM(t)?iE(t):nE(e,t)}var ss=class{constructor(){this._=void 0}};function PM(e,t,n){return e instanceof os?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&rg(s)&&(s=$I(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof Qi?sE(e,t):e instanceof Xi?oE(e,t):function(r,s){let o=rE(r,s),a=RI(o)+RI(r.Pe);return Zm(o)&&Zm(r.Pe)?iE(a):nE(r.serializer,a)}(e,t)}function NM(e,t,n){return e instanceof Qi?sE(e,t):e instanceof Xi?oE(e,t):n}function rE(e,t){return e instanceof as?function(i){return Zm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var os=class extends ss{},Qi=class extends ss{constructor(t){super(),this.elements=t}};function sE(e,t){let n=aE(t);for(let i of e.elements)n.some(r=>on(r,i))||n.push(i);return{arrayValue:{values:n}}}var Xi=class extends ss{constructor(t){super(),this.elements=t}};function oE(e,t){let n=aE(t);for(let i of e.elements)n=n.filter(r=>!on(r,i));return{arrayValue:{values:n}}}var as=class extends ss{constructor(t,n){super(),this.serializer=t,this.Pe=n}};function RI(e){return Rt(e.integerValue||e.doubleValue)}function aE(e){return sg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function OM(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Qi&&r instanceof Qi||i instanceof Xi&&r instanceof Xi?Qr(i.elements,r.elements,on):i instanceof as&&r instanceof as?on(i.Pe,r.Pe):i instanceof os&&r instanceof os}(e.transform,t.transform)}var lp=class{constructor(t,n){this.version=t,this.transformResults=n}},Hi=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Kl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var cs=class{};function cE(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new iu(e.key,Hi.none()):new Zi(e.key,e.data,Hi.none());{let n=e.data,i=nn.empty(),r=new ee(me.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Sn(e.key,i,new rn(r.toArray()),Hi.none())}}function MM(e,t,n){e instanceof Zi?function(r,s,o){let a=r.value.clone(),c=xI(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Sn?function(r,s,o){if(!Kl(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=xI(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(lE(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function da(e,t,n,i){return e instanceof Zi?function(s,o,a,c){if(!Kl(s.precondition,o))return a;let l=s.value.clone(),u=kI(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,i):e instanceof Sn?function(s,o,a,c){if(!Kl(s.precondition,o))return a;let l=kI(s.fieldTransforms,c,o),u=o.data;return u.setAll(lE(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return Kl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function FM(e,t){let n=null;for(let i of e.fieldTransforms){let r=t.data.field(i.field),s=rE(i.transform,r||null);s!=null&&(n===null&&(n=nn.empty()),n.set(i.field,s))}return n||null}function DI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Qr(i,r,(s,o)=>OM(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Zi=class extends cs{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Sn=class extends cs{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function lE(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=e.data.field(n);t.set(n,i)}}),t}function xI(e,t,n){let i=new Map;Ft(e.length===n.length);for(let r=0;r<n.length;r++){let s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,NM(o,a,n[r]))}return i}function kI(e,t,n){let i=new Map;for(let r of e){let s=r.transform,o=n.data.field(r.field);i.set(r.field,PM(s,o,t))}return i}var iu=class extends cs{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},up=class extends cs{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dp=class{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&MM(s,t,i[r])}}applyToLocalView(t,n){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(n=da(i,t,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(n=da(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let i=eE();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=cE(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(wt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Kt())}isEqual(t){return this.batchId===t.batchId&&Qr(this.mutations,t.mutations,(n,i)=>DI(n,i))&&Qr(this.baseMutations,t.baseMutations,(n,i)=>DI(n,i))}},hp=class e{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Ft(t.mutations.length===i.length);let r=function(){return SM}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new e(t,n,i,r)}};var fp=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Et,W;function LM(e){switch(e){default:return z();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function VM(e){if(e===void 0)return Ki("GRPC error has no .code"),v.UNKNOWN;switch(e){case Et.OK:return v.OK;case Et.CANCELLED:return v.CANCELLED;case Et.UNKNOWN:return v.UNKNOWN;case Et.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Et.INTERNAL:return v.INTERNAL;case Et.UNAVAILABLE:return v.UNAVAILABLE;case Et.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Et.NOT_FOUND:return v.NOT_FOUND;case Et.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Et.ABORTED:return v.ABORTED;case Et.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Et.DATA_LOSS:return v.DATA_LOSS;default:return z()}}(W=Et||(Et={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var l$=new yI([4294967295,4294967295],0);var mp=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function pp(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function UM(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jM(e,t){return pp(e,t.toTimestamp())}function Yr(e){return Ft(!!e),wt.fromTimestamp(function(n){let i=si(n);return new Yt(i.seconds,i.nanos)}(e))}function uE(e,t){return gp(e,t).canonicalString()}function gp(e,t){let n=function(r){return new Ct(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function BM(e){let t=Ct.fromString(e);return Ft(YM(t)),t}function _p(e,t){return uE(e.databaseId,t.path)}function zM(e){let t=BM(e);return t.length===4?Ct.emptyPath():qM(t)}function $M(e){return new Ct(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qM(e){return Ft(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function PI(e,t,n){return{name:_p(e,t),fields:n.value.mapValue.fields}}function WM(e,t){let n;if(t instanceof Zi)n={update:PI(e,t.key,t.value)};else if(t instanceof iu)n={delete:_p(e,t.key)};else if(t instanceof Sn)n={update:PI(e,t.key,t.data),updateMask:KM(t.fieldMask)};else{if(!(t instanceof up))return z();n={verify:_p(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof os)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof as)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw z()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:jM(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(e,t.precondition)),n}function HM(e,t){return e&&e.length>0?(Ft(t!==void 0),e.map(n=>function(r,s){let o=r.updateTime?Yr(r.updateTime):Yr(s);return o.isEqual(wt.min())&&(o=Yr(s)),new lp(o,r.transformResults||[])}(n,t))):[]}function GM(e){let t=zM(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Ft(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=dE(d);return h instanceof oi&&GI(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new is(Gr(g.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ig(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,m=d.values||[];return new ns(m,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,m=d.values||[];return new ns(m,h)}(n.endAt)),yM(t,r,o,s,a,"F",c,l)}function dE(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Gr(n.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Gr(n.unaryFilter.field);return Mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Gr(n.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Gr(n.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(e):e.fieldFilter!==void 0?function(n){return Mt.create(Gr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return oi.create(n.compositeFilter.filters.map(i=>dE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(e):z()}function Gr(e){return me.fromServerFormat(e.fieldPath)}function KM(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function YM(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var vp=class{constructor(t){this.ut=t}};function QM(e){let t=GM({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?cp(t,t.limit,"L"):t}var ru=class{constructor(){}ht(t,n){this.Pt(t,n),n.It()}Pt(t,n){if("nullValue"in t)this.Tt(n,5);else if("booleanValue"in t)this.Tt(n,10),n.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(n,15),n.Et(Rt(t.integerValue));else if("doubleValue"in t){let i=Rt(t.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),ha(i)?n.Et(0):n.Et(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Tt(n,20),typeof i=="string"&&(i=si(i)),n.dt(`${i.seconds||""}`),n.Et(i.nanos||0)}else if("stringValue"in t)this.At(t.stringValue,n),this.Rt(n);else if("bytesValue"in t)this.Tt(n,30),n.Vt(Xr(t.bytesValue)),this.Rt(n);else if("referenceValue"in t)this.ft(t.referenceValue,n);else if("geoPointValue"in t){let i=t.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in t?qI(t)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,n),this.Rt(n)):"arrayValue"in t?(this.yt(t.arrayValue,n),this.Rt(n)):z()}At(t,n){this.Tt(n,25),this.wt(t,n)}wt(t,n){n.dt(t)}gt(t,n){let i=t.fields||{};this.Tt(n,55);for(let r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(t,n){let i=t.values||[];this.Tt(n,50);for(let r of i)this.Pt(r,n)}ft(t,n){this.Tt(n,37),j.fromName(t).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(t,n){t.Et(n)}Rt(t){t.Et(2)}};ru.St=new ru;var bp=class{constructor(){this.on=new yp}addToCollectionParentIndex(t,n){return this.on.add(n),b.resolve()}getCollectionParents(t,n){return b.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return b.resolve()}deleteFieldIndex(t,n){return b.resolve()}deleteAllFieldIndexes(t){return b.resolve()}createTargetIndexes(t,n){return b.resolve()}getDocumentsMatchingTarget(t,n){return b.resolve(null)}getIndexType(t,n){return b.resolve(0)}getFieldIndexes(t,n){return b.resolve([])}getNextCollectionGroupToUpdate(t){return b.resolve(null)}getMinOffset(t,n){return b.resolve(Yi.min())}getMinOffsetFromCollectionGroup(t,n){return b.resolve(Yi.min())}updateCollectionGroup(t,n,i){return b.resolve()}updateIndexEntries(t,n){return b.resolve()}},yp=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ee(Ct.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){let n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ee(Ct.comparator)).toArray()}};var u$=new Uint8Array(0);var en=class e{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var ma=class e{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new e(0)}static Nn(){return new e(-1)}};var wp=class{constructor(){this.changes=new ai(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,es.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?b.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Ip=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var Ep=class{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&da(i.mutation,r,rn.empty(),Yt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Kt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Kt()){let r=qi();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=Wl();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){let i=qi();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Kt()))}populateOverlays(t,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=nu(),o=ua(),a=function(){return ua()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof Sn)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),da(u.mutation,l,u.mutation.getFieldMask(),Yt.now())):o.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Ip(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){let i=ua(),r=new pe((o,a)=>o-a),s=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||rn.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||Kt()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=eE();u.forEach(h=>{if(!s.has(h)){let m=cE(n.get(h),i.get(h));m!==null&&d.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,d))}return b.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):IM(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):b.resolve(qi()),a=-1,c=s;return o.next(l=>b.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?b.resolve():this.remoteDocumentCache.getEntry(t,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,c,l,Kt())).next(u=>({batchId:a,changes:tE(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new j(n)).next(i=>{let r=Wl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){let s=n.collectionGroup,o=Wl();return this.indexManager.getCollectionParents(t,s).next(a=>b.forEach(a,c=>{let l=function(d,h){return new rs(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,es.newInvalidDocument(u)))});let a=Wl();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&da(u.mutation,l,rn.empty(),Yt.now()),cg(n,l)&&(a=a.insert(c,l))}),a})}};var Tp=class{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return b.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Yr(r.createTime)}}(n)),b.resolve()}getNamedQuery(t,n){return b.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(r){return{name:r.name,query:QM(r.bundledQuery),readTime:Yr(r.readTime)}}(n)),b.resolve()}};var Cp=class{constructor(){this.overlays=new pe(j.comparator),this.lr=new Map}getOverlay(t,n){return b.resolve(this.overlays.get(n))}getOverlays(t,n){let i=qi();return b.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.lt(t,n,s)}),b.resolve()}removeOverlaysForBatchId(t,n,i){let r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),b.resolve()}getOverlaysForCollection(t,n,i){let r=qi(),s=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return b.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new pe((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=qi(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=qi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return b.resolve(a)}lt(t,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new fp(n,i));let s=this.lr.get(n);s===void 0&&(s=Kt(),this.lr.set(n,s)),this.lr.set(n,s.add(i.key))}};var pa=class{constructor(){this.hr=new ee(Tt.Pr),this.Ir=new ee(Tt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){let i=new Tt(t,n);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.dr(new Tt(t,n))}Ar(t,n){t.forEach(i=>this.removeReference(i,n))}Rr(t){let n=new j(new Ct([])),i=new Tt(n,t),r=new Tt(n,t+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){let n=new j(new Ct([])),i=new Tt(n,t),r=new Tt(n,t+1),s=Kt();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){let n=new Tt(t,0),i=this.hr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}},Tt=class{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return j.comparator(t.key,n.key)||st(t.gr,n.gr)}static Tr(t,n){return st(t.gr,n.gr)||j.comparator(t.key,n.key)}};var Ap=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ee(Tt.Pr)}checkEmpty(t){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new dp(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.yr=this.yr.add(new Tt(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(t,n){return b.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){let i=n+1,r=this.Sr(i),s=r<0?0:r;return b.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let i=new Tt(n,0),r=new Tt(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{let a=this.wr(o.gr);s.push(a)}),b.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ee(st);return n.forEach(r=>{let s=new Tt(r,0),o=new Tt(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),b.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,r=i.length+1,s=i;j.isDocumentKey(s)||(s=s.child(""));let o=new Tt(new j(s),0),a=new ee(st);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.gr)),!0)},o),b.resolve(this.br(a))}br(t){let n=[];return t.forEach(i=>{let r=this.wr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Ft(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return b.forEach(n.mutations,r=>{let s=new Tt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.yr=i})}Fn(t){}containsKey(t,n){let i=new Tt(n,0),r=this.yr.firstAfterOrEqual(i);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,b.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){let n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Sp=class{constructor(t){this.Cr=t,this.docs=function(){return new pe(j.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let i=this.docs.get(n);return b.resolve(i?i.document.mutableCopy():es.newInvalidDocument(n))}getEntries(t,n){let i=nu();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():es.newInvalidDocument(r))}),b.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=nu(),o=n.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||lM(cM(u),i)<=0||(r.has(u.key)||cg(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return b.resolve(s)}getAllFromCollectionGroup(t,n,i,r){z()}vr(t,n){return b.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new Rp(this)}getSize(t){return b.resolve(this.size)}},Rp=class extends wp{constructor(t){super(),this._r=t}applyChanges(t){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this._r.addEntry(t,r)):this._r.removeEntry(i)}),b.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}};var Dp=class{constructor(t){this.persistence=t,this.Fr=new ai(n=>og(n),ag),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new pa,this.targetCount=0,this.Nr=ma.On()}forEachTarget(t,n){return this.Fr.forEach((i,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(t){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return b.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Mr&&(this.Mr=n),b.resolve()}kn(t){this.Fr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Nr=new ma(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,b.resolve()}updateTargetData(t,n){return this.kn(n),b.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(t,n,i){let r=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),b.waitFor(s).next(()=>r)}getTargetCount(t){return b.resolve(this.targetCount)}getTargetData(t,n){let i=this.Fr.get(n)||null;return b.resolve(i)}addMatchingKeys(t,n,i){return this.Or.Er(n,i),b.resolve()}removeMatchingKeys(t,n,i){this.Or.Ar(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),b.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),b.resolve()}getMatchingKeysForTargetId(t,n){let i=this.Or.mr(n);return b.resolve(i)}containsKey(t,n){return b.resolve(this.Or.containsKey(n))}};var xp=class{constructor(t,n){this.Lr={},this.overlays={},this.Br=new hM(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new Dp(this),this.indexManager=new bp,this.remoteDocumentCache=function(r){return new Sp(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new vp(n),this.Kr=new Tp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Cp,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Lr[t.toKey()];return i||(i=new Ap(n,this.referenceDelegate),this.Lr[t.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,i){A("MemoryPersistence","Starting transaction:",t);let r=new kp(this.Br.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(t,n){return b.or(Object.values(this.Lr).map(i=>()=>i.containsKey(t,n)))}},kp=class extends Gm{constructor(t){super(),this.currentSequenceNumber=t}},Pp=class e{constructor(t){this.persistence=t,this.Gr=new pa,this.zr=null}static jr(t){return new e(t)}get Hr(){if(this.zr)return this.zr;throw z()}addReference(t,n,i){return this.Gr.addReference(i,n),this.Hr.delete(i.toString()),b.resolve()}removeReference(t,n,i){return this.Gr.removeReference(i,n),this.Hr.add(i.toString()),b.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),b.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(r=>this.Hr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.Hr,i=>{let r=j.fromPath(i);return this.Jr(t,r).next(s=>{s||n.removeEntry(r,wt.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(i=>{i?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return b.or([()=>b.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}};var Np=class e{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.ki=i,this.qi=r}static Qi(t,n){let i=Kt(),r=Kt();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new e(t,n.fromCache,i,r)}};var Op=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Mp=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Tb()?8:dM(St())>0?6:4}()}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,i,r){let s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Op;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,i,r){return i.documentReadCount<this.Ui?(oa()<=U.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),b.resolve()):(oa()<=U.DEBUG&&A("QueryEngine","Query:",aa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(oa()<=U.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Wi(n))):b.resolve())}zi(t,n){if(SI(n))return b.resolve(null);let i=Wi(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=cp(n,null,"F"),i=Wi(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let o=Kt(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(c=>{let l=this.Yi(n,a);return this.Zi(n,l,o,c.readTime)?this.zi(t,cp(n,null,"F")):this.Xi(t,l,n,c)}))})))}ji(t,n,i,r){return SI(n)||r.isEqual(wt.min())?b.resolve(null):this.Gi.getDocuments(t,i).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,i,r)?b.resolve(null):(oa()<=U.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aa(n)),this.Xi(t,o,n,aM(r,-1)).next(a=>a))})}Yi(t,n){let i=new ee(TM(t));return n.forEach((r,s)=>{cg(t,s)&&(i=i.add(s))}),i}Zi(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;let s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(t,n,i){return oa()<=U.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",aa(n)),this.Gi.getDocumentsMatchingQuery(t,n,Yi.min(),i)}Xi(t,n,i,r){return this.Gi.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Fp=class{constructor(t,n,i,r){this.persistence=t,this.es=n,this.serializer=r,this.ts=new pe(st),this.ns=new ai(s=>og(s),ag),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(i)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ep(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}};function XM(e,t,n,i){return new Fp(e,t,n,i)}function hE(e,t){return f(this,null,function*(){let n=ut(e);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.os(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=Kt();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})})}function ZM(e,t){let n=ut(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),m=b.resolve();return h.forEach(g=>{m=m.next(()=>u.getEntry(c,g)).next(E=>{let S=l.docVersions.get(g);Ft(S!==null),E.version.compareTo(S)<0&&(d.applyToRemoteDocument(E,l),E.isValidDocument()&&(E.setReadTime(l.commitVersion),u.addEntry(E)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=Kt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function JM(e){let t=ut(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function t1(e,t){let n=ut(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}var su=class{constructor(){this.activeTargetIds=xM()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Lp=class{constructor(){this.eo=new su,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,i){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new su,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Vp=class{ro(t){}shutdown(){}};var ou=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ao)t(0)}_o(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hl=null;function Fm(){return Hl===null?Hl=function(){return 268435456+Math.round(2147483648*Math.random())}():Hl++,"0x"+Hl.toString(16)}var e1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Up=class{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}Eo(t){this.Ao=t}onMessage(t){this.Ro=t}close(){this.lo()}send(t){this.co(t)}Vo(){this.Po()}mo(){this.To()}fo(t){this.Ao(t)}po(t){this.Ro(t)}};var Gt="WebChannelConnection",jp=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=i+"://"+n.host,this.wo=`projects/${r}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get bo(){return!1}Do(n,i,r,s,o){let a=Fm(),c=this.Co(n,i.toUriEncodedString());A("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(l,s,o),this.Fo(n,c,l,r).then(u=>(A("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Yl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}Mo(n,i,r,s,o,a){return this.Do(n,i,r,s,o)}vo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}Co(n,i){let r=e1[n];return`${this.yo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Fo(t,n,i,r){let s=Fm();return new Promise((o,a)=>{let c=new bI;c.setWithCredentials(!0),c.listenOnce(gI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $l.NO_ERROR:let u=c.getResponseJson();A(Gt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case $l.TIMEOUT:A(Gt,`RPC '${t}' ${s} timed out`),a(new k(v.DEADLINE_EXCEEDED,"Request time out"));break;case $l.HTTP_ERROR:let d=c.getStatus();if(A(Gt,`RPC '${t}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let m=h?.error;if(m&&m.status&&m.message){let g=function(S){let K=S.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(K)>=0?K:v.UNKNOWN}(m.status);a(new k(g,m.message))}else a(new k(v.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(v.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{A(Gt,`RPC '${t}' ${s} completed.`)}});let l=JSON.stringify(r);A(Gt,`RPC '${t}' ${s} sending request:`,r),c.send(n,"POST",l,i,15)})}xo(t,n,i){let r=Fm(),s=[this.yo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=mI(),a=pI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new vI({})),this.vo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=s.join("");A(Gt,`Creating RPC '${t}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,m=!1,g=new Up({co:S=>{m?A(Gt,`Not sending because RPC '${t}' stream ${r} is closed:`,S):(h||(A(Gt,`Opening RPC '${t}' stream ${r} transport.`),d.open(),h=!0),A(Gt,`RPC '${t}' stream ${r} sending:`,S),d.send(S))},lo:()=>d.close()}),E=(S,K,ot)=>{S.listen(K,$t=>{try{ot($t)}catch(_e){setTimeout(()=>{throw _e},0)}})};return E(d,sa.EventType.OPEN,()=>{m||(A(Gt,`RPC '${t}' stream ${r} transport opened.`),g.Vo())}),E(d,sa.EventType.CLOSE,()=>{m||(m=!0,A(Gt,`RPC '${t}' stream ${r} transport closed`),g.fo())}),E(d,sa.EventType.ERROR,S=>{m||(m=!0,Yl(Gt,`RPC '${t}' stream ${r} transport errored:`,S),g.fo(new k(v.UNAVAILABLE,"The operation could not be completed")))}),E(d,sa.EventType.MESSAGE,S=>{var K;if(!m){let ot=S.data[0];Ft(!!ot);let $t=ot,_e=$t.error||((K=$t[0])===null||K===void 0?void 0:K.error);if(_e){A(Gt,`RPC '${t}' stream ${r} received error:`,_e);let Cs=_e.status,di=function(Ss){let Ua=Et[Ss];if(Ua!==void 0)return VM(Ua)}(Cs),As=_e.message;di===void 0&&(di=v.INTERNAL,As="Unknown error status: "+Cs+" with message "+_e.message),m=!0,g.fo(new k(di,As)),d.close()}else A(Gt,`RPC '${t}' stream ${r} received:`,ot),g.po(ot)}}),E(a,_I.STAT_EVENT,S=>{S.stat===Mm.PROXY?A(Gt,`RPC '${t}' stream ${r} detected buffering proxy`):S.stat===Mm.NOPROXY&&A(Gt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.mo()},0),g}};function Lm(){return typeof document<"u"?document:null}function _u(e){return new mp(e,!0)}var au=class{constructor(t,n,i=1e3,r=1.5,s=6e4){this.si=t,this.timerId=n,this.Oo=i,this.No=r,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(t){this.cancel();let n=Math.floor(this.Bo+this.$o()),i=Math.max(0,Date.now()-this.qo),r=Math.max(0,n-i);r>0&&A("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.qo=Date.now(),t())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Bp=class{constructor(t,n,i,r,s,o,a,c){this.si=t,this.Wo=i,this.Go=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new au(t,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return f(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(t){this.i_(),this.stream.send(t)}n_(){return f(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(t,n){return f(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,t!==4?this.Jo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let t=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.zo===n&&this.a_(i,r)},i=>{t(()=>{let r=new k(v.UNKNOWN,"Fetching auth token failed: "+i.message);return this.u_(r)})})}a_(t,n){let i=this.__(this.zo);this.stream=this.c_(t,n),this.stream.ho(()=>{i(()=>this.listener.ho())}),this.stream.Io(()=>{i(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(r=>{i(()=>this.u_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Xo(){this.state=5,this.Jo.Ko(()=>f(this,null,function*(){this.state=0,this.start()}))}u_(t){return A("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}__(t){return n=>{this.si.enqueueAndForget(()=>this.zo===t?n():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var zp=class extends Bp{constructor(t,n,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(t,n){return this.connection.xo("Write",t,n)}onMessage(t){if(Ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.I_){this.Jo.reset();let n=HM(t.writeResults,t.commitTime),i=Yr(t.commitTime);return this.listener.d_(i,n)}return Ft(!t.writeResults||t.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let t={};t.database=$M(this.serializer),this.r_(t)}E_(t){let n={streamToken:this.lastStreamToken,writes:t.map(i=>WM(this.serializer,i))};this.r_(n)}};var $p=class extends class{}{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new k(v.FAILED_PRECONDITION,"The client has already been terminated.")}Do(t,n,i,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(t,gp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(v.UNKNOWN,s.toString())})}Mo(t,n,i,r,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(t,gp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(v.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var qp=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ki(n),this.y_=!1):A("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Wp=class{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{i.enqueueAndForget(()=>f(this,null,function*(){va(this)&&(A("RemoteStore","Restarting streams for network reachability change."),yield function(c){return f(this,null,function*(){let l=ut(c);l.M_.add(4),yield _a(l),l.N_.set("Unknown"),l.M_.delete(4),yield vu(l)})}(this))}))}),this.N_=new qp(i,r)}};function vu(e){return f(this,null,function*(){if(va(e))for(let t of e.x_)yield t(!0)})}function _a(e){return f(this,null,function*(){for(let t of e.x_)yield t(!1)})}function va(e){return ut(e).M_.size===0}function fE(e,t,n){return f(this,null,function*(){if(!gu(t))throw t;e.M_.add(1),yield _a(e),e.N_.set("Offline"),n||(n=()=>JM(e.localStore)),e.asyncQueue.enqueueRetryable(()=>f(this,null,function*(){A("RemoteStore","Retrying IndexedDB access"),yield n(),e.M_.delete(1),yield vu(e)}))})}function mE(e,t){return t().catch(n=>fE(e,n,t))}function bu(e){return f(this,null,function*(){let t=ut(e),n=ci(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;n1(t);)try{let r=yield t1(t.localStore,i);if(r===null){t.v_.length===0&&n.t_();break}i=r.batchId,i1(t,r)}catch(r){yield fE(t,r)}pE(t)&&gE(t)})}function n1(e){return va(e)&&e.v_.length<10}function i1(e,t){e.v_.push(t);let n=ci(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function pE(e){return va(e)&&!ci(e).Yo()&&e.v_.length>0}function gE(e){ci(e).start()}function r1(e){return f(this,null,function*(){ci(e).R_()})}function s1(e){return f(this,null,function*(){let t=ci(e);for(let n of e.v_)t.E_(n.mutations)})}function o1(e,t,n){return f(this,null,function*(){let i=e.v_.shift(),r=hp.from(i,t,n);yield mE(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),yield bu(e)})}function a1(e,t){return f(this,null,function*(){t&&ci(e).T_&&(yield function(i,r){return f(this,null,function*(){if(function(o){return LM(o)&&o!==v.ABORTED}(r.code)){let s=i.v_.shift();ci(i).e_(),yield mE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield bu(i)}})}(e,t)),pE(e)&&gE(e)})}function NI(e,t){return f(this,null,function*(){let n=ut(e);n.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");let i=va(n);n.M_.add(3),yield _a(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),yield vu(n)})}function c1(e,t){return f(this,null,function*(){let n=ut(e);t?(n.M_.delete(2),yield vu(n)):t||(n.M_.add(2),yield _a(n),n.N_.set("Unknown"))})}function ci(e){return e.k_||(e.k_=function(n,i,r){let s=ut(n);return s.m_(),new zp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:r1.bind(null,e),Eo:a1.bind(null,e),A_:s1.bind(null,e),d_:o1.bind(null,e)}),e.x_.push(t=>f(this,null,function*(){t?(e.k_.e_(),yield bu(e)):(yield e.k_.stop(),e.v_.length>0&&(A("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}var Hp=class e{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){let o=Date.now()+i,a=new e(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _E(e,t){if(Ki("AsyncQueue",`${t}: ${e}`),gu(e))return new k(v.UNAVAILABLE,`${t}: ${e}`);throw e}var Gp=class{constructor(){this.queries=new ai(t=>ZI(t),XI),this.onlineState="Unknown",this.z_=new Set}};function l1(e){e.z_.forEach(t=>{t.next()})}var OI,MI;(MI=OI||(OI={})).J_="default",MI.Cache="cache";var Kp=class{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ai(a=>ZI(a),XI),this.Da=new Map,this.Ca=new Set,this.va=new pe(j.comparator),this.Fa=new Map,this.Ma=new pa,this.xa={},this.Oa=new Map,this.Na=ma.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function u1(e,t,n){return f(this,null,function*(){let i=m1(e);try{let r=yield function(o,a){let c=ut(o),l=Yt.now(),u=a.reduce((m,g)=>m.add(g.key),Kt()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=nu(),E=Kt();return c.ss.getEntries(m,u).next(S=>{g=S,g.forEach((K,ot)=>{ot.isValidDocument()||(E=E.add(K))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(S=>{d=S;let K=[];for(let ot of a){let $t=FM(ot,d.get(ot.key).overlayedDocument);$t!=null&&K.push(new Sn(ot.key,$t,WI($t.value.mapValue),Hi.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,K,a)}).next(S=>{h=S;let K=S.applyToLocalDocumentSet(d,E);return c.documentOverlayCache.saveOverlays(m,S.batchId,K)})}).then(()=>({batchId:h.batchId,changes:tE(d)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new pe(st)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(i,r.batchId,n),yield yu(i,r.changes),yield bu(i.remoteStore)}catch(r){let s=_E(r,"Failed to persist write");n.reject(s)}})}function FI(e,t,n){let i=ut(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((s,o)=>{let a=o.view.j_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=ut(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.U_)h.j_(a)&&(l=!0)}),l&&l1(c)}(i.eventManager,t),r.length&&i.Sa.l_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function d1(e,t){return f(this,null,function*(){let n=ut(e),i=t.batch.batchId;try{let r=yield ZM(n.localStore,t);bE(n,i,null),vE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield yu(n,r)}catch(r){yield BI(r)}})}function h1(e,t,n){return f(this,null,function*(){let i=ut(e);try{let r=yield function(o,a){let c=ut(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Ft(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,t);bE(i,t,n),vE(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield yu(i,r)}catch(r){yield BI(r)}})}function vE(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function bE(e,t,n){let i=ut(e),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function yu(e,t,n){return f(this,null,function*(){let i=ut(e),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{o.push(i.Ba(c,t,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=Np.Qi(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.Sa.l_(r),yield function(c,l){return f(this,null,function*(){let u=ut(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>b.forEach(l,h=>b.forEach(h.ki,m=>u.persistence.referenceDelegate.addReference(d,h.targetId,m)).next(()=>b.forEach(h.qi,m=>u.persistence.referenceDelegate.removeReference(d,h.targetId,m)))))}catch(d){if(!gu(d))throw d;A("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let m=u.ts.get(h),g=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(g);u.ts=u.ts.insert(h,E)}}})}(i.localStore,s))})}function f1(e,t){return f(this,null,function*(){let n=ut(e);if(!n.currentUser.isEqual(t)){A("SyncEngine","User change. New user:",t.toKey());let i=yield hE(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new k(v.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield yu(n,i._s)}})}function m1(e){let t=ut(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=d1.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=h1.bind(null,t),t}var cu=class{constructor(){this.synchronizeTabs=!1}initialize(t){return f(this,null,function*(){this.serializer=_u(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return XM(this.persistence,new Mp,t.initialUser,this.serializer)}createPersistence(t){return new xp(Pp.jr,this.serializer)}createSharedClientState(t){return new Lp}terminate(){return f(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Yp=class{initialize(t,n){return f(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=f1.bind(null,this.syncEngine),yield c1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Gp}()}createDatastore(t){let n=_u(t.databaseInfo.databaseId),i=function(s){return new jp(s)}(t.databaseInfo);return function(s,o,a,c){return new $p(s,o,a,c)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new Wp(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>FI(this.syncEngine,n,0),function(){return ou.D()?new ou:new Vp}())}createSyncEngine(t,n){return function(r,s,o,a,c,l,u){let d=new Kp(r,s,o,a,c,l);return u&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return f(this,null,function*(){var t;yield function(i){return f(this,null,function*(){let r=ut(i);A("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield _a(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var Qp=class{constructor(t,n,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=Xl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>f(this,null,function*(){A("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(A("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>f(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let i=_E(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Vm(e,t){return f(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(r=>f(this,null,function*(){i.isEqual(r)||(yield hE(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function LI(e,t){return f(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield g1(e);A("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>NI(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>NI(t.remoteStore,r)),e._onlineComponents=t})}function p1(e){return e.name==="FirebaseError"?e.code===v.FAILED_PRECONDITION||e.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function g1(e){return f(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){A("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vm(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!p1(n))throw n;Yl("Error using user provided cache. Falling back to memory cache: "+n),yield Vm(e,new cu)}}else A("FirestoreClient","Using default OfflineComponentProvider"),yield Vm(e,new cu);return e._offlineComponents})}function _1(e){return f(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(A("FirestoreClient","Using user provided OnlineComponentProvider"),yield LI(e,e._uninitializedComponentsProvider._online)):(A("FirestoreClient","Using default OnlineComponentProvider"),yield LI(e,new Yp))),e._onlineComponents})}function v1(e){return _1(e).then(t=>t.syncEngine)}function yE(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var VI=new Map;function wE(e,t,n){if(!n)throw new k(v.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function b1(e,t,n,i){if(t===!0&&i===!0)throw new k(v.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function UI(e){if(!j.isDocumentKey(e))throw new k(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jI(e){if(j.isDocumentKey(e))throw new k(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function lg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":z()}function IE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new k(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=lg(e);throw new k(v.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}var lu=class{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new k(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new k(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}b1("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(v.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},ls=class{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new k(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lu(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Um;switch(i.type){case"firstParty":return new $m(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new k(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=VI.get(n);i&&(A("ComponentProvider","Removing Datastore"),VI.delete(n),i.terminate())}(this),Promise.resolve()}};function EE(e,t,n,i={}){var r;let s=(e=IE(e,ls))._getSettings(),o=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Ot.MOCK_USER;else{a=Rc(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new k(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ot(l)}e._authCredentials=new jm(new Ql(a,c))}}var Xp=class e{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},An=class e{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},ii=class e extends Xp{constructor(t,n,i){super(t,n,wM(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new An(this.firestore,null,new j(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function TE(e,t,...n){if(e=jt(e),wE("collection","path",t),e instanceof ls){let i=Ct.fromString(t,...n);return jI(i),new ii(e,null,i)}{if(!(e instanceof An||e instanceof ii))throw new k(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(Ct.fromString(t,...n));return jI(i),new ii(e.firestore,null,i)}}function CE(e,t,...n){if(e=jt(e),arguments.length===1&&(t=Xl.newId()),wE("doc","path",t),e instanceof ls){let i=Ct.fromString(t,...n);return UI(i),new An(e,null,new j(i))}{if(!(e instanceof An||e instanceof ii))throw new k(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(Ct.fromString(t,...n));return UI(i),new An(e.firestore,e instanceof ii?e.converter:null,new j(i))}}var Zp=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new au(this,"async_queue_retry"),this.hu=()=>{let n=Lm();n&&A("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let t=Lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Cn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return f(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(t){if(!gu(t))throw t;A("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(t){let n=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ki("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(t,n,i){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);let r=Hp.createAndSchedule(this,t,n,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&z()}verifyOperationInProgress(){}du(){return f(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let n=this._u.indexOf(t);this._u.splice(n,1)}};var uu=class extends ls{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=function(){return new Zp}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SE(this),this._firestoreClient.terminate()}};function AE(e,t){let n=typeof e=="object"?e:qn(),i=typeof e=="string"?e:t||"(default)",r=Ai(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Sc("firestore");s&&EE(r,...s)}return r}function y1(e){return e._firestoreClient||SE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function SE(e){var t,n,i;let r=e._freezeSettings(),s=function(a,c,l,u){return new Ym(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yE(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new Qp(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var du=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(ri.fromBase64String(t))}catch(n){throw new k(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(ri.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var hu=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new k(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var fu=class{constructor(t){this._methodName=t}};var mu=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new k(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new k(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return st(this._lat,t._lat)||st(this._long,t._long)}};var w1=/^__.*__$/,Jp=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Sn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zi(t,this.data,n,this.fieldTransforms)}};function RE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var tg=class e{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return pu(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(RE(this.fu)&&w1.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},eg=class{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||_u(t)}Fu(t,n,i,r=!1){return new tg({fu:t,methodName:n,vu:i,path:me.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function I1(e){let t=e._freezeSettings(),n=_u(e._databaseId);return new eg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function E1(e,t,n,i,r,s={}){let o=e.Fu(s.merge||s.mergeFields?2:0,t,n,r);PE("Data must be an object, but it was:",o,i);let a=xE(i,o),c,l;if(s.merge)c=new rn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=T1(t,d,n);if(!o.contains(h))throw new k(v.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);S1(u,h)||u.push(h)}c=new rn(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new Jp(new nn(a),c,l)}function DE(e,t){if(kE(e=jt(e)))return PE("Unsupported field value:",t,e),xE(e,t);if(e instanceof fu)return function(i,r){if(!RE(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=DE(a,r.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Yt.fromDate(i);return{timestampValue:pp(r.serializer,s)}}if(i instanceof Yt){let s=new Yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:pp(r.serializer,s)}}if(i instanceof mu)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof du)return{bytesValue:UM(r.serializer,i._byteString)};if(i instanceof An){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uE(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${lg(i)}`)}(e,t)}function xE(e,t){let n={};return zI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ga(e,(i,r)=>{let s=DE(r,t.pu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function kE(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Yt||e instanceof mu||e instanceof du||e instanceof An||e instanceof fu)}function PE(e,t,n){if(!kE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=lg(n);throw i==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+i)}}function T1(e,t,n){if((t=jt(t))instanceof hu)return t._internalPath;if(typeof t=="string")return A1(e,t);throw pu("Field path arguments must be of type string or ",e,!1,void 0,n)}var C1=new RegExp("[~\\*/\\[\\]]");function A1(e,t,n){if(t.search(C1)>=0)throw pu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hu(...t.split("."))._internalPath}catch{throw pu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function pu(e,t,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new k(v.INVALID_ARGUMENT,a+e+c)}function S1(e,t){return e.some(n=>n.isEqual(t))}function R1(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}function NE(e,t){let n=IE(e.firestore,uu),i=CE(e),r=R1(e.converter,t);return D1(n,[E1(I1(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Hi.exists(!1))]).then(()=>i)}function D1(e,t){return function(i,r){let s=new Cn;return i.asyncQueue.enqueueAndForget(()=>f(this,null,function*(){return u1(yield v1(i),r,s)})),s.promise}(y1(e),t)}(function(t,n=!0){(function(r){us=r})(Ye),Ge(new ie("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new uu(new Bm(i.getProvider("auth-internal")),new Wm(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qm(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ft(wI,"4.6.1",t),ft(wI,"4.6.1","esm2017")})();var Ji=class{constructor(t){return t}},OE="firestore",ug=class{constructor(){return Ri(OE)}};var dg=new R("angularfire2.firestore-instances");function x1(e,t){let n=xr(OE,e,t);return n&&new Ji(n)}function k1(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Ji(i)}}var P1={provide:ug,deps:[[new It,dg]]},N1={provide:Ji,useFactory:x1,deps:[[new It,dg],ke]},O1=(()=>{class e{constructor(){ft("angularfire",mn.full,"fst")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=L({type:e});static \u0275inj=F({providers:[N1,P1]})}return e})();function ME(e,...t){return{ngModule:O1,providers:[{provide:dg,useFactory:k1(e),multi:!0,deps:[D,J,Hn,pn,[new It,Ni],[new It,Wn],...t]}]}}var FE=xe(NE,!0);var LE=xe(TE,!0);var VE=xe(AE,!0);var UE='body[_ngcontent-%COMP%]{background-image:url("./media/ajedrez-IYK4L6GW.jpg");margin:0;font-family:Ubuntu,sans-serif;background-size:100% 100%;height:100vh;width:100%}img[_ngcontent-%COMP%]{width:500px;float:left;padding-top:5%;padding-left:6%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{margin:0;padding:0}.login[_ngcontent-%COMP%]{margin:0 auto;max-width:500px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:100px;color:#fff;text-align:center;font-size:350%;text-shadow:0px 5px 15px #000}.login-form[_ngcontent-%COMP%]{border:.5px solid #fff;background:#844fff75;border-radius:10px;box-shadow:0 0 10px #000}.login-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left;margin-left:40px;color:#fff}.login-form[_ngcontent-%COMP%]{box-sizing:border-box;padding-top:15px;padding-bottom:5%;margin:15% auto;text-align:center}.login[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{max-width:400px;width:80%;line-height:3em;font-family:Ubuntu,sans-serif;margin:1em 2em;border-radius:5px;border:2px solid #f2f2f2;outline:none;padding-left:10px}.login-form[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{height:30px;width:200px;background:#fff;border:1px solid #f2f2f2;border-radius:10px;color:#708090;text-transform:uppercase;font-family:Ubuntu,sans-serif;cursor:pointer}.sign-up[_ngcontent-%COMP%]{color:#f2f2f2;margin-left:-70%;cursor:pointer;text-decoration:underline}.no-access[_ngcontent-%COMP%]{color:#e86850;margin:20px 0 20px -57%;text-decoration:underline;cursor:pointer}.try-again[_ngcontent-%COMP%]{color:#f2f2f2;text-decoration:underline;cursor:pointer}@media only screen and (min-width : 150px) and (max-width : 530px){.login-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:0}.sign-up[_ngcontent-%COMP%], .no-access[_ngcontent-%COMP%]{margin:10px 0}.login-button[_ngcontent-%COMP%]{margin-bottom:10px}}.snackbar-centered[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#e86850}',jE=(()=>{let t=class t{constructor(i,r,s,o){this.router=i,this.auth=r,this._snackBar=s,this.firestore=o,this.userMail="",this.userPWD="",this.userLogueado=""}ngOnInit(){}registreLog(){let i=LE(this.firestore,"logins");console.log(i),FE(i,{fecha:new Date,user:this.userMail})}Login(){qy(this.auth,this.userMail,this.userPWD).then(i=>{i.user.email!==null?(this.registreLog(),this.userLogueado=i.user.email,this.router.navigate(["./home"])):this.mostrarError("ERROR DE AUTENTICACI\xD3N")}).catch(i=>{console.error("Error de autenticaci\xF3n:",i),this.mostrarError("ERROR DE AUTENTICACI\xD3N")})}mostrarError(i){this._snackBar.open(i,"Cerrar",{duration:3e3,verticalPosition:"bottom"})}AccesoDirecto(){console.log(this.userLogueado),this.userMail="a@gmail.com",this.userPWD="1111111"}};t.\u0275fac=function(r){return new(r||t)(T(Ie),T(vn),T(Wf),T(Ji))},t.\u0275cmp=vt({type:t,selectors:[["app-login"]],standalone:!0,features:[bt],decls:24,vars:2,consts:[["href",Ga`https://fonts.googleapis.com/css?family=Ubuntu:500`,"rel","stylesheet","type","text/css"],[1,"login"],[1,"login-header"],[1,"login-form"],["type","text","placeholder","Username","required","",3,"ngModelChange","ngModel"],["type","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["type","button","value","Login",1,"login-button",3,"click"],["type","button","value","Acceso Directo",1,"AccesoDirecto",3,"click"],[1,"sign-up"]],template:function(r,s){r&1&&(q(0,"head"),ht(1,"link",0),B(),q(2,"body")(3,"div",1)(4,"div",2)(5,"h1"),pt(6,"SALA DE JUEGOS"),B()(),q(7,"div",3)(8,"h3"),pt(9,"Username:"),B(),q(10,"input",4),od("ngModelChange",function(a){return sd(s.userMail,a)||(s.userMail=a),a}),B(),ht(11,"br"),q(12,"h3"),pt(13,"Password:"),B(),q(14,"input",5),od("ngModelChange",function(a){return sd(s.userPWD,a)||(s.userPWD=a),a}),B(),ht(15,"br"),q(16,"input",6),ce("click",function(){return s.Login()}),B(),ht(17,"br")(18,"br"),q(19,"input",7),ce("click",function(){return s.AccesoDirecto()}),B(),ht(20,"br"),q(21,"a",8),pt(22,"Sign Up!"),B(),ht(23,"br"),B()()()),r&2&&(oe(10),rd("ngModel",s.userMail),oe(4),rd("ngModel",s.userPWD))},dependencies:[fw,rl,uw,wf,yf,Ms,Zw],styles:[UE,UE]});let e=t;return e})();var BE=(()=>{let t=class t{constructor(i){this.auth=i,this.usuarioLogueado=null,this.auth.onAuthStateChanged(r=>{this.usuarioLogueado=r,console.log("servicio auth usuario logueado",r)})}getCurrentUser(){return new an(i=>{i.next(this.usuarioLogueado)})}logout(){return this.auth.signOut()}};t.\u0275fac=function(r){return new(r||t)(p(vn))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function L1(e,t){e&1&&ht(0,"div")}var zE=(()=>{let t=class t{constructor(i,r){this.router=i,this.authService=r,this.usuarioLogueado=null}ngOnInit(){this.authService.getCurrentUser().subscribe(i=>{i?this.usuarioLogueado=i?.email:this.usuarioLogueado=null})}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"])}).catch(i=>{console.error("Error al cerrar sesi\xF3n:",i)})}irAQuienSoy(){this.router.navigate(["/quien-soy"])}};t.\u0275fac=function(r){return new(r||t)(T(Ie),T(BE))},t.\u0275cmp=vt({type:t,selectors:[["app-home"]],standalone:!0,features:[bt],decls:10,vars:2,consts:[[3,"click"],[4,"ngIf"]],template:function(r,s){r&1&&(q(0,"body")(1,"p"),pt(2,"home works!"),B(),q(3,"button",0),ce("click",function(){return s.irAQuienSoy()}),pt(4,"\xBFQui\xE9n Soy?"),B(),Ue(5,L1,1,0,"div",1),q(6,"p"),pt(7),B(),q(8,"button",0),ce("click",function(){return s.logout()}),pt(9,"Cerrar sesi\xF3n"),B()()),r&2&&(oe(5),ed("ngIf",s.usuarioLogueado),oe(2),mr("Bienvenido, ",s.usuarioLogueado,""))},dependencies:[Ms,hv],styles:["body[_ngcontent-%COMP%]{background-image:url(http://cdn.wallpapersafari.com/13/6/Mpsg2b.jpg);margin:0;font-family:Ubuntu,sans-serif;background-size:100% 100%;height:100vh;width:100%}"]});let e=t;return e})();var $E=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["app-quien-soy"]],standalone:!0,features:[bt],decls:26,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["href",Ga`https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css`,"rel","stylesheet"],["id","carta",1,"container","d-flex"],[1,"card"],[1,"titulo"],["src","../../assets/images/foto.jpg","id","foto","alt","Foto",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary"],[1,"juego"],[1,"otra-card"]],template:function(r,s){r&1&&(q(0,"html",0)(1,"head"),ht(2,"meta",1)(3,"meta",2),q(4,"title"),pt(5,"Qui\xE9n Soy "),B(),ht(6,"link",3),B(),q(7,"body")(8,"div",4)(9,"div",5)(10,"h1",6),pt(11,"Quien soy"),B(),ht(12,"img",7),q(13,"div",8)(14,"h5",9),pt(15,"Evelina Aguirre"),B(),q(16,"p",10),pt(17,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum in nisi eleifend, condimentum velit nec, accumsan turpis."),B(),q(18,"a",11),pt(19,"Volver"),B()()(),q(20,"div",12)(21,"div",13)(22,"h1"),pt(23,"Descripci\xF3n del Juego:"),B(),q(24,"p"),pt(25," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quidem delectus, nemo deserunt esse commodi aperiam cum aliquid. Pariatur est, placeat saepe facere id, recusandae ex tempora ratione, eaque aspernatur totam. "),B()()()()()())},styles:['body[_ngcontent-%COMP%]{background-image:url("./media/ajedrez-IYK4L6GW.jpg");margin:0;font-family:Ubuntu,sans-serif;background-size:100% 100%;height:100vh;width:100%}.juego[_ngcontent-%COMP%]{padding-top:100px;flex:5;margin-right:20px}.card[_ngcontent-%COMP%]{width:400px}.otra-card[_ngcontent-%COMP%]{margin-left:20%;margin-top:20%;background-color:#f0f0f0;padding:20px}#carta[_ngcontent-%COMP%]{padding-top:50px}.titulo[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}#foto[_ngcontent-%COMP%]{width:100%}']});let e=t;return e})();var qE=[{path:"",redirectTo:"/Login",pathMatch:"full"},{path:"login",component:jE},{path:"home",component:zE},{path:"quien-soy",component:$E},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}];var V1="@",U1=(()=>{let t=class t{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=I(K_,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-K3FQSZWT.js")).catch(r=>{throw new _t(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new hg(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){dr()},t.\u0275prov=C({token:t,factory:t.\u0275fac});let e=t;return e})(),hg=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let n of this.replay)n(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,n){this.delegate.appendChild(t,n)}insertBefore(t,n,i,r){this.delegate.insertBefore(t,n,i,r)}removeChild(t,n,i){this.delegate.removeChild(t,n,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(t,n,i)),this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(t,n,i)),this.delegate.listen(t,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(V1)}};function WE(e="animations"){return Y_("NgAsyncAnimations"),xs([{provide:Ya,useFactory:(t,n,i)=>new U1(t,n,i,e),deps:[O,rc,D]},{provide:be,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var HE="@firebase/database",GE="1.0.4";var u_="";function j1(e){u_=e}var yg=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),kt(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Ar(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var wg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return qe(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var CT=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new yg(t)}}catch{}return new wg},er=CT("localStorage"),Ig=CT("sessionStorage");var ms=new We("@firebase/database"),B1=function(){let e=1;return function(){return e++}}(),AT=function(e){let t=kb(e),n=new Tc;n.update(t);let i=n.digest();return Cc.encodeByteArray(i)},ka=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=ka.apply(null,i):typeof i=="object"?t+=kt(i):t+=i,t+=" "}return t},nr=null,KE=!0,z1=function(e,t){y(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(ms.logLevel=U.VERBOSE,nr=ms.log.bind(ms),t&&Ig.set("logging_enabled",!0)):typeof e=="function"?nr=e:(nr=null,Ig.remove("logging_enabled"))},Qt=function(...e){if(KE===!0&&(KE=!1,nr===null&&Ig.get("logging_enabled")===!0&&z1(!0)),nr){let t=ka.apply(null,e);nr(t)}},Pa=function(e){return function(...t){Qt(e,...t)}},Eg=function(...e){let t="FIREBASE INTERNAL ERROR: "+ka(...e);ms.error(t)},Dn=function(...e){let t=`FIREBASE FATAL ERROR: ${ka(...e)}`;throw ms.error(t),new Error(t)},ge=function(...e){let t="FIREBASE WARNING: "+ka(...e);ms.warn(t)},$1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ge("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ST=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},q1=function(e){if($e()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gs="[MIN_NAME]",ir="[MAX_NAME]",Es=function(e,t){if(e===t)return 0;if(e===gs||t===ir)return-1;if(t===gs||e===ir)return 1;{let n=YE(e),i=YE(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},W1=function(e,t){return e===t?0:e<t?-1:1},ba=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+kt(t))},d_=function(e){if(typeof e!="object"||e===null)return kt(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=kt(t[i]),n+=":",n+=d_(e[t[i]]);return n+="}",n},RT=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Se(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var DT=function(e){y(!ST(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,r,s,o,a,c;e===0?(s=0,o=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),s=a+i,o=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(e/Math.pow(2,1-i-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},H1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},G1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var K1=new RegExp("^-?(0*)\\d{1,10}$"),Y1=-2147483648,Q1=2147483647,YE=function(e){if(K1.test(e)){let t=Number(e);if(t>=Y1&&t<=Q1)return t}return null},Na=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw ge("Exception was thrown by user callback.",n),t},Math.floor(0))}},X1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ta=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Tg=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){ge(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Cg=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ge(t)}},Ca=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Iu="5",xT="v",kT="s",PT="r",NT="f",OT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,MT="ls",FT="p",Ag="ac",LT="websocket",VT="long_polling";var Eu=class{constructor(t,n,i,r,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=er.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&er.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function Z1(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function UT(e,t,n){y(typeof t=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let i;if(t===LT)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===VT)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Z1(e)&&(n.ns=e.namespace);let r=[];return Se(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var Sg=class{constructor(){this.counters_={}}incrementCounter(t,n=1){qe(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return yb(this.counters_)}};var fg={},mg={};function h_(e){let t=e.toString();return fg[t]||(fg[t]=new Sg),fg[t]}function J1(e,t){let n=e.toString();return mg[n]||(mg[n]=t()),mg[n]}var Rg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Na(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var QE="start",tF="close",eF="pLPCommand",nF="pRTLPCB",jT="id",BT="pw",zT="ser",iF="cb",rF="seg",sF="ts",oF="d",aF="dframe",$T=1870,qT=30,cF=$T-qT,lF=25e3,uF=3e4,Dg=class e{constructor(t,n,i,r,s,o,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pa(t),this.stats_=h_(n),this.urlFn=c=>(this.appCheckToken&&(c[Ag]=this.appCheckToken),UT(n,VT,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Rg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uF)),q1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xg((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===QE)this.id=a,this.password=c;else if(o===tF)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[QE]="t",i[zT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[iF]=this.scriptTagHolder.uniqueCallbackIdentifier),i[xT]=Iu,this.transportSessionId&&(i[kT]=this.transportSessionId),this.lastSessionId&&(i[MT]=this.lastSessionId),this.applicationId&&(i[FT]=this.applicationId),this.appCheckToken&&(i[Ag]=this.appCheckToken),typeof location<"u"&&location.hostname&&OT.test(location.hostname)&&(i[PT]=NT);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return $e()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!H1()&&!G1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=kt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=dh(n),r=RT(i,cF);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if($e())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[aF]="t",i[jT]=t,i[BT]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=kt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},xg=class e{constructor(t,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,$e())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=B1(),window[eF+this.uniqueCallbackIdentifier]=t,window[nF+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qt("frame writing exception"),a.stack&&Qt(a.stack),Qt(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Qt("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[jT]=this.myID,t[BT]=this.myPW,t[zT]=this.currentSerial;let n=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+qT+i.length<=$T;){let o=this.pendingSegs.shift();i=i+"&"+rF+r+"="+o.seg+"&"+sF+r+"="+o.ts+"&"+oF+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(lF)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,n){$e()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Qt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var dF=16384,hF=45e3,Tu=null;typeof MozWebSocket<"u"?Tu=MozWebSocket:typeof WebSocket<"u"&&(Tu=WebSocket);var ya=(()=>{class e{constructor(n,i,r,s,o,a,c){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pa(this.connId),this.stats_=h_(i),this.connURL=e.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,s,o){let a={};return a[xT]=Iu,!$e()&&typeof location<"u"&&location.hostname&&OT.test(location.hostname)&&(a[PT]=NT),i&&(a[kT]=i),r&&(a[MT]=r),s&&(a[Ag]=s),o&&(a[FT]=o),UT(n,LT,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,er.set("previous_websocket_failure",!0);try{let r;if($e()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Iu}/${u_}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Tu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&Tu!==null&&!e.forceDisallow_}static previouslyFailed(){return er.isInMemoryStorage||er.get("previous_websocket_failure")===!0}markConnectionHealthy(){er.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Ar(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=kt(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=RT(i,dF);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hF))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),fF=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Dg,ya]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=ya&&ya.isAvailable(),r=i&&!ya.previouslyFailed();if(n.webSocketOnly&&(i||ge("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ya];else{let s=this.transports_=[];for(let o of e.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),mF=6e4,pF=5e3,gF=10*1024,_F=100*1024,pg="t",XE="d",vF="s",ZE="r",bF="e",JE="o",tT="a",eT="n",nT="p",yF="h",kg=class{constructor(t,n,i,r,s,o,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pa("c:"+this.id+":"),this.transportManager_=new fF(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ta(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_F?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(pg in t){let n=t[pg];n===tT?this.upgradeIfSecondaryHealthy_():n===ZE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===JE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=ba("t",t),i=ba("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=ba("t",t),i=ba("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=ba(pg,t);if(XE in t){let i=t[XE];if(n===yF){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===eT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===vF?this.onConnectionShutdown_(i):n===ZE?this.onReset_(i):n===bF?Eg("Server Error: "+i):n===JE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Eg("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Iu!==i&&ge("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ta(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mF))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ta(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nT,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(er.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Cu=class{put(t,n,i,r){}merge(t,n,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var Au=class{constructor(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let r=this.getInitialEvent(t);r&&n.apply(i,r)}off(t,n,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){y(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Su=class e extends Au{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var iT=32,rT=768,et=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function tt(){return new et("")}function H(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ui(e){return e.pieces_.length-e.pieceNum_}function dt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new et(e.pieces_,t)}function WT(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function wF(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function HT(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function GT(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new et(t,0)}function Lt(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof et)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new et(n,0)}function $(e){return e.pieceNum_>=e.pieces_.length}function Ce(e,t){let n=H(e),i=H(t);if(n===null)return t;if(n===i)return Ce(dt(e),dt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function KT(e,t){if(ui(e)!==ui(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Le(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(ui(e)>ui(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var Pg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=HT(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=fo(this.parts_[i]);YT(this)}};function IF(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=fo(t),YT(e)}function EF(e){let t=e.parts_.pop();e.byteLength_-=fo(t),e.parts_.length>0&&(e.byteLength_-=1)}function YT(e){if(e.byteLength_>rT)throw new Error(e.errorPrefix_+"has a key path longer than "+rT+" bytes ("+e.byteLength_+").");if(e.parts_.length>iT)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iT+") or object contains a cycle "+tr(e))}function tr(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Ng=class e extends Au{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return y(t==="visible","Unknown event type: "+t),[this.visible_]}};var wa=1e3,TF=60*5*1e3,sT=30*1e3,CF=1.3,AF=3e4,SF="server_kill",oT=3,f_=(()=>{class e extends Cu{constructor(n,i,r,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=Pa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wa,this.maxReconnectDelay_=TF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!$e())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ng.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Su.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let s=++this.requestNumber_,o={r:s,a:n,b:i};this.log_(kt(o)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();let i=new bi,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,r,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:n,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&qe(n,"w")){let r=wi(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();ge(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Rb(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sT)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=Sb(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,i)}sendUnlisten_(n,i,r,s){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,i,r,s){this.putInternal("p",n,i,r,s)}merge(n,i,r,s){this.putInternal("m",n,i,r,s)}putInternal(n,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+kt(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):Eg("Unrecognized action received from server: "+kt(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>AF&&(this.reconnectDelay_=wa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CF)}this.onConnectStatus_(!1)}establishConnection_(){return f(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},u=function(h){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,m]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Qt("getToken() completed but was canceled"):(Qt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=m&&m.token,c=new kg(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,g=>{ge(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(SF)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&ge(h),l())}}})}interrupt(n){Qt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Qt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],uo(this.interruptReasons_)&&(this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(o=>d_(o)).join("$"):r="default";let s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,i){let r=new et(n).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,i){Qt("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oT&&(this.reconnectDelay_=sT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Qt("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";$e()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+u_.replace(/\./g,"-")]=1,lo()?n["framework.cordova"]=1:Dc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Su.getInstance().currentlyOnline();return uo(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),G=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var _s=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new G(gs,t),r=new G(gs,n);return this.compare(i,r)!==0}minPost(){return G.MIN}};var wu,Ru=class extends _s{static get __EMPTY_NODE(){return wu}static set __EMPTY_NODE(t){wu=t}compare(t,n){return Es(t.name,n.name)}isDefinedOn(t){throw yi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return G.MIN}maxPost(){return new G(ir,wu)}makePost(t,n){return y(typeof t=="string","KeyIndex indexValue must always be a string."),new G(t,wu)}toString(){return".key"}},ps=new Ru;var hs=class{constructor(t,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Fe=(()=>{class e{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??e.RED,this.left=s??Ae.EMPTY_NODE,this.right=o??Ae.EMPTY_NODE}copy(n,i,r,s,o){return new e(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this,o=r(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ae.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,s;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Ae.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Og=class{copy(t,n,i,r,s){return this}insert(t,n,i){return new Fe(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ae=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new hs(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new hs(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new hs(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new hs(this.root_,null,this.comparator_,!0,t)}};Ae.EMPTY_NODE=new Og;function RF(e,t){return Es(e.name,t.name)}function m_(e,t){return Es(e,t)}var Mg;function DF(e){Mg=e}var QT=function(e){return typeof e=="number"?"number:"+DT(e):"string:"+e},XT=function(e){if(e.isLeafNode()){let t=e.val();y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&qe(t,".sv"),"Priority must be a string or number.")}else y(e===Mg||e.isEmpty(),"priority of unexpected type.");y(e===Mg||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var aT,vs=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),XT(this.priorityNode_)}static set __childrenNodeConstructor(n){aT=n}static get __childrenNodeConstructor(){return aT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return $(n)?this:H(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=H(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(y(r!==".priority"||ui(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+QT(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=DT(this.value_):n+=this.value_,this.lazyHash_=AT(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(i),o=e.VALUE_TYPE_ORDER.indexOf(r);return y(s>=0,"Unknown leaf type: "+i),y(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),ZT,JT;function xF(e){ZT=e}function kF(e){JT=e}var Fg=class extends _s{compare(t,n){let i=t.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Es(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(ir,new vs("[PRIORITY-POST]",JT))}makePost(t,n){let i=ZT(t);return new G(n,new vs("[PRIORITY-POST]",i))}toString(){return".priority"}},Zt=new Fg;var PF=Math.log(2),Lg=class{constructor(t){let n=s=>parseInt(Math.log(s)/PF,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Du=function(e,t,n,i){e.sort(t);let r=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=e[c],h=n?n(d):d,new Fe(h,d.node,Fe.BLACK,null,null);{let m=parseInt(u/2,10)+c,g=r(c,m),E=r(m+1,l);return d=e[m],h=n?n(d):d,new Fe(h,d.node,Fe.BLACK,g,E)}},s=function(c){let l=null,u=null,d=e.length,h=function(g,E){let S=d-g,K=d;d-=g;let ot=r(S+1,K),$t=e[S],_e=n?n($t):$t;m(new Fe(_e,$t.node,E,null,ot))},m=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let E=c.nextBitIsOne(),S=Math.pow(2,c.count-(g+1));E?h(S,Fe.BLACK):(h(S,Fe.BLACK),h(S,Fe.RED))}return u},o=new Lg(e.length),a=s(o);return new Ae(i||t,a)};var gg,ds={},bs=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return y(ds&&Zt,"ChildrenNode.ts has not been loaded"),gg=gg||new e({".priority":ds},{".priority":Zt}),gg}get(t){let n=wi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ae?n:null}hasIndex(t){return qe(this.indexSet_,t.toString())}addIndex(t,n){y(t!==ps,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=n.getIterator(G.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Du(i,t.getCompare()):a=ds;let c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let u=Object.assign({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let i=ho(this.indexes_,(r,s)=>{let o=wi(this.indexSet_,s);if(y(o,"Missing index implementation for "+s),r===ds)if(o.isDefinedOn(t.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),Du(a,o.getCompare())}else return ds;else{let a=n.get(t.name),c=r;return a&&(c=c.remove(new G(t.name,a))),c.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=ho(this.indexes_,r=>{if(r===ds)return r;{let s=n.get(t.name);return s?r.remove(new G(t.name,s)):r}});return new e(i,this.indexSet_)}};var Ia,mt=(()=>{class e{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&XT(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ia||(Ia=new e(new Ae(m_),null,bs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ia}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Ia:i}}getChild(n){let i=H(n);return i===null?this:this.getImmediateChild(i).getChild(dt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(y(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new G(n,i),s,o;i.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Ia:this.priorityNode_;return new e(s,a,o)}}updateChild(n,i){let r=H(n);if(r===null)return i;{y(H(n)!==".priority"||ui(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(dt(n),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(Zt,(a,c)=>{i[a]=c.val(n),r++,o&&e.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+QT(this.getPriority().val())+":"),this.forEachChild(Zt,(i,r)=>{let s=r.hash();s!==""&&(n+=":"+i+":"+s)}),this.lazyHash_=n===""?"":AT(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new G(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new G(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new G(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,G.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,G.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Oa?-1:0}withIndex(n){if(n===ps||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===ps||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Zt),s=i.getIterator(Zt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ps?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),Vg=class extends mt{constructor(){super(new Ae(m_),mt.EMPTY_NODE,bs.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return mt.EMPTY_NODE}isEmpty(){return!1}},Oa=new Vg;Object.defineProperties(G,{MIN:{value:new G(gs,mt.EMPTY_NODE)},MAX:{value:new G(ir,Oa)}});Ru.__EMPTY_NODE=mt.EMPTY_NODE;vs.__childrenNodeConstructor=mt;DF(Oa);kF(Oa);var NF=!0;function Xt(e,t=null){if(e===null)return mt.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new vs(n,Xt(t))}if(!(e instanceof Array)&&NF){let n=[],i=!1;if(Se(e,(o,a)=>{if(o.substring(0,1)!=="."){let c=Xt(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new G(o,c)))}}),n.length===0)return mt.EMPTY_NODE;let s=Du(n,RF,o=>o.name,m_);if(i){let o=Du(n,Zt.getCompare());return new mt(s,Xt(t),new bs({".priority":o},{".priority":Zt}))}else return new mt(s,Xt(t),bs.Default)}else{let n=mt.EMPTY_NODE;return Se(e,(i,r)=>{if(qe(e,i)&&i.substring(0,1)!=="."){let s=Xt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Xt(t))}}xF(Xt);var Ug=class extends _s{constructor(t){super(),this.indexPath_=t,y(!$(t)&&H(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Es(t.name,n.name):s}makePost(t,n){let i=Xt(t),r=mt.EMPTY_NODE.updateChild(this.indexPath_,i);return new G(n,r)}maxPost(){let t=mt.EMPTY_NODE.updateChild(this.indexPath_,Oa);return new G(ir,t)}toString(){return HT(this.indexPath_,0).join("/")}};var jg=class extends _s{compare(t,n){let i=t.node.compareTo(n.node);return i===0?Es(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(t,n){let i=Xt(t);return new G(n,i)}toString(){return".value"}},OF=new jg;function MF(e){return{type:"value",snapshotNode:e}}function FF(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function LF(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function cT(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function VF(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Bg=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gs}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ir}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zt}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function lT(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Zt?n="$priority":e.index_===OF?n="$value":e.index_===ps?n="$key":(y(e.index_ instanceof Ug,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=kt(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=kt(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+kt(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=kt(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+kt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function uT(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Zt&&(t.i=e.index_.toString()),t}var zg=class e extends Cu{constructor(t,n,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Pa("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=e.getListenId_(t,i),a={};this.listens_[o]=a;let c=lT(t._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,i),wi(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=lT(t._queryParams),i=t._path.toString(),r=new bi;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ei(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ar(a.responseText)}catch{ge("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&ge("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var $g=class{constructor(){this.rootNode_=mt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function xu(){return{value:null,children:new Map}}function tC(e,t,n){if($(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=H(t);e.children.has(i)||e.children.set(i,xu());let r=e.children.get(i);t=dt(t),tC(r,t,n)}}function qg(e,t,n){e.value!==null?n(t,e.value):UF(e,(i,r)=>{let s=new et(t.toString()+"/"+i);qg(r,s,n)})}function UF(e,t){e.children.forEach((n,i)=>{t(i,n)})}var Wg=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Se(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=t,n}};var dT=10*1e3,jF=30*1e3,BF=5*60*1e3,Hg=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Wg(t);let i=dT+(jF-dT)*Math.random();Ta(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;Se(t,(r,s)=>{s>0&&qe(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Ta(this.reportStats_.bind(this),Math.floor(Math.random()*2*BF))}};var Rn=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Rn||{});function eC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function iC(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Gg=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Rn.ACK_USER_WRITE,this.source=eC()}operationForChild(t){if($(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new et(t));return new e(tt(),n,this.revert)}}else return y(H(this.path)===t,"operationForChild called for unrelated child."),new e(dt(this.path),this.affectedTree,this.revert)}};var ys=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Rn.OVERWRITE}operationForChild(t){return $(this.path)?new e(this.source,tt(),this.snap.getImmediateChild(t)):new e(this.source,dt(this.path),this.snap)}};var ku=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Rn.MERGE}operationForChild(t){if($(this.path)){let n=this.children.subtree(new et(t));return n.isEmpty()?null:n.value?new ys(this.source,tt(),n.value):new e(this.source,tt(),n)}else return y(H(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ra=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;let n=H(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function zF(e,t,n,i){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(VF(o.childName,o.snapshotNode))}),Ea(e,r,"child_removed",t,i,n),Ea(e,r,"child_added",t,i,n),Ea(e,r,"child_moved",s,i,n),Ea(e,r,"child_changed",t,i,n),Ea(e,r,"value",t,i,n),r}function Ea(e,t,n,i,r,s){let o=i.filter(a=>a.type===n);o.sort((a,c)=>qF(e,a,c)),o.forEach(a=>{let c=$F(e,a,s);r.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function $F(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function qF(e,t,n){if(t.childName==null||n.childName==null)throw yi("Should only compare child_ events.");let i=new G(t.childName,t.snapshotNode),r=new G(n.childName,n.snapshotNode);return e.index_.compare(i,r)}function rC(e,t){return{eventCache:e,serverCache:t}}function Aa(e,t,n,i){return rC(new Ra(t,n,i),e.serverCache)}function sC(e,t,n,i){return rC(e.eventCache,new Ra(t,n,i))}function Kg(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function rr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var _g,WF=()=>(_g||(_g=new Ae(W1)),_g),re=class e{constructor(t,n=WF()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return Se(t,(i,r)=>{n=n.set(new et(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:tt(),value:this.value};if($(t))return null;{let i=H(t),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(dt(t),n);return s!=null?{path:Lt(new et(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if($(t))return this;{let n=H(t),i=this.children.get(n);return i!==null?i.subtree(dt(t)):new e(null)}}set(t,n){if($(t))return new e(n,this.children);{let i=H(t),s=(this.children.get(i)||new e(null)).set(dt(t),n),o=this.children.insert(i,s);return new e(this.value,o)}}remove(t){if($(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=H(t),i=this.children.get(n);if(i){let r=i.remove(dt(t)),s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this}}get(t){if($(t))return this.value;{let n=H(t),i=this.children.get(n);return i?i.get(dt(t)):null}}setTree(t,n){if($(t))return n;{let i=H(t),s=(this.children.get(i)||new e(null)).setTree(dt(t),n),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new e(this.value,o)}}fold(t){return this.fold_(tt(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Lt(t,r),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,tt(),n)}findOnPath_(t,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if($(t))return null;{let s=H(t),o=this.children.get(s);return o?o.findOnPath_(dt(t),Lt(n,s),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,tt(),n)}foreachOnPath_(t,n,i){if($(t))return this;{this.value&&i(n,this.value);let r=H(t),s=this.children.get(r);return s?s.foreachOnPath_(dt(t),Lt(n,r),i):new e(null)}}foreach(t){this.foreach_(tt(),t)}foreach_(t,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Lt(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var Ve=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new re(null))}};function Sa(e,t,n){if($(t))return new Ve(new re(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,s=i.value,o=Ce(r,t);return s=s.updateChild(o,n),new Ve(e.writeTree_.set(r,s))}else{let r=new re(n),s=e.writeTree_.setTree(t,r);return new Ve(s)}}}function hT(e,t,n){let i=e;return Se(n,(r,s)=>{i=Sa(i,Lt(t,r),s)}),i}function fT(e,t){if($(t))return Ve.empty();{let n=e.writeTree_.setTree(t,new re(null));return new Ve(n)}}function Yg(e,t){return sr(e,t)!=null}function sr(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Ce(n.path,t)):null}function mT(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Zt,(i,r)=>{t.push(new G(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new G(i,r.value))}),t}function li(e,t){if($(t))return e;{let n=sr(e,t);return n!=null?new Ve(new re(n)):new Ve(e.writeTree_.subtree(t))}}function Qg(e){return e.writeTree_.isEmpty()}function ws(e,t){return oC(tt(),e.writeTree_,t)}function oC(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(y(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=oC(Lt(e,r),s,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(Lt(e,".priority"),i)),n}}function aC(e,t){return hC(t,e)}function HF(e,t,n,i,r){y(i>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=Sa(e.visibleWrites,t,n)),e.lastWriteId=i}function GF(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function KF(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);y(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){let a=e.allWrites[o];a.visible&&(o>=n&&YF(a,i.path)?r=!1:Le(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return QF(e),!0;if(i.snap)e.visibleWrites=fT(e.visibleWrites,i.path);else{let a=i.children;Se(a,c=>{e.visibleWrites=fT(e.visibleWrites,Lt(i.path,c))})}return!0}else return!1}function YF(e,t){if(e.snap)return Le(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Le(Lt(e.path,n),t))return!0;return!1}function QF(e){e.visibleWrites=cC(e.allWrites,XF,tt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function XF(e){return e.visible}function cC(e,t,n){let i=Ve.empty();for(let r=0;r<e.length;++r){let s=e[r];if(t(s)){let o=s.path,a;if(s.snap)Le(n,o)?(a=Ce(n,o),i=Sa(i,a,s.snap)):Le(o,n)&&(a=Ce(o,n),i=Sa(i,tt(),s.snap.getChild(a)));else if(s.children){if(Le(n,o))a=Ce(n,o),i=hT(i,a,s.children);else if(Le(o,n))if(a=Ce(o,n),$(a))i=hT(i,tt(),s.children);else{let c=wi(s.children,H(a));if(c){let l=c.getChild(dt(a));i=Sa(i,tt(),l)}}}else throw yi("WriteRecord should have .snap or .children")}}return i}function lC(e,t,n,i,r){if(!i&&!r){let s=sr(e.visibleWrites,t);if(s!=null)return s;{let o=li(e.visibleWrites,t);if(Qg(o))return n;if(n==null&&!Yg(o,tt()))return null;{let a=n||mt.EMPTY_NODE;return ws(o,a)}}}else{let s=li(e.visibleWrites,t);if(!r&&Qg(s))return n;if(!r&&n==null&&!Yg(s,tt()))return null;{let o=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Le(l.path,t)||Le(t,l.path))},a=cC(e.allWrites,o,t),c=n||mt.EMPTY_NODE;return ws(a,c)}}}function ZF(e,t,n){let i=mt.EMPTY_NODE,r=sr(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Zt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){let s=li(e.visibleWrites,t);return n.forEachChild(Zt,(o,a)=>{let c=ws(li(s,new et(o)),a);i=i.updateImmediateChild(o,c)}),mT(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=li(e.visibleWrites,t);return mT(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function JF(e,t,n,i,r){y(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Lt(t,n);if(Yg(e.visibleWrites,s))return null;{let o=li(e.visibleWrites,s);return Qg(o)?r.getChild(n):ws(o,r.getChild(n))}}function tL(e,t,n,i){let r=Lt(t,n),s=sr(e.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){let o=li(e.visibleWrites,r);return ws(o,i.getNode().getImmediateChild(n))}else return null}function eL(e,t){return sr(e.visibleWrites,t)}function nL(e,t,n,i,r,s,o){let a,c=li(e.visibleWrites,t),l=sr(c,tt());if(l!=null)a=l;else if(n!=null)a=ws(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),m=h.getNext();for(;m&&u.length<r;)d(m,i)!==0&&u.push(m),m=h.getNext();return u}else return[]}function iL(){return{visibleWrites:Ve.empty(),allWrites:[],lastWriteId:-1}}function Xg(e,t,n,i){return lC(e.writeTree,e.treePath,t,n,i)}function uC(e,t){return ZF(e.writeTree,e.treePath,t)}function pT(e,t,n,i){return JF(e.writeTree,e.treePath,t,n,i)}function Pu(e,t){return eL(e.writeTree,Lt(e.treePath,t))}function rL(e,t,n,i,r,s){return nL(e.writeTree,e.treePath,t,n,i,r,s)}function p_(e,t,n){return tL(e.writeTree,e.treePath,t,n)}function dC(e,t){return hC(Lt(e.treePath,t),e.writeTree)}function hC(e,t){return{treePath:e,writeTree:t}}var Zg=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,cT(i,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,LF(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,FF(i,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,cT(i,t.snapshotNode,r.oldSnap));else throw yi("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var Jg=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},fC=new Jg,Da=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Ra(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return p_(this.writes_,t,i)}}getChildAfterChild(t,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rr(this.viewCache_),s=rL(this.writes_,r,n,1,i,t);return s.length===0?null:s[0]}};function sL(e,t){y(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),y(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function oL(e,t,n,i,r){let s=new Zg,o,a;if(n.type===Rn.OVERWRITE){let l=n;l.source.fromUser?o=t_(e,t,l.path,l.snap,i,r,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!$(l.path),o=Nu(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===Rn.MERGE){let l=n;l.source.fromUser?o=cL(e,t,l.path,l.children,i,r,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=e_(e,t,l.path,l.children,i,r,a,s))}else if(n.type===Rn.ACK_USER_WRITE){let l=n;l.revert?o=dL(e,t,l.path,i,r,s):o=lL(e,t,l.path,l.affectedTree,i,r,s)}else if(n.type===Rn.LISTEN_COMPLETE)o=uL(e,t,n.path,i,s);else throw yi("Unknown operation type: "+n.type);let c=s.getChanges();return aL(t,o,c),{viewCache:o,changes:c}}function aL(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Kg(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(MF(Kg(t)))}}function mC(e,t,n,i,r,s){let o=t.eventCache;if(Pu(i,n)!=null)return t;{let a,c;if($(n))if(y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=rr(t),u=l instanceof mt?l:mt.EMPTY_NODE,d=uC(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let l=Xg(i,rr(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,s)}else{let l=H(n);if(l===".priority"){y(ui(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=t.serverCache.getNode();let d=pT(i,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=o.getNode()}else{let u=dt(n),d;if(o.isCompleteForChild(l)){c=t.serverCache.getNode();let h=pT(i,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=p_(i,l,t.serverCache);d!=null?a=e.filter.updateChild(o.getNode(),l,d,u,r,s):a=o.getNode()}}return Aa(t,a,o.isFullyInitialized()||$(n),e.filter.filtersNodes())}}function Nu(e,t,n,i,r,s,o,a){let c=t.serverCache,l,u=o?e.filter:e.filter.getIndexedFilter();if($(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),m,null)}else{let m=H(n);if(!c.isCompleteForPath(n)&&ui(n)>1)return t;let g=dt(n),S=c.getNode().getImmediateChild(m).updateChild(g,i);m===".priority"?l=u.updatePriority(c.getNode(),S):l=u.updateChild(c.getNode(),m,S,g,fC,null)}let d=sC(t,l,c.isFullyInitialized()||$(n),u.filtersNodes()),h=new Da(r,d,s);return mC(e,d,n,r,h,a)}function t_(e,t,n,i,r,s,o){let a=t.eventCache,c,l,u=new Da(r,t,s);if($(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),c=Aa(t,l,!0,e.filter.filtersNodes());else{let d=H(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),i),c=Aa(t,l,a.isFullyInitialized(),a.isFiltered());else{let h=dt(n),m=a.getNode().getImmediateChild(d),g;if($(h))g=i;else{let E=u.getCompleteChild(d);E!=null?WT(h)===".priority"&&E.getChild(GT(h)).isEmpty()?g=E:g=E.updateChild(h,i):g=mt.EMPTY_NODE}if(m.equals(g))c=t;else{let E=e.filter.updateChild(a.getNode(),d,g,h,u,o);c=Aa(t,E,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function gT(e,t){return e.eventCache.isCompleteForChild(t)}function cL(e,t,n,i,r,s,o){let a=t;return i.foreach((c,l)=>{let u=Lt(n,c);gT(t,H(u))&&(a=t_(e,a,u,l,r,s,o))}),i.foreach((c,l)=>{let u=Lt(n,c);gT(t,H(u))||(a=t_(e,a,u,l,r,s,o))}),a}function _T(e,t,n){return n.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function e_(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;$(n)?l=i:l=new re(null).setTree(n,i);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let m=t.serverCache.getNode().getImmediateChild(d),g=_T(e,m,h);c=Nu(e,c,new et(d),g,r,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let m=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!m){let g=t.serverCache.getNode().getImmediateChild(d),E=_T(e,g,h);c=Nu(e,c,new et(d),E,r,s,o,a)}}),c}function lL(e,t,n,i,r,s,o){if(Pu(r,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if($(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Nu(e,t,n,c.getNode().getChild(n),r,s,a,o);if($(n)){let l=new re(null);return c.getNode().forEachChild(ps,(u,d)=>{l=l.set(new et(u),d)}),e_(e,t,n,l,r,s,a,o)}else return t}else{let l=new re(null);return i.foreach((u,d)=>{let h=Lt(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),e_(e,t,n,l,r,s,a,o)}}function uL(e,t,n,i,r){let s=t.serverCache,o=sC(t,s.getNode(),s.isFullyInitialized()||$(n),s.isFiltered());return mC(e,o,n,i,fC,r)}function dL(e,t,n,i,r,s){let o;if(Pu(i,n)!=null)return t;{let a=new Da(i,t,r),c=t.eventCache.getNode(),l;if($(n)||H(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=Xg(i,rr(t));else{let d=t.serverCache.getNode();y(d instanceof mt,"serverChildren would be complete if leaf node"),u=uC(i,d)}u=u,l=e.filter.updateFullNode(c,u,s)}else{let u=H(n),d=p_(i,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,dt(n),a,s):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,mt.EMPTY_NODE,dt(n),a,s):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Xg(i,rr(t)),o.isLeafNode()&&(l=e.filter.updateFullNode(l,o,s)))}return o=t.serverCache.isFullyInitialized()||Pu(i,tt())!=null,Aa(t,l,o,e.filter.filtersNodes())}}function hL(e,t){let n=rr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!$(t)&&!n.getImmediateChild(H(t)).isEmpty())?n.getChild(t):null}function vT(e,t,n,i){t.type===Rn.MERGE&&t.source.queryId!==null&&(y(rr(e.viewCache_),"We should always have a full cache before handling merges"),y(Kg(e.viewCache_),"Missing event cache, even though we have a server cache"));let r=e.viewCache_,s=oL(e.processor_,r,t,n,i);return sL(e.processor_,s.viewCache),y(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,fL(e,s.changes,s.viewCache.eventCache.getNode(),null)}function fL(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return zF(e.eventGenerator_,t,n,r)}var bT;function mL(e){y(!bT,"__referenceConstructor has already been defined"),bT=e}function g_(e,t,n,i){let r=t.source.queryId;if(r!==null){let s=e.views.get(r);return y(s!=null,"SyncTree gave us an op for an invalid query."),vT(s,t,n,i)}else{let s=[];for(let o of e.views.values())s=s.concat(vT(o,t,n,i));return s}}function __(e,t){let n=null;for(let i of e.views.values())n=n||hL(i,t);return n}var yT;function pL(e){y(!yT,"__referenceConstructor has already been defined"),yT=e}var Ou=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new re(null),this.pendingWriteTree_=iL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function gL(e,t,n,i,r){return HF(e.pendingWriteTree_,t,n,i,r),r?Fu(e,new ys(eC(),t,n)):[]}function fs(e,t,n=!1){let i=GF(e.pendingWriteTree_,t);if(KF(e.pendingWriteTree_,t)){let s=new re(null);return i.snap!=null?s=s.set(tt(),!0):Se(i.children,o=>{s=s.set(new et(o),!0)}),Fu(e,new Gg(i.path,s,n))}else return[]}function Mu(e,t,n){return Fu(e,new ys(nC(),t,n))}function _L(e,t,n){let i=re.fromObject(n);return Fu(e,new ku(nC(),t,i))}function vL(e,t,n,i){let r=vC(e,i);if(r!=null){let s=bC(r),o=s.path,a=s.queryId,c=Ce(o,t),l=new ys(iC(a),c,n);return yC(e,o,l)}else return[]}function bL(e,t,n,i){let r=vC(e,i);if(r){let s=bC(r),o=s.path,a=s.queryId,c=Ce(o,t),l=re.fromObject(n),u=new ku(iC(a),c,l);return yC(e,o,u)}else return[]}function pC(e,t,n){let r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(o,a)=>{let c=Ce(o,t),l=__(a,c);if(l)return l});return lC(r,t,s,n,!0)}function Fu(e,t){return gC(t,e.syncPointTree_,null,aC(e.pendingWriteTree_,tt()))}function gC(e,t,n,i){if($(e.path))return _C(e,t,n,i);{let r=t.get(tt());n==null&&r!=null&&(n=__(r,tt()));let s=[],o=H(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=dC(i,o);s=s.concat(gC(a,c,l,u))}return r&&(s=s.concat(g_(r,e,i,n))),s}}function _C(e,t,n,i){let r=t.get(tt());n==null&&r!=null&&(n=__(r,tt()));let s=[];return t.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=dC(i,o),u=e.operationForChild(o);u&&(s=s.concat(_C(u,a,c,l)))}),r&&(s=s.concat(g_(r,e,i,n))),s}function vC(e,t){return e.tagToQueryMap.get(t)}function bC(e){let t=e.indexOf("$");return y(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new et(e.substr(0,t))}}function yC(e,t,n){let i=e.syncPointTree_.get(t);y(i,"Missing sync point for query tag that we're tracking");let r=aC(e.pendingWriteTree_,t);return g_(i,n,r,null)}var n_=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},i_=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Lt(this.path_,t);return new e(this.syncTree_,n)}node(){return pC(this.syncTree_,this.path_)}},yL=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},wT=function(e,t,n){if(!e||typeof e!="object")return e;if(y(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return wL(e[".sv"],t,n);if(typeof e[".sv"]=="object")return IL(e[".sv"],t);y(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},wL=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+e)}},IL=function(e,t,n){e.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&y(!1,"Unexpected increment value: "+i);let r=t.node();if(y(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},EL=function(e,t,n,i){return v_(t,new i_(n,e),i)},TL=function(e,t,n){return v_(e,new n_(t),n)};function v_(e,t,n){let i=e.getPriority().val(),r=wT(i,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){let o=e,a=wT(o.getValue(),t,n);return a!==o.getValue()||r!==o.getPriority().val()?new vs(a,Xt(r)):e}else{let o=e;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new vs(r))),o.forEachChild(Zt,(a,c)=>{let l=v_(c,t.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var xa=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function b_(e,t){let n=t instanceof et?t:new et(t),i=e,r=H(n);for(;r!==null;){let s=wi(i.node.children,r)||{children:{},childCount:0};i=new xa(r,i,s),n=dt(n),r=H(n)}return i}function Ts(e){return e.node.value}function wC(e,t){e.node.value=t,r_(e)}function IC(e){return e.node.childCount>0}function CL(e){return Ts(e)===void 0&&!IC(e)}function Lu(e,t){Se(e.node.children,(n,i)=>{t(new xa(n,e,i))})}function EC(e,t,n,i){n&&!i&&t(e),Lu(e,r=>{EC(r,t,!0,i)}),n&&i&&t(e)}function AL(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Ma(e){return new et(e.parent===null?e.name:Ma(e.parent)+"/"+e.name)}function r_(e){e.parent!==null&&SL(e.parent,e.name,e)}function SL(e,t,n){let i=CL(n),r=qe(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,r_(e)):!i&&!r&&(e.node.children[t]=n.node,e.node.childCount++,r_(e))}var RL=/[\[\].#$\/\u0000-\u001F\u007F]/,DL=/[\[\].#$\u0000-\u001F\u007F]/,vg=10*1024*1024,TC=function(e){return typeof e=="string"&&e.length!==0&&!RL.test(e)},xL=function(e){return typeof e=="string"&&e.length!==0&&!DL.test(e)},kL=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),xL(e)};var CC=function(e,t,n){let i=n instanceof et?new Pg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+tr(i));if(typeof t=="function")throw new Error(e+"contains a function "+tr(i)+" with contents = "+t.toString());if(ST(t))throw new Error(e+"contains "+t.toString()+" "+tr(i));if(typeof t=="string"&&t.length>vg/3&&fo(t)>vg)throw new Error(e+"contains a string greater than "+vg+" utf8 bytes "+tr(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Se(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!TC(o)))throw new Error(e+" contains an invalid key ("+o+") "+tr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);IF(i,o),CC(e,a,i),EF(i)}),r&&s)throw new Error(e+' contains ".value" child '+tr(i)+" in addition to actual children.")}};var PL=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!TC(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kL(n))throw new Error(xb(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var s_=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function NL(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();n!==null&&!KT(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function or(e,t,n){NL(e,n),OL(e,i=>Le(i,t)||Le(t,i))}function OL(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let s=r.path;t(s)?(ML(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ML(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();nr&&Qt("event: "+n.toString()),Na(i)}}}var FL="repo_interrupt",LL=25,o_=class{constructor(t,n,i,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new s_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xu(),this.transactionQueueTree_=new xa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function VL(e,t,n){if(e.stats_=h_(e.repoInfo_),e.forceRestClient_||X1())e.server_=new zg(e.repoInfo_,(i,r,s,o)=>{IT(e,i,r,s,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ET(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{kt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new f_(e.repoInfo_,t,(i,r,s,o)=>{IT(e,i,r,s,o)},i=>{ET(e,i)},i=>{jL(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=J1(e.repoInfo_,()=>new Hg(e.stats_,e.server_)),e.infoData_=new $g,e.infoSyncTree_=new Ou({startListening:(i,r,s,o)=>{let a=[],c=e.infoData_.getNode(i._path);return c.isEmpty()||(a=Mu(e.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),y_(e,"connected",!1),e.serverSyncTree_=new Ou({startListening:(i,r,s,o)=>(e.server_.listen(i,s,r,(a,c)=>{let l=o(a,c);or(e.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}function UL(e){let n=e.infoData_.getNode(new et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function AC(e){return yL({timestamp:UL(e)})}function IT(e,t,n,i,r){e.dataUpdateCount++;let s=new et(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){let c=ho(n,l=>Xt(l));o=bL(e.serverSyncTree_,s,c,r)}else{let c=Xt(n);o=vL(e.serverSyncTree_,s,c,r)}else if(i){let c=ho(n,l=>Xt(l));o=_L(e.serverSyncTree_,s,c)}else{let c=Xt(n);o=Mu(e.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=I_(e,s)),or(e.eventQueue_,a,o)}function ET(e,t){y_(e,"connected",t),t===!1&&zL(e)}function jL(e,t){Se(t,(n,i)=>{y_(e,n,i)})}function y_(e,t,n){let i=new et("/.info/"+t),r=Xt(n);e.infoData_.updateSnapshot(i,r);let s=Mu(e.infoSyncTree_,i,r);or(e.eventQueue_,i,s)}function BL(e){return e.nextWriteId_++}function zL(e){SC(e,"onDisconnectEvents");let t=AC(e),n=xu();qg(e.onDisconnect_,tt(),(r,s)=>{let o=EL(r,s,e.serverSyncTree_,t);tC(n,r,o)});let i=[];qg(n,tt(),(r,s)=>{i=i.concat(Mu(e.serverSyncTree_,r,s));let o=HL(e,r);I_(e,o)}),e.onDisconnect_=xu(),or(e.eventQueue_,tt(),i)}function $L(e){e.persistentConnection_&&e.persistentConnection_.interrupt(FL)}function SC(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Qt(n,...t)}function RC(e,t,n){return pC(e.serverSyncTree_,t,n)||mt.EMPTY_NODE}function w_(e,t=e.transactionQueueTree_){if(t||Vu(e,t),Ts(t)){let n=xC(e,t);y(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&qL(e,Ma(t),n)}else IC(t)&&Lu(t,n=>{w_(e,n)})}function qL(e,t,n){let i=n.map(l=>l.currentWriteId),r=RC(e,t,i),s=r,o=r.hash();for(let l=0;l<n.length;l++){let u=n[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ce(t,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=t;e.server_.put(c.toString(),a,l=>{SC(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(fs(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Vu(e,b_(e.transactionQueueTree_,t)),w_(e,e.transactionQueueTree_),or(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)Na(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ge("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}I_(e,t)}},o)}function I_(e,t){let n=DC(e,t),i=Ma(n),r=xC(e,n);return WL(e,r,i),i}function WL(e,t,n){if(t.length===0)return;let i=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=Ce(n,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,r=r.concat(fs(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=LL)u=!0,d="maxretry",r=r.concat(fs(e.serverSyncTree_,c.currentWriteId,!0));else{let h=RC(e,c.path,o);c.currentInputSnapshot=h;let m=t[a].update(h.val());if(m!==void 0){CC("transaction failed: Data returned ",m,c.path);let g=Xt(m);typeof m=="object"&&m!=null&&qe(m,".priority")||(g=g.updatePriority(h.getPriority()));let S=c.currentWriteId,K=AC(e),ot=TL(g,h,K);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=ot,c.currentWriteId=BL(e),o.splice(o.indexOf(S),1),r=r.concat(gL(e.serverSyncTree_,c.path,ot,c.currentWriteId,c.applyLocally)),r=r.concat(fs(e.serverSyncTree_,S,!0))}else u=!0,d="nodata",r=r.concat(fs(e.serverSyncTree_,c.currentWriteId,!0))}or(e.eventQueue_,n,r),r=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(d),!1,null))))}Vu(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Na(i[a]);w_(e,e.transactionQueueTree_)}function DC(e,t){let n,i=e.transactionQueueTree_;for(n=H(t);n!==null&&Ts(i)===void 0;)i=b_(i,n),t=dt(t),n=H(t);return i}function xC(e,t){let n=[];return kC(e,t,n),n.sort((i,r)=>i.order-r.order),n}function kC(e,t,n){let i=Ts(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Lu(t,r=>{kC(e,r,n)})}function Vu(e,t){let n=Ts(t);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,wC(t,n.length>0?n:void 0)}Lu(t,i=>{Vu(e,i)})}function HL(e,t){let n=Ma(DC(e,t)),i=b_(e.transactionQueueTree_,t);return AL(i,r=>{bg(e,r)}),bg(e,i),EC(i,r=>{bg(e,r)}),n}function bg(e,t){let n=Ts(t);if(n){let i=[],r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(y(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(y(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(fs(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?wC(t,void 0):n.length=s+1,or(e.eventQueue_,Ma(t),r);for(let o=0;o<i.length;o++)Na(i[o])}}function GL(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function KL(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ge(`Invalid query segment '${n}' in query '${e}'`)}return t}var TT=function(e,t){let n=YL(e),i=n.namespace;n.domain==="firebase.com"&&Dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$1();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Eu(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new et(n.pathString)}},YL=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(r=GL(e.substring(u,d)));let h=KL(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let m=t.slice(0,l);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{let g=t.indexOf(".");i=t.substring(0,g).toLowerCase(),n=t.substring(g+1),s=i}"ns"in h&&(s=h.ns)}return{host:t,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var a_=class e{constructor(t,n,i,r){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return $(this._path)?null:WT(this._path)}get ref(){return new Is(this._repo,this._path)}get _queryIdentifier(){let t=uT(this._queryParams),n=d_(t);return n==="{}"?"default":n}get _queryObject(){return uT(this._queryParams)}isEqual(t){if(t=jt(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=KT(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+wF(this._path)}};var Is=class e extends a_{constructor(t,n){super(t,n,new Bg,!1)}get parent(){let t=GT(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};mL(Is);pL(Is);var QL="FIREBASE_DATABASE_EMULATOR_HOST",c_={},XL=!1;function ZL(e,t,n,i){e.repoInfo_=new Eu(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function JL(e,t,n,i,r){let s=i||e.options.databaseURL;s===void 0&&(e.options.projectId||Dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qt("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=TT(s,r),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[QL]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=TT(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let u=r&&c?new Ca(Ca.OWNER):new Cg(e.name,e.options,t);PL("Invalid Firebase Database URL",o),$(o.path)||Dn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=eV(a,e,u,new Tg(e.name,n));return new l_(d,e)}function tV(e,t){let n=c_[t];(!n||n[e.key]!==e)&&Dn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),$L(e),delete n[e.key]}function eV(e,t,n,i){let r=c_[t.name];r||(r={},c_[t.name]=r);let s=r[e.toURLString()];return s&&Dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new o_(e,XL,n,i),r[e.toURLString()]=s,s}var l_=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Is(this._repo,tt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Dn("Cannot call "+t+" on a deleted database.")}};function PC(e=qn(),t){let n=Ai(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let i=Sc("database");i&&NC(n,...i)}return n}function NC(e,t,n,i={}){e=jt(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Dn("Cannot call useEmulator() after instance has already been initialized.");let r=e._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ca(Ca.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Rc(i.mockUserToken,e.app.options.projectId);s=new Ca(o)}ZL(r,t,n,s)}function nV(e){j1(Ye),Ge(new ie("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return JL(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),ft(HE,GE,e),ft(HE,GE,"esm2017")}f_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};f_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};nV();var Fa=class{constructor(t){return t}},OC="database",E_=class{constructor(){return Ri(OC)}};var T_=new R("angularfire2.database-instances");function iV(e,t){let n=xr(OC,e,t);return n&&new Fa(n)}function rV(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Fa(i)}}var sV={provide:E_,deps:[[new It,T_]]},oV={provide:Fa,useFactory:iV,deps:[[new It,T_],ke]},aV=(()=>{class e{constructor(){ft("angularfire",mn.full,"rtdb")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=L({type:e});static \u0275inj=F({providers:[oV,sV]})}return e})();function MC(e,...t){return{ngModule:aV,providers:[{provide:T_,useFactory:rV(e),multi:!0,deps:[D,J,Hn,pn,[new It,Ni],[new It,Wn],...t]}]}}var FC=xe(PC,!0);var cV={apiKey:"AIzaSyDkhDklt80JWW8R8-O3iVMTXZhl-LQTP9M",authDomain:"sala-de-juegos-laboiv-a8803.firebaseapp.com",databaseURL:"https://sala-de-juegos-laboiv-a8803-default-rtdb.firebaseio.com",projectId:"sala-de-juegos-laboiv-a8803",storageBucket:"sala-de-juegos-laboiv-a8803.appspot.com",messagingSenderId:"180597478060",appId:"1:180597478060:web:ba336c80f25e9cdefdc509"},LC={providers:[hb(qE),Wa([Hb(()=>Gb(cV)),zy(()=>$y())]),WE(),Wa(ME(()=>VE())),Wa(MC(()=>FC()))]};function lV(e,t){}var ar=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var S_=(()=>{let t=class t extends Jn{constructor(i,r,s,o,a,c,l,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=I(ct),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=I(De),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=Do(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=Do();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Do()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};t.\u0275fac=function(r){return new(r||t)(T(it),T(ul),T(O,8),T(ar),T(Po),T(D),T(In),T(Lr))},t.\u0275cmp=vt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&pi(ti,7),r&2){let o;Fn(o=Ln())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&ae("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ut,bt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&Ue(0,lV,0,0,"ng-template",0)},dependencies:[ti],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let e=t;return e})(),La=class{constructor(t,n){this.overlayRef=t,this.config=n,this.closed=new V,this.disableClose=n.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!ol(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(t,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",n=""){return this.overlayRef.updateSize({width:t,height:n}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},uV=new R("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=I(he);return()=>e.scrollStrategies.block()}}),dV=new R("DialogData"),hV=new R("DefaultDialogConfig");var fV=0,R_=(()=>{let t=class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,c){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new V,this._afterOpenedAtThisLevel=new V,this._ariaHiddenElements=new Map,this.afterAllClosed=fi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(cn(void 0))),this._scrollStrategy=c}open(i,r){let s=this._defaultOptions||new ar;r=_(_({},s),r),r.id=r.id||`cdk-dialog-${fV++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),c=new La(a,r),l=this._attachContainer(a,c,r);return c.containerInstance=l,this._attachDialogContent(i,c,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){C_(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){C_(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),C_(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Ui({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:ar,useValue:s},{provide:La,useValue:r},{provide:In,useValue:i}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=S_;let l=new yn(c,s.viewContainerRef,J.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(l).instance}_attachDialogContent(i,r,s,o){if(i instanceof mi){let a=this._createInjector(o,r,s,void 0),c={$implicit:o.data,dialogRef:r};o.templateContext&&(c=_(_({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new Zn(i,null,c,a))}else{let a=this._createInjector(o,r,s,this._injector),c=s.attachComponentPortal(new yn(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:dV,useValue:i.data},{provide:La,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,s)):c.push(...i.providers)),i.direction&&(!a||!a.get(No,null,{optional:!0}))&&c.push({provide:No,useValue:{value:i.direction,change:x()}}),J.create({parent:a||o,providers:c})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};t.\u0275fac=function(r){return new(r||t)(p(he),p(J),p(hV,8),p(t,12),p(Vr),p(uV))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function C_(e,t){let n=e.length;for(;n--;)t(e[n])}var VC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({providers:[R_],imports:[Ur,wn,Aw,wn]});let e=t;return e})();function mV(e,t){}var Va=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},D_="mdc-dialog--open",UC="mdc-dialog--opening",jC="mdc-dialog--closing",pV=150,gV=75,_V=(()=>{let t=class t extends S_{constructor(i,r,s,o,a,c,l,u,d){super(i,r,s,o,a,c,l,d),this._animationMode=u,this._animationStateChanged=new Dt,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?zC(this._config.enterAnimationDuration)??pV:0,this._exitAnimationDuration=this._animationsEnabled?zC(this._config.exitAnimationDuration)??gV:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(BC,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(UC,D_)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(D_),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(D_),this._animationsEnabled?(this._hostElement.style.setProperty(BC,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(jC)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(UC,jC)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};t.\u0275fac=function(r){return new(r||t)(T(it),T(ul),T(O,8),T(Va),T(Po),T(D),T(In),T(be,8),T(Lr))},t.\u0275cmp=vt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,s){r&2&&(id("id",s._config.id),ae("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),je("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[Ut,bt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(q(0,"div",0)(1,"div",1),Ue(2,mV,0,0,"ng-template",2),B()())},dependencies:[ti],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let e=t;return e})(),BC="--mat-dialog-transition-duration";function zC(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?ko(e.substring(0,e.length-2)):e.endsWith("s")?ko(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var Uu=function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e}(Uu||{}),x_=class{constructor(t,n,i){this._ref=t,this._containerInstance=i,this._afterOpened=new V,this._beforeClosed=new V,this._state=Uu.OPEN,this.disableClose=n.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Vt(r=>r.state==="opened"),qt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Vt(r=>r.state==="closed"),qt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ba(this.backdropClick(),this.keydownEvents().pipe(Vt(r=>r.keyCode===27&&!this.disableClose&&!ol(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),vV(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Vt(n=>n.state==="closing"),qt(1)).subscribe(n=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=Uu.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let n=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?n.left(t.left):n.right(t.right):n.centerHorizontally(),t&&(t.top||t.bottom)?t.top?n.top(t.top):n.bottom(t.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",n=""){return this._ref.updateSize(t,n),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=Uu.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function vV(e,t,n){return e._closeInteractionType=t,e.close(n)}var bV=new R("MatMdcDialogData"),yV=new R("mat-mdc-dialog-default-options"),wV=new R("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=I(he);return()=>e.scrollStrategies.block()}});var IV=0,EV=(()=>{let t=class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,c,l,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new V,this._afterOpenedAtThisLevel=new V,this.dialogConfigClass=Va,this.afterAllClosed=fi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(cn(void 0))),this._dialog=r.get(R_),this._dialogRefConstructor=x_,this._dialogContainerType=_V,this._dialogDataToken=bV}open(i,r){let s;r=_(_({},this._defaultOptions||new Va),r),r.id=r.id||`mat-mdc-dialog-${IV++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,Z(_({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:ar,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,r,l),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};t.\u0275fac=function(r){return new(r||t)(p(he),p(J),p(dn,8),p(yV,8),p(wV),p(t,12),p(Vr),p(be,8))},t.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $C=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=L({type:t}),t.\u0275inj=F({providers:[EV],imports:[VC,Ur,wn,Ne,Ne]});let e=t;return e})();var qC=(()=>{let t=class t{constructor(){this.title="SALA-DE-JUEGOS-LABOIV"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=vt({type:t,selectors:[["app-root"]],standalone:!0,features:[bt],decls:1,vars:0,template:function(r,s){r&1&&ht(0,"router-outlet")},dependencies:[_b,Jd,$C]});let e=t;return e})();Tv(qC,LC).catch(e=>console.error(e));
